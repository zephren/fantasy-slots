{"version":3,"sources":["lib/store.ts","classes/TileConfig.ts","config/tiles/rarities.ts","lib/createTile.ts","config/tiles/Icon.tsx","config/tiles/misc/icons/coin.png","config/tiles/misc/icons/index.tsx","config/tiles/misc/index.tsx","config/tiles/lib/iterateAdjacentTiles.ts","config/tiles/lib/hasCategory.ts","lib/utils.ts","lib/static.ts","lib/saveGameData.ts","config/taxPeriods.ts","actions/game.ts","lib/game.ts","config/tiles/lib/removeTile.ts","config/tiles/chests/icons/key.png","config/tiles/chests/icons/chest1.png","config/tiles/chests/icons/chest2.png","config/tiles/chests/icons/chest3.png","config/tiles/chests/icons/chest4.png","config/tiles/chests/icons/index.tsx","config/tiles/chests/index.tsx","config/tiles/mining/icons/pickaxe.png","config/tiles/mining/icons/rock.png","config/tiles/mining/icons/oreCoal.png","config/tiles/mining/icons/oreCopper.png","config/tiles/mining/icons/oreGold.png","config/tiles/mining/icons/oreIron.png","config/tiles/mining/icons/oreMithril.png","config/tiles/mining/icons/oreSilver.png","config/tiles/mining/icons/index.tsx","config/tiles/mining/index.tsx","config/tiles/categories.ts","config/tiles/potions/icons/elixer1.png","config/tiles/potions/icons/elixer2.png","config/tiles/potions/icons/elixer3.png","config/tiles/potions/icons/healthPotion1.png","config/tiles/potions/icons/healthPotion2.png","config/tiles/potions/icons/healthPotion3.png","config/tiles/potions/icons/manaPotion1.png","config/tiles/potions/icons/manaPotion2.png","config/tiles/potions/icons/manaPotion3.png","config/tiles/lib/findAdjacent.ts","config/tiles/lib/replaceTile.ts","config/tiles/potions/index.ts","config/tiles/potions/icons/index.tsx","config/tiles/empty/index.tsx","config/tiles/index.ts","lib/updateGameData.ts","lib/newGame.ts","lib/loadGameData.ts","components/Tile.tsx","components/Inventory.tsx","lib/newRound.ts","views/RoundEnd.tsx","components/Board.tsx","components/GameEvents.tsx","actions/modal.ts","components/Modal.tsx","components/TileDetails.tsx","views/modals/PickNewTileModal.tsx","views/modals/InventoryModal.tsx","components/Upgrades.tsx","views/modals/UpgradesModal.tsx","views/modals/IntroModal.tsx","views/modals/OptionsModal.tsx","views/MainGame.tsx","App.tsx","index.tsx"],"names":["store","state","gameData","spinning","selectedTile","_update","value","update","Math","random","window","TileConfig","properties","id","name","icon","rarity","categories","baseValue","description","calculateValue","context","onRemove","createMeta","topStat","this","Object","assign","COMMON","UNCOMMON","RARE","LEGENDARY","rarityNames","maxRarity","createTile","tileConfig","meta","console","error","Error","emptyTileConfig","uuid","config","effects","data","spinValue","totalSpins","totalAppearances","highlight","Icon","image","className","src","alt","onClick","TextIcon","iconCache","Map","getIcon","get","Coin","coin","tileConfigsMap","tileConfigs","iterateAdjacentTiles","callback","adjecentIndexes","getAdjacentIndexes","getTiles","map","hasCategory","tile","category","includes","randomInt","min","max","floor","GAME_ID","saveGameData","localData","localStorage","JSON","parse","gameState","stringify","replaceTileConfigs","ownedTiles","deckTiles","gameTiles","tilesToPick","saveDate","Date","tiles","taxPeriods","totalDays","taxAmount","endRound","roundEnded","savedCoins","totalCoins","lastTotalCoins","findTile","find","addOwnedTile","log","push","addGameTile","newTile","emptyTileIndex","findIndex","splice","pickRandomTile","array","tilesAvailable","reduce","acc","length","setInitialGameTiles","i","fillEmptyTiles","gridWidth","gridHeight","spin","boardTiles","availableGameTiles","availableIndex","gameTile","index","indexOf","generateBoard","resetTiles","forEach","interval","setInterval","clearInterval","boardValue","count","availableTiles","pickedTiles","getTileChances","chances","rand","chanceTotal","chance","pickTiles","modal","nextTaxPeriodDay","calculateBoardTileValue","isAdjacent","originIndex","checkIndex","width","height","tileIndexes","boardIndex","startIndex","indexes","taxPeriod","currentTaxPeriod","currentTaxPeriodDay","newTotalCoins","addGameEvent","message","events","calculateDeckScore","score","removeTile","removeValue","gameTilesIndex","replaceTile","Chest1","chest1","Small_Chest","Chest2","chest2","Medium_Chest","Chest3","chest3","Large_Chest","Chest4","chest4","Dark_Chest","createChestConfig","Key","key","activated","Pickaxe","pickaxe","Coal","oreCoal","OreCopper","oreCopper","Copper_Ore","OreIron","oreIron","Iron_Ore","OreSilver","oreSilver","Silver_Ore","uses","broken","Rock","rock","Gold_Ore","oreGold","Mithril_Ore","oreMithril","findAdjacent","item","createElixer","foundTiles","Small_Elixer","createNextPotion","nextConfig","Small_Health_Potion","healthPotion1","Medium_Health_Potion","healthPotion2","Large_Health_Potion","healthPotion3","Small_Mana_Potion","manaPotion1","Medium_Mana_Potion","manaPotion2","Large_Mana_Potion","manaPotion3","elixer1","Medium_Elixer","elixer2","Large_Elixer","elixer3","Empty","empty","misc","mining","potions","chests","tileName","replaceAll","values","tilesById","tileInstances","updateGameData","d","superUser","deckTileIds","flags","counters","totalRounds","addTile","getTileConfigByName","tileId","addDeckTile","newGame","buildDeck","loadGameData","updateTileConfigs","Tile","showValue","fade","join","Inventory","onClickTile","newRound","RoundEnd","deckScore","tileRarityCost","rarityValue","rarityCount","pow","getRemainingTiles","availableTilesByRarity","keys","allTilesByRarity","ownedRarityCounts","style","display","justifyContent","rarityName","cost","enabled","rarityTiles","buyTileRarity","background","toFixed","otherTile","ownedTile","Board","fontSize","gridTemplateColumns","gridTemplateRows","emptyTileInstance","repeat","split","_","deckIndex","GameEvents","event","set","openModal","modalName","closeModal","Modal","children","TileDetails","PickNewTileModal","pickTile","InventoryModal","upgrades","buy","isComplete","Upgrades","upgrade","UpgradesModal","IntroModal","introDismissed","OptionsModal","Header","float","Modals","MainGame","packageJson","version","textAlign","marginTop","SelectedTile","position","top","left","zIndex","padding","boxShadow","undefined","App","useState","useEffect","view","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ba29d845.chunk.js","sourcesContent":["import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport const store = {\n  state: {\n    gameData: (null as unknown) as GameData,\n    spinning: false,\n    selectedTile: (null as unknown) as TileInstance | undefined,\n  },\n  _update: (value: number) => {}, // The function that triggers an update\n  update: (): void => {\n    store._update(Math.random());\n  },\n};\n\n(window as any).store = store;\n","import { TileInstance, TileMeta } from \"../types/TileInstance\";\nimport { TileValueContext } from \"../types/TileValueContext\";\n\nexport type RemoveValue = {\n  value?: number;\n  tiles?: TileInstance[];\n};\n\nexport class TileConfig {\n  id: string = \"\";\n  name?: string = \"\";\n  icon: any;\n  rarity: number = 0;\n  categories: string[] = [];\n\n  // Optional, so it will be 0, but usage should use a !\n  baseValue?: number = 0;\n\n  description?: () => any;\n  calculateValue?: (context: TileValueContext) => number = (context) => {\n    return 0;\n  };\n  onRemove?: (context: TileValueContext) => RemoveValue | void;\n  createMeta?: () => TileMeta;\n  topStat?: (tile: TileInstance) => number;\n\n  constructor(properties: TileConfig) {\n    this.name = \"\";\n\n    // This is just easy\n    Object.assign(this, properties);\n  }\n}\n\nexport type TileConfigMap = {\n  [key: string]: TileConfig;\n};\n","export const rarity = {\n  COMMON: 0,\n  UNCOMMON: 1,\n  RARE: 2,\n  LEGENDARY: 3,\n};\n\nexport const rarityNames = [\"Common\", \"Uncommon\", \"Rare\", \"Legendary\"];\n\nexport const maxRarity = rarity.LEGENDARY;\n","import { TileConfig } from \"../classes/TileConfig\";\nimport { TileData, TileInstance, TileMeta } from \"../types/TileInstance\";\nimport { v4 as uuid } from \"uuid\";\nimport { emptyTileConfig } from \"../config/tiles\";\n\nexport function createTileData() {\n  const tileData: TileData = {\n    spinValue: 0,\n    totalSpins: 0,\n    totalAppearances: 0,\n    highlight: false,\n  };\n\n  return tileData;\n}\n\nexport function createTile(tileConfig?: TileConfig, meta?: TileMeta) {\n  if (!tileConfig) {\n    console.error(\n      new Error(\n        \"Undefined tile config for creating a tile. Adding an empty tile.\"\n      )\n    );\n    tileConfig = emptyTileConfig;\n  }\n\n  if (!meta && tileConfig.createMeta) {\n    meta = tileConfig.createMeta();\n  }\n\n  const tile: TileInstance = {\n    id: uuid(),\n    config: tileConfig,\n    effects: {},\n    data: createTileData(),\n    meta: meta ?? {},\n  };\n\n  return tile;\n}\n","import { store } from \"../../lib/store\";\nimport { createTile } from \"../../lib/createTile\";\nimport { tileConfigsMap } from \".\";\nimport { TileConfig } from \"../../classes/TileConfig\";\n\nconst empty = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\ninterface Props {\n  image?: any;\n  config?: TileConfig;\n}\n\nexport function Icon({ image, config: tileConfig }: Props) {\n  return (\n    <img\n      className=\"icon\"\n      src={image}\n      alt=\"\"\n      onClick={() => {\n        if (tileConfig) {\n          store.state.selectedTile = createTile(tileConfig);\n          store.update();\n        }\n      }}\n    />\n  );\n}\n\nexport function TextIcon({ Icon }: any) {\n  return (\n    <span className=\"text-icon\">\n      <Icon />\n    </span>\n  );\n}\n\n// Cache icon instances for faster reference\n// There is no need to create one for each new instance\nconst iconCache = new Map<string, JSX.Element>();\n\nexport function getIcon(image: string, config: TileConfig) {\n  let icon = iconCache.get(config.name!);\n\n  if (!icon) {\n    icon = <Icon image={image} config={config} />;\n  }\n\n  return icon;\n}\n\nexport const Empty = () => getIcon(empty, tileConfigsMap.Empty);\n","export default __webpack_public_path__ + \"static/media/coin.3480412c.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport coin from \"./coin.png\";\n\n// Icons\nexport const Coin = () => getIcon(coin, tileConfigsMap.Coin);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { rarity } from \"../rarities\";\nimport { Coin } from \"./icons\";\n\nconst tileConfigs = {\n  Coin: new TileConfig({\n    id: \"d9c7f23b-a3e9-4b4e-af69-4a026998d40a\",\n    icon: Coin,\n    rarity: rarity.COMMON,\n    categories: [\"coin\"],\n    baseValue: 1,\n  }),\n};\n\nexport default tileConfigs;\n","import { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function iterateAdjacentTiles(\n  context: TileValueContext,\n  callback: any\n): TileInstance[] {\n  const adjecentIndexes = context.getAdjacentIndexes();\n\n  const tiles = context.getTiles(adjecentIndexes);\n\n  return tiles.map(callback);\n}\n","import { TileInstance } from \"../../../types/TileInstance\";\n\nexport function hasCategory(tile: TileInstance, category: string) {\n  return tile.config.categories.includes(category);\n}\n","export function randomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","export const GAME_ID = \"9c0617fc-daf3-4f9c-943e-073f698ac0b8\";\n","import { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\n\nexport function saveGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  // Simple clone of just the data\n  const gameState = JSON.parse(JSON.stringify(store.state.gameData));\n\n  replaceTileConfigs(gameState.ownedTiles);\n  replaceTileConfigs(gameState.deckTiles);\n  replaceTileConfigs(gameState.gameTiles);\n  replaceTileConfigs(gameState.tilesToPick);\n\n  localData.gameState = gameState;\n  localData.saveDate = new Date();\n\n  localStorage[`${GAME_ID}`] = JSON.stringify(localData);\n}\n\nfunction replaceTileConfigs(tiles: any[]) {\n  for (const tile of tiles) {\n    tile.config = { id: tile.config.id };\n  }\n}\n","export const taxPeriods = [\n  {\n    totalDays: 0, // This will increment on starting a new game\n    taxAmount: 0,\n  },\n  {\n    totalDays: 5,\n    taxAmount: 25,\n  },\n  {\n    totalDays: 6,\n    taxAmount: 50,\n  },\n  {\n    totalDays: 7,\n    taxAmount: 100,\n  },\n  {\n    totalDays: 8,\n    taxAmount: 200,\n  },\n  {\n    totalDays: 9,\n    taxAmount: 400,\n  },\n  {\n    totalDays: 10,\n    taxAmount: 800,\n  },\n];\n","import { saveGameData } from \"../lib/saveGameData\";\nimport { store } from \"../lib/store\";\n\nexport function endRound() {\n  const { gameData } = store.state;\n\n  gameData.roundEnded = true;\n  gameData.savedCoins += gameData.totalCoins;\n  gameData.lastTotalCoins = gameData.totalCoins;\n  gameData.tilesToPick = [];\n\n  store.update();\n\n  saveGameData();\n}\n","import { emptyTileConfig } from \"../config/tiles\";\nimport { maxRarity, rarity } from \"../config/tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { createTile } from \"./createTile\";\nimport { randomInt } from \"./utils\";\nimport { store } from \"./store\";\nimport { saveGameData } from \"./saveGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\nimport { v4 as uuid } from \"uuid\";\nimport { TileConfig } from \"../classes/TileConfig\";\nimport { endRound } from \"../actions/game\";\n\nexport function findTile(tiles: TileInstance[], id: string) {\n  return tiles.find((tile) => {\n    return tile.config.id === id;\n  });\n}\n\nexport function addOwnedTile(tileConfig: TileConfig = emptyTileConfig) {\n  const { ownedTiles } = store.state.gameData;\n\n  if (findTile(ownedTiles, tileConfig.id)) {\n    console.log(`Already own tile ${tileConfig.name}`);\n    return;\n  }\n\n  console.log(`Adding owned tile ${tileConfig.name}`);\n\n  const tile = createTile(tileConfig);\n\n  ownedTiles.push(tile);\n}\n\nexport function addDeckTile(tileId?: string) {\n  if (!tileId) {\n    return;\n  }\n\n  const { deckTileIds } = store.state.gameData;\n\n  if (!deckTileIds.includes(tileId)) {\n    deckTileIds.push(tileId);\n  }\n}\nexport function addGameTile(newTile: TileInstance) {\n  const { gameTiles } = store.state.gameData;\n\n  const emptyTileIndex = gameTiles.findIndex((tile) => {\n    return tile.config.id === emptyTileConfig.id;\n  });\n\n  if (emptyTileIndex >= 0) {\n    gameTiles.splice(emptyTileIndex, 1, newTile);\n  } else {\n    gameTiles.push(newTile);\n  }\n}\n\nexport function buildDeck() {\n  const { gameData } = store.state;\n  const { deckTileIds, ownedTiles } = gameData;\n\n  gameData.deckTiles = deckTileIds.map((id) => {\n    return findTile(ownedTiles, id) || createTile(emptyTileConfig);\n  });\n}\n\nexport function ArrayRandomItem<T>(array: T[]) {\n  return array[randomInt(0, array.length - 1)];\n}\n\nexport function pickRandomTile(tiles: TileInstance[], maxRarity: number) {\n  const tilesAvailable = tiles.reduce((acc, tile) => {\n    if (tile.config.rarity <= maxRarity) {\n      acc.push(tile);\n    }\n\n    return acc;\n  }, [] as TileInstance[]);\n\n  return ArrayRandomItem<TileInstance>(tilesAvailable);\n}\n\nexport function setInitialGameTiles() {\n  const { gameData } = store.state;\n  const { deckTiles } = gameData;\n\n  const gameTiles: TileInstance[] = [];\n\n  for (let i = 0; i < 5; i++) {\n    const tile = pickRandomTile(deckTiles, rarity.COMMON);\n    gameTiles.push(createTile(tile.config));\n  }\n\n  gameData.gameTiles = gameTiles;\n\n  fillEmptyTiles();\n}\n\nexport function fillEmptyTiles() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n\n  for (let i = 0; gameTiles.length < gridWidth * gridHeight; i++) {\n    gameTiles.push(createTile(emptyTileConfig));\n  }\n}\n\nexport function generateBoard() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n  const boardTiles = [];\n  const availableGameTiles = [...gameTiles]; // New array\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    // Get a random index\n    const availableIndex = Math.floor(Math.random() * availableGameTiles.length);\n    const gameTile = availableGameTiles[availableIndex];\n    const index = gameTiles.indexOf(gameTile);\n\n    // console.log(index);\n    boardTiles.push(index);\n\n    availableGameTiles.splice(availableIndex, 1);\n  }\n\n  return boardTiles;\n}\n\nexport function resetTiles() {\n  const { gridWidth, gridHeight, gameTiles, boardTiles } = store.state.gameData;\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    const tile = gameTiles[boardTiles[i]];\n    tile.data.spinValue = 0;\n  }\n}\n\nexport function spin() {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight, deckTiles } = gameData;\n\n  gameData.boardTiles = generateBoard();\n\n  resetTiles();\n  processBoard();\n\n  store.state.spinning = true;\n  store.update();\n\n  let index = 0;\n  const interval = setInterval(() => {\n    const { boardTiles, gameTiles } = gameData;\n\n    if (index > 0 && index <= gridWidth * gridHeight) {\n      const lastTile = gameTiles[boardTiles[index - 1]];\n      lastTile.data.highlight = false;\n    }\n\n    if (index > gridWidth * gridHeight) {\n      // Spin finished\n\n      clearInterval(interval);\n\n      store.state.spinning = false;\n      store.state.gameData.totalCoins += store.state.gameData.boardValue;\n      store.state.gameData.tilesToPick = pickTiles(deckTiles);\n      store.state.gameData.modal = \"PickNewTile\";\n      store.update();\n\n      nextTaxPeriodDay();\n\n      saveGameData();\n\n      return;\n    }\n\n    if (index < gridWidth * gridHeight) {\n      const tile = gameTiles[boardTiles[index]];\n      tile.data.highlight = true;\n      tile.data.totalAppearances++;\n      tile.data.spinValue = calculateBoardTileValue(tile, index);\n    }\n\n    index++;\n\n    let boardValue = 0;\n\n    for (const boardTilesIndex of boardTiles) {\n      boardValue += gameTiles[boardTilesIndex].data.spinValue;\n    }\n    store.state.gameData.boardValue = boardValue;\n\n    store.update();\n  }, 100);\n}\n\nexport function processBoard() {\n  const { gameTiles } = store.state.gameData;\n\n  // Add to totalSpins\n  gameTiles.forEach((tile) => {\n    tile.data.totalSpins++;\n  });\n}\n\nexport function isAdjacent(originIndex: number, checkIndex: number, width: number, height: number) {\n  // Up / Down or out of bounds\n  if (checkIndex < 0 || checkIndex >= width * height) {\n    return false;\n  }\n\n  // Left / Right\n  if (originIndex + 1 === checkIndex || originIndex - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor(originIndex / width)) {\n      return false;\n    }\n  }\n\n  // Down > Left / Right\n  if (originIndex + width + 1 === checkIndex || originIndex + width - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor((originIndex + width) / width)) {\n      return false;\n    }\n  }\n\n  // Up > Left / Right\n  if (originIndex - width + 1 === checkIndex || originIndex - width - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor((originIndex - width) / width)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getAdjacentIndexes(startIndex: number, width: number, height: number): number[] {\n  const indexes: number[] = [];\n\n  indexes.push(startIndex + width);\n  indexes.push(startIndex - width);\n  indexes.push(startIndex + 1);\n  indexes.push(startIndex - 1);\n\n  indexes.push(startIndex + width - 1);\n  indexes.push(startIndex + width + 1);\n  indexes.push(startIndex - width - 1);\n  indexes.push(startIndex - width + 1);\n\n  for (let i = 7; i >= 0; i--) {\n    if (!isAdjacent(startIndex, indexes[i], width, height)) {\n      indexes.splice(i, 1);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getTiles(tileIndexes: number[]) {\n  const { boardTiles, gameTiles } = store.state.gameData;\n\n  return tileIndexes.map((index) => {\n    return gameTiles[boardTiles[index]];\n  });\n}\n\nexport function calculateBoardTileValue(tile: TileInstance, boardIndex: number): number {\n  if (!tile.config.calculateValue) {\n    return tile.config.baseValue!;\n  }\n\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight } = gameData;\n\n  const context = {\n    tile,\n    gameData,\n    getAdjacentIndexes: () => {\n      return getAdjacentIndexes(boardIndex, gridWidth, gridHeight);\n    },\n    getTiles,\n  };\n\n  return tile.config.calculateValue(context) + tile.config.baseValue!;\n}\n\nfunction getTileChances(tiles: TileInstance[]) {\n  const chances: number[] = [];\n  let chanceTotal = 0;\n\n  for (const tile of tiles) {\n    // The higher the rarity, the lower the chance\n    chanceTotal += maxRarity + 1 - tile.config.rarity;\n    chances.push(chanceTotal);\n  }\n\n  return { chances, chanceTotal };\n}\n\nfunction pickTiles(tiles: TileInstance[], count = 3) {\n  const availableTiles = [...tiles];\n  const pickedTiles = [];\n\n  for (let i = 0; i < count; i++) {\n    const { chances, chanceTotal } = getTileChances(availableTiles);\n\n    const rand = randomInt(0, chanceTotal);\n\n    const index = chances.findIndex((chance) => {\n      return chance >= rand;\n    });\n\n    const tile = availableTiles.splice(index, 1)[0];\n\n    if (tile) {\n      pickedTiles.push(createTile(tile.config));\n    }\n\n    // const index = randomInt(0, availableTiles.length - 1);\n    // const tile = availableTiles.splice(index, 1)[0];\n\n    // if (tile) {\n    //   pickedTiles.push(createTile(tile.config));\n    // }\n  }\n\n  return pickedTiles;\n}\n\nexport function nextTaxPeriodDay() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  gameData.currentTaxPeriodDay++;\n\n  if (gameData.currentTaxPeriodDay >= taxPeriod.totalDays) {\n    gameData.currentTaxPeriod++;\n    gameData.currentTaxPeriodDay = 1;\n\n    const newTotalCoins = gameData.totalCoins - taxPeriod.taxAmount;\n\n    if (newTotalCoins < 0) {\n      endRound();\n    }\n\n    gameData.totalCoins = newTotalCoins;\n  }\n\n  store.update();\n}\n\nexport function addGameEvent({ message = \"\" }: any) {\n  const { gameData } = store.state;\n\n  gameData.events.push({\n    id: uuid(),\n    message,\n  });\n\n  console.log(`GAME EVENT: ${message}`);\n}\n\nexport function calculateDeckScore() {\n  const { gameData } = store.state;\n  let score = 0;\n\n  for (const tile of gameData.deckTiles) {\n    score += tile.config.rarity;\n  }\n\n  return score / gameData.deckTiles.length;\n}\n","import { emptyTileConfig } from \"..\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { addGameTile } from \"../../../lib/game\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function removeTile(tile: TileInstance, context: TileValueContext) {\n  let removeValue;\n\n  if (tile.config.onRemove) {\n    removeValue = tile.config.onRemove(context);\n  }\n\n  const { gameTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n\n  // Default the replacement tile to an empty one\n  let replaceTile = createTile(emptyTileConfig);\n\n  if (removeValue) {\n    let { tiles } = removeValue;\n\n    // Replace the tile with the appropriate value\n    if (tiles?.length) {\n      replaceTile = tiles[0];\n\n      // Add the remaining tiles\n      for (let i = 1; i < tiles.length; i++) {\n        addGameTile(tiles[i]);\n      }\n    }\n\n    // Apply the value\n    if (removeValue.value) {\n      replaceTile.data.spinValue = removeValue.value;\n    }\n  }\n\n  gameTiles[gameTilesIndex] = replaceTile;\n}\n","export default __webpack_public_path__ + \"static/media/key.0629d73b.png\";","export default __webpack_public_path__ + \"static/media/chest1.b4054229.png\";","export default __webpack_public_path__ + \"static/media/chest2.d4ed67d0.png\";","export default __webpack_public_path__ + \"static/media/chest3.888bf5be.png\";","export default __webpack_public_path__ + \"static/media/chest4.28dffa1b.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport key from \"./key.png\";\nimport chest1 from \"./chest1.png\";\nimport chest2 from \"./chest2.png\";\nimport chest3 from \"./chest3.png\";\nimport chest4 from \"./chest4.png\";\n\n// Icons\nexport const Key = () => getIcon(key, tileConfigsMap.Key);\nexport const Chest1 = () => getIcon(chest1, tileConfigsMap.Small_Chest);\nexport const Chest2 = () => getIcon(chest2, tileConfigsMap.Medium_Chest);\nexport const Chest3 = () => getIcon(chest3, tileConfigsMap.Large_Chest);\nexport const Chest4 = () => getIcon(chest4, tileConfigsMap.Dark_Chest);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Chest1, Chest2, Chest3, Chest4, Key } from \"./icons\";\nimport { Coin } from \"../misc/icons\";\n\nfunction createChestConfig({ baseValue, removeValue }: any) {\n  return {\n    categories: [\"chest\"],\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives {removeValue} <Coin />\n        </>\n      );\n    },\n    baseValue,\n    onRemove: (context: TileValueContext) => {\n      return { value: removeValue };\n    },\n  };\n}\n\nconst tileConfigs = {\n  Key: new TileConfig({\n    id: \"2ef31449-bf1d-4cee-8e93-e0665fb9942a\",\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          The key unlocks <Chest1 /> <Chest2 /> <Chest3 /> <Chest4 />, destroying both in the process\n        </>\n      );\n    },\n    icon: Key,\n    rarity: rarity.COMMON,\n    categories: [\"key\"],\n    baseValue: 1,\n    calculateValue: (context: TileValueContext) => {\n      let activated = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (hasCategory(tile, \"chest\")) {\n          // Remove the tile\n          removeTile(tile, context);\n          activated = true;\n        }\n      });\n\n      if (activated) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 0;\n    },\n  }),\n  Small_Chest: new TileConfig({\n    id: \"834bf40d-0a3d-4e20-83a0-4e3aa233840c\",\n    icon: Chest1,\n    rarity: rarity.COMMON,\n    ...createChestConfig({ baseValue: 1, removeValue: 10 }),\n  }),\n  Medium_Chest: new TileConfig({\n    id: \"c87ea7e4-5479-4aa7-9033-0859d191390b\",\n    icon: Chest2,\n    rarity: rarity.UNCOMMON,\n    ...createChestConfig({ baseValue: 2, removeValue: 20 }),\n  }),\n  Large_Chest: new TileConfig({\n    id: \"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1\",\n    icon: Chest3,\n    rarity: rarity.RARE,\n    ...createChestConfig({ baseValue: 3, removeValue: 30 }),\n  }),\n  Dark_Chest: new TileConfig({\n    id: \"3422f3a8-bd1a-4549-a9ff-d0ed0621d646\",\n    icon: Chest4,\n    rarity: rarity.LEGENDARY,\n    ...createChestConfig({ baseValue: 4, removeValue: 40 }),\n  }),\n};\n\nexport default tileConfigs;\n","export default __webpack_public_path__ + \"static/media/pickaxe.9f91b8f2.png\";","export default __webpack_public_path__ + \"static/media/rock.cffc8f04.png\";","export default __webpack_public_path__ + \"static/media/oreCoal.d3a30adc.png\";","export default __webpack_public_path__ + \"static/media/oreCopper.ef951831.png\";","export default __webpack_public_path__ + \"static/media/oreGold.0a427c5c.png\";","export default __webpack_public_path__ + \"static/media/oreIron.45ad7af5.png\";","export default __webpack_public_path__ + \"static/media/oreMithril.4a29a93f.png\";","export default __webpack_public_path__ + \"static/media/oreSilver.3e3113ee.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport pickaxe from \"./pickaxe.png\";\nimport rock from \"./rock.png\";\n\nimport oreCoal from \"./oreCoal.png\";\nimport oreCopper from \"./oreCopper.png\";\n// import oreExoticPurple from \"./oreExoticPurple.png\";\nimport oreGold from \"./oreGold.png\";\nimport oreIron from \"./oreIron.png\";\nimport oreMithril from \"./oreMithril.png\";\nimport oreSilver from \"./oreSilver.png\";\n\n// Icons\nexport const Pickaxe = () => getIcon(pickaxe, tileConfigsMap.Pickaxe);\nexport const Rock = () => getIcon(rock, tileConfigsMap.Rock);\n\nexport const Coal = () => getIcon(oreCoal, tileConfigsMap.Coal);\nexport const OreCopper = () => getIcon(oreCopper, tileConfigsMap.Copper_Ore);\nexport const OreIron = () => getIcon(oreIron, tileConfigsMap.Iron_Ore);\nexport const OreSilver = () => getIcon(oreSilver, tileConfigsMap.Silver_Ore);\nexport const OreGold = () => getIcon(oreGold, tileConfigsMap.Gold_Ore);\nexport const OreMithril = () => getIcon(oreMithril, tileConfigsMap.Mithril_Ore);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Coal, OreCopper, OreGold, OreIron, OreMithril, OreSilver, Pickaxe, Rock } from \"./icons\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { tileConfigsMap } from \"..\";\nimport { addGameEvent } from \"../../../lib/game\";\n\nconst tileConfigs = {\n  Pickaxe: new TileConfig({\n    id: \"102f6200-dd6b-434f-b486-67ccc425cc4d\",\n    name: \"\",\n    description: () => {\n      return <>Breaks rocks, has 3 uses</>;\n    },\n    icon: Pickaxe,\n    rarity: rarity.COMMON,\n    categories: [\"mining\"],\n    baseValue: 1,\n    createMeta: () => {\n      return { uses: 3 };\n    },\n    topStat: (tile: TileInstance) => {\n      return tile.meta.uses;\n    },\n    calculateValue: (context: TileValueContext) => {\n      let broken = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (broken) {\n          return;\n        }\n\n        if (hasCategory(tile, \"rock\")) {\n          removeTile(tile, context);\n          console.log(context.tile.meta);\n          context.tile.meta.uses--;\n\n          if (context.tile.meta.uses === 0) {\n            broken = true;\n            addGameEvent({ message: \"A Pickaxe broke\" });\n          }\n        }\n      });\n\n      if (broken) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 0;\n    },\n  }),\n  Rock: new TileConfig({\n    id: \"89c89fb8-b343-4767-ba9f-78b4586b4ceb\",\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          Broken by <Pickaxe />, gives one of <Coal /> <OreCopper /> <OreIron /> <OreSilver />\n        </>\n      );\n    },\n    icon: Rock,\n    rarity: rarity.COMMON,\n    categories: [\"rock\"],\n    baseValue: 1,\n    onRemove: (context: TileValueContext) => {\n      const newTile = createTile(tileConfigsMap.Coal);\n\n      addGameEvent({\n        message: `A broken Rock yielded a ${newTile.config.name}`,\n      });\n\n      return { tiles: [newTile] };\n    },\n  }),\n  Coal: new TileConfig({\n    id: \"48217c09-300c-44b0-803e-19f51346227b\",\n    icon: Coal,\n    rarity: rarity.COMMON,\n    categories: [],\n    baseValue: 1,\n    calculateValue: (context: TileValueContext) => {\n      let total = 0;\n\n      // iterateAdjacentTiles(context, (tile: TileInstance) => {\n      //   if (tile.config.name === \"Coal\") {\n      //     total += 1;\n      //   }\n      // });\n\n      return total;\n    },\n  }),\n  Copper_Ore: new TileConfig({\n    id: \"35e8e354-dcfb-430c-9401-0035b775f00f\",\n    icon: OreCopper,\n    rarity: rarity.COMMON,\n    categories: [],\n    baseValue: 1,\n  }),\n  Iron_Ore: new TileConfig({\n    id: \"8df321a7-a16d-485e-9b41-aebe784350db\",\n    icon: OreIron,\n    rarity: rarity.COMMON,\n    categories: [],\n    baseValue: 1,\n  }),\n  Silver_Ore: new TileConfig({\n    id: \"7fa9e325-ca81-48cd-a7d5-8b1203354218\",\n    icon: OreSilver,\n    rarity: rarity.UNCOMMON,\n    categories: [],\n    baseValue: 1,\n  }),\n  Gold_Ore: new TileConfig({\n    id: \"5c65694c-aaea-4cf7-9387-ec81765ecaa9\",\n    icon: OreGold,\n    rarity: rarity.UNCOMMON,\n    categories: [],\n    baseValue: 1,\n  }),\n  Mithril_Ore: new TileConfig({\n    id: \"adf11359-db8e-4afc-8fe3-1688a3f4fb31\",\n    icon: OreMithril,\n    rarity: rarity.UNCOMMON,\n    categories: [],\n    baseValue: 1,\n  }),\n};\n\nexport default tileConfigs;\n","export const categories = {\n  POTION: \"potion\",\n  SMALL_HEALTH_POTION: \"small-health-potion\",\n  MEDIUM_HEALTH_POTION: \"medium-health-potion\",\n  LARGE_HEALTH_POTION: \"large-health-potion\",\n  SMALL_MANA_POTION: \"small-mana-potion\",\n  MEDIUM_MANA_POTION: \"medium-mana-potion\",\n  LARGE_MANA_POTION: \"large-mana-potion\",\n  SMALL_ELIXER: \"small-elixer\",\n  MEDIUM_ELIXER: \"medium-elixer\",\n  LARGE_ELIXER: \"large-elixer\",\n};\n","export default __webpack_public_path__ + \"static/media/elixer1.126eb52b.png\";","export default __webpack_public_path__ + \"static/media/elixer2.f677e6cf.png\";","export default __webpack_public_path__ + \"static/media/elixer3.ebf689aa.png\";","export default __webpack_public_path__ + \"static/media/healthPotion1.2cc42067.png\";","export default __webpack_public_path__ + \"static/media/healthPotion2.8e645ab4.png\";","export default __webpack_public_path__ + \"static/media/healthPotion3.e43eb7ea.png\";","export default __webpack_public_path__ + \"static/media/manaPotion1.03ef4a80.png\";","export default __webpack_public_path__ + \"static/media/manaPotion2.f6d761fd.png\";","export default __webpack_public_path__ + \"static/media/manaPotion3.c6a0b4ff.png\";","import { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { hasCategory } from \"./hasCategory\";\nimport { iterateAdjacentTiles } from \"./iterateAdjacentTiles\";\n\nexport function findAdjacent(\n  context: TileValueContext,\n  category: string\n): TileInstance[] {\n  return iterateAdjacentTiles(context, (tile: TileInstance) => {\n    if (hasCategory(tile, category)) {\n      return tile;\n    }\n  }).reduce((acc, item) => {\n    if (item) {\n      acc.push(item);\n    }\n    return acc;\n  }, [] as TileInstance[]);\n}\n","import { calculateBoardTileValue } from \"../../../lib/game\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function replaceTile(\n  tile: TileInstance,\n  newTile: TileInstance,\n  context: TileValueContext\n) {\n  const { gameTiles, boardTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n  const boardIndex = boardTiles.indexOf(gameTilesIndex);\n\n  gameTiles[gameTilesIndex] = newTile;\n\n  newTile.data.spinValue = calculateBoardTileValue(newTile, boardIndex);\n}\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { categories } from \"../categories\";\nimport {\n  HealthPotion1,\n  HealthPotion2,\n  Elixer1,\n  Elixer2,\n  ManaPotion1,\n  ManaPotion2,\n  Elixer3,\n  ManaPotion3,\n  HealthPotion3,\n} from \"./icons\";\nimport { findAdjacent } from \"../lib/findAdjacent\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { replaceTile } from \"../lib/replaceTile\";\nimport { rarity } from \"../rarities\";\n\n// function findAndRemoveMatch(category: string, context: TileValueContext) {\n//   const foundTiles = findAdjacent(context, category);\n\n//   if (foundTiles.length) {\n//     console.log(foundTiles);\n//     removeTile(foundTiles[0], context);\n//     return true;\n//   }\n\n//   return false;\n// }\n\nfunction createElixer(category: string, context: TileValueContext) {\n  const foundTiles = findAdjacent(context, category);\n\n  if (foundTiles.length) {\n    removeTile(foundTiles[0], context);\n    replaceTile(context.tile, createTile(tileConfigs.Small_Elixer), context);\n    return true;\n  }\n\n  return false;\n}\n\nfunction createNextPotion(category: string, nextConfig: TileConfig, context: TileValueContext) {\n  const foundTiles = findAdjacent(context, category);\n\n  if (foundTiles.length >= 2) {\n    removeTile(foundTiles[0], context);\n    removeTile(foundTiles[1], context);\n    replaceTile(context.tile, createTile(nextConfig), context);\n    return true;\n  }\n\n  return false;\n}\n\nconst tileConfigs = {\n  Small_Health_Potion: new TileConfig({\n    id: \"e77dc97d-8d44-45e4-bbad-deb79574092d\",\n    icon: HealthPotion1,\n    rarity: rarity.COMMON,\n    categories: [categories.SMALL_HEALTH_POTION],\n    baseValue: 1,\n    calculateValue: (context: TileValueContext) => {\n      if (createElixer(categories.SMALL_MANA_POTION, context)) {\n        return 0;\n      }\n\n      if (createNextPotion(categories.SMALL_HEALTH_POTION, tileConfigs.Medium_Health_Potion, context)) {\n        return 0;\n      }\n\n      return 0;\n    },\n  }),\n  Medium_Health_Potion: new TileConfig({\n    id: \"c6d67a75-f151-4503-b04d-2fb535c06c92\",\n    icon: HealthPotion2,\n    rarity: rarity.UNCOMMON,\n    categories: [categories.MEDIUM_HEALTH_POTION],\n    baseValue: 2,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 2;\n    // },\n  }),\n  Large_Health_Potion: new TileConfig({\n    id: \"227d75ba-7310-4aed-8f39-cab15fb90e20\",\n    icon: HealthPotion3,\n    rarity: rarity.RARE,\n    categories: [categories.LARGE_HEALTH_POTION],\n    baseValue: 3,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 2;\n    // },\n  }),\n  Small_Mana_Potion: new TileConfig({\n    id: \"d587eba7-246e-46c7-bd55-2f32b0093cf8\",\n    icon: ManaPotion1,\n    rarity: rarity.COMMON,\n    categories: [categories.SMALL_MANA_POTION],\n    baseValue: 1,\n    calculateValue: (context: TileValueContext) => {\n      if (createElixer(categories.SMALL_HEALTH_POTION, context)) {\n        return 0;\n      }\n\n      if (createNextPotion(categories.SMALL_MANA_POTION, tileConfigs.Medium_Mana_Potion, context)) {\n        return 0;\n      }\n\n      return 0;\n    },\n  }),\n  Medium_Mana_Potion: new TileConfig({\n    id: \"6c067c0f-eefb-43ce-8f81-0aabd19cacc1\",\n    icon: ManaPotion2,\n    rarity: rarity.UNCOMMON,\n    categories: [categories.MEDIUM_MANA_POTION],\n    baseValue: 2,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 2;\n    // },\n  }),\n  Large_Mana_Potion: new TileConfig({\n    id: \"cf9a1a58-c4ee-4284-a504-fe442c34a8f0\",\n    icon: ManaPotion3,\n    rarity: rarity.RARE,\n    categories: [categories.LARGE_MANA_POTION],\n    baseValue: 3,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 2;\n    // },\n  }),\n\n  /**\n   * Elixer\n   */\n  Small_Elixer: new TileConfig({\n    id: \"93a94d4e-7a9d-4d1a-9f8a-3b1586530ca0\",\n    icon: Elixer1,\n    rarity: rarity.RARE,\n    categories: [categories.SMALL_ELIXER],\n    baseValue: 5,\n    calculateValue: (context: TileValueContext) => {\n      if (createNextPotion(categories.SMALL_ELIXER, tileConfigs.Medium_Elixer, context)) {\n        return 0;\n      }\n\n      return 0;\n    },\n  }),\n  Medium_Elixer: new TileConfig({\n    id: \"1fb94f1d-880e-41eb-9a29-f14700a22928\",\n    icon: Elixer2,\n    rarity: rarity.RARE,\n    categories: [categories.MEDIUM_ELIXER],\n    baseValue: 10,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 10;\n    // },\n  }),\n  Large_Elixer: new TileConfig({\n    id: \"3e5d71cf-0f07-4c87-a76b-b269172b0a17\",\n    icon: Elixer3,\n    rarity: rarity.LEGENDARY,\n    categories: [categories.LARGE_ELIXER],\n    baseValue: 10,\n    // calculateValue: (context: TileValueContext) => {\n    //   return 10;\n    // },\n  }),\n};\n\nexport default tileConfigs;\n","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport elixer1 from \"./elixer1.png\";\nimport elixer2 from \"./elixer2.png\";\nimport elixer3 from \"./elixer3.png\";\nimport healthPotion1 from \"./healthPotion1.png\";\nimport healthPotion2 from \"./healthPotion2.png\";\nimport healthPotion3 from \"./healthPotion3.png\";\nimport manaPotion1 from \"./manaPotion1.png\";\nimport manaPotion2 from \"./manaPotion2.png\";\nimport manaPotion3 from \"./manaPotion3.png\";\n\n// Icons\nexport const HealthPotion1 = () => getIcon(healthPotion1, tileConfigsMap.Small_Health_Potion);\nexport const HealthPotion2 = () => getIcon(healthPotion2, tileConfigsMap.Medium_Health_Potion);\nexport const HealthPotion3 = () => getIcon(healthPotion3, tileConfigsMap.Large_Health_Potion);\n\nexport const ManaPotion1 = () => getIcon(manaPotion1, tileConfigsMap.Small_Mana_Potion);\nexport const ManaPotion2 = () => getIcon(manaPotion2, tileConfigsMap.Medium_Mana_Potion);\nexport const ManaPotion3 = () => getIcon(manaPotion3, tileConfigsMap.Large_Mana_Potion);\n\nexport const Elixer1 = () => getIcon(elixer1, tileConfigsMap.Small_Elixer);\nexport const Elixer2 = () => getIcon(elixer2, tileConfigsMap.Medium_Elixer);\nexport const Elixer3 = () => getIcon(elixer3, tileConfigsMap.Large_Elixer);\n","import { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { Empty } from \"../Icon\";\nimport { TileConfig } from \"../../../classes/TileConfig\";\n\nconst tileConfigs = {\n  Empty: new TileConfig({\n    id: \"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1\",\n    name: \"\",\n    icon: Empty,\n    rarity: rarity.COMMON,\n    categories: [\"empty\"],\n    calculateValue: (context: TileValueContext) => {\n      return context.tile.data.spinValue || 0;\n    },\n  }),\n};\n\nexport default tileConfigs;\n","import { TileConfig } from \"../../classes/TileConfig\";\n\n// Sets\nimport misc from \"./misc\";\nimport chests from \"./chests\";\nimport mining from \"./mining\";\nimport potions from \"./potions\";\nimport empty from \"./empty\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { createTile } from \"../../lib/createTile\";\n\nexport const emptyTileConfig = empty.Empty;\n\nexport const tileConfigsMap = {\n  ...empty,\n  ...misc,\n  ...mining,\n  ...potions,\n  ...chests,\n};\n\nexport type TileConfigNames = keyof typeof tileConfigsMap;\n\n// Update the names on all tileConfigs\nfor (const tileName in tileConfigsMap) {\n  const tileConfig = (tileConfigsMap as any)[tileName];\n  tileConfig.name = tileName.replaceAll(\"_\", \" \");\n}\n\nconst tileConfigs: TileConfig[] = [...Object.values(tileConfigsMap)];\n\nexport default tileConfigs;\nexport const tilesById = new Map<string, TileConfig>();\nexport const tileInstances: TileInstance[] = [];\n\n// Setup the tiles by Id and name\ntileConfigs.forEach((config) => {\n  tilesById.set(config.id, config);\n  tileInstances.push(createTile(config));\n});\n\nexport function getTileConfigByName(name: TileConfigNames): TileConfig {\n  const tileConfig = tileConfigsMap[name];\n\n  if (!tileConfig) {\n    console.error(new Error(`Tile name \"${name}\" not found`));\n  }\n\n  return tileConfig;\n}\n","import { GameData } from \"../types/GameData\";\n\nexport function updateGameData(gameData: any) {\n  const d: GameData = gameData;\n\n  d.superUser = d.superUser ?? false;\n  d.boardTiles = d.boardTiles ?? [];\n  d.ownedTiles = d.ownedTiles ?? [];\n  d.deckTileIds = d.deckTileIds ?? [];\n  d.deckTiles = d.deckTiles ?? [];\n  d.gameTiles = d.gameTiles ?? [];\n  d.tilesToPick = d.tilesToPick ?? [];\n  d.gridWidth = d.gridWidth ?? 3;\n  d.gridHeight = d.gridHeight ?? 3;\n  d.boardValue = d.boardValue ?? 0;\n  d.totalCoins = d.totalCoins ?? 0;\n  d.savedCoins = d.savedCoins ?? 0;\n  d.lastTotalCoins = d.lastTotalCoins ?? 0;\n  d.currentTaxPeriod = d.currentTaxPeriod ?? 0;\n  d.currentTaxPeriodDay = d.currentTaxPeriodDay ?? 0;\n  d.roundEnded = d.roundEnded ?? false;\n  d.events = d.events ?? [];\n  d.modal = d.modal ?? \"\";\n\n  /**\n   * Flags\n   */\n  if (!d.flags) d.flags = {} as any;\n\n  // Should be find to leave flags that default to \"false\" as \"undefined\"\n  // \"true\" defaults should definitely be initialized\n  // if (updateGameData.flags.introDismissed === undefined) {\n  //   updateGameData.flags.introDismissed= false;\n  // }\n\n  /**\n   * Counters\n   */\n  if (!d.counters) d.counters = {} as any;\n\n  const { counters } = d;\n\n  counters.totalSpins = counters.totalSpins ?? 0;\n  counters.totalRounds = counters.totalRounds ?? 0;\n\n  return d;\n}\n","import { getTileConfigByName, TileConfigNames } from \"../config/tiles\";\nimport { addDeckTile, addOwnedTile, buildDeck, nextTaxPeriodDay, setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\nimport { updateGameData } from \"./updateGameData\";\n\nfunction addTile(name: TileConfigNames) {\n  const tileConfig = getTileConfigByName(name);\n  addOwnedTile(tileConfig);\n  addDeckTile(tileConfig?.id);\n}\n\nexport function newGame() {\n  const gameData = updateGameData({});\n\n  store.state.gameData = gameData;\n  store.state.gameData.tilesToPick = [];\n\n  addTile(\"Coal\");\n  addTile(\"Pickaxe\");\n  addTile(\"Rock\");\n\n  buildDeck();\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n}\n","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\nimport tileConfigs, { emptyTileConfig } from \"../config/tiles\";\nimport { updateGameData } from \"./updateGameData\";\n\nexport function loadGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  if (localData?.gameState) {\n    // Must update configs with references to the actual objects\n    const gameState: GameData = updateGameData(localData.gameState);\n\n    updateTileConfigs(gameState.ownedTiles);\n    updateTileConfigs(gameState.deckTiles);\n    updateTileConfigs(gameState.gameTiles);\n    updateTileConfigs(gameState.tilesToPick);\n\n    store.state.gameData = localData.gameState;\n  }\n}\n\nfunction updateTileConfigs(tiles: TileInstance[]) {\n  for (const tile of tiles) {\n    tile.config =\n      tileConfigs.find((tileConfig) => {\n        return tileConfig.id === tile.config.id;\n      }) || emptyTileConfig;\n  }\n}\n","import { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile: TileInstance;\n  showValue?: boolean;\n  fade?: boolean;\n  onClick?: (tile: TileInstance) => void;\n}\n\nexport function Tile({ tile, showValue, fade, onClick }: Props) {\n  const className = [\"tile\"];\n\n  if (tile.data.highlight) {\n    className.push(\"highlight\");\n  }\n\n  if (fade) {\n    className.push(\"fade\");\n  }\n\n  function clickedTile() {\n    store.state.selectedTile = tile;\n    store.update();\n\n    if (onClick) {\n      onClick(tile);\n    }\n  }\n\n  return (\n    <div className={className.join(\" \")} onClick={clickedTile}>\n      {!!tile.config.topStat && showValue && <div className=\"top-stat\">{tile.config.topStat(tile)}</div>}\n      {!!tile.data.spinValue && showValue && <div className=\"value\">{tile.data.spinValue}</div>}\n      <tile.config.icon />\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  tiles: TileInstance[];\n  fade?: (tile: TileInstance) => boolean;\n  onClickTile?: (tile: TileInstance) => void;\n}\n\nexport function Inventory({ tiles, onClickTile, fade }: Props) {\n  return (\n    <div className=\"inventory\">\n      {tiles.map((tile) => (\n        <Tile key={tile.id} tile={tile} onClick={onClickTile} fade={fade && fade(tile)} />\n      ))}\n    </div>\n  );\n}\n","import { nextTaxPeriodDay, setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\n\nexport function newRound() {\n  const { gameData } = store.state;\n\n  gameData.currentTaxPeriod = 0;\n  gameData.currentTaxPeriodDay = 0;\n  gameData.roundEnded = false;\n  gameData.boardTiles = [];\n  gameData.totalCoins = 0;\n  gameData.events = [];\n  gameData.tilesToPick = [];\n  gameData.modal = \"\";\n\n  gameData.counters.totalRounds++;\n\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n\n  store.update();\n}\n","import { Inventory } from \"../components/Inventory\";\nimport { emptyTileConfig, tileInstances } from \"../config/tiles\";\nimport { TextIcon } from \"../config/tiles/Icon\";\nimport { Coin } from \"../config/tiles/misc/icons\";\nimport { rarity } from \"../config/tiles/rarities\";\nimport { createTile } from \"../lib/createTile\";\nimport { addOwnedTile, calculateDeckScore, findTile } from \"../lib/game\";\nimport { newRound } from \"../lib/newRound\";\nimport { store } from \"../lib/store\";\nimport { randomInt } from \"../lib/utils\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport function RoundEnd() {\n  const deckScore = calculateDeckScore();\n\n  const { gameData } = store.state;\n\n  function tileRarityCost(rarityValue: number, rarityCount: number) {\n    return Math.pow(rarityValue + 1, 2) * 100 * (rarityCount + 1);\n  }\n\n  function getRemainingTiles() {\n    const availableTilesByRarity: TileInstance[][] = Object.keys(rarity).map(() => []);\n    const allTilesByRarity: TileInstance[][] = Object.keys(rarity).map(() => []);\n    const ownedRarityCounts: number[] = Object.keys(rarity).map(() => 0);\n\n    tileInstances.forEach((tile) => {\n      allTilesByRarity[tile.config.rarity].push(tile);\n\n      if (tile.config === emptyTileConfig) {\n        // Skip the empty tile\n        return;\n      }\n\n      if (!findTile(gameData.ownedTiles, tile.config.id)) {\n        availableTilesByRarity[tile.config.rarity].push(tile);\n      } else {\n        ownedRarityCounts[tile.config.rarity]++;\n      }\n    });\n\n    return {\n      availableTilesByRarity,\n      allTilesByRarity,\n      ownedRarityCounts,\n    };\n  }\n\n  function buyTileRarity(rarity: number) {\n    const { availableTilesByRarity, ownedRarityCounts } = getRemainingTiles();\n\n    const rarityTiles = availableTilesByRarity[rarity];\n\n    const index = randomInt(0, rarityTiles.length - 1);\n\n    gameData.savedCoins -= tileRarityCost(rarity, ownedRarityCounts[rarity]);\n\n    addOwnedTile(rarityTiles[index].config);\n\n    store.update();\n  }\n\n  const { availableTilesByRarity, allTilesByRarity, ownedRarityCounts } = getRemainingTiles();\n\n  return (\n    <div style={{ display: \"flex\", justifyContent: \"center\", height: \"100%\" }}>\n      <div className=\"main-container\">\n        <h1>The round is over</h1>\n        <h2>\n          Saved: {gameData.savedCoins}\n          <TextIcon Icon={Coin} /> ({gameData.lastTotalCoins}\n          <TextIcon Icon={Coin} /> earned last round)\n        </h2>\n        <div>\n          <div>\n            This is your chance to get a new tile. Getting a new tile will increase the cost of the next tile of the\n            same rarity\n          </div>\n          <div className=\"buy-new-card\">\n            {Object.keys(rarity).map((rarityName, index) => {\n              const rarityValue = (rarity as any)[rarityName];\n              const rarityCount = ownedRarityCounts[index];\n              const cost = tileRarityCost(rarityValue, rarityCount);\n              const availableTiles = availableTilesByRarity[index].length;\n              const className = [\"rarity\"];\n              let enabled = true;\n\n              if (cost > gameData.savedCoins || availableTiles === 0) {\n                className.push(\"disabled\");\n                enabled = false;\n              }\n\n              return (\n                <div key={rarityValue} className={className.join(\" \")}>\n                  <div className=\"name\">{rarityName}</div>\n                  <div className=\"cost\">{cost}</div>\n                  <div className=\"remaining-tiles\">\n                    {availableTilesByRarity[index].length} of {allTilesByRarity[index].length} tiles available\n                  </div>\n                  {enabled && <button onClick={() => buyTileRarity(index)}>Buy</button>}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <div>Take this time to reorganize your deck</div>\n        <br />\n        <div>\n          <div>\n            <h1>Deck</h1>\n            <div style={{ background: deckScore > 1 ? \"red\" : \"none\" }}>Deck Score: {deckScore.toFixed(2)}</div>\n            <Inventory\n              tiles={gameData.deckTiles}\n              onClickTile={(tile) => {\n                const index = gameData.deckTiles.indexOf(tile);\n\n                if (index >= 0) {\n                  gameData.deckTiles.splice(index, 1);\n                }\n              }}\n            />\n          </div>\n        </div>\n        <br />\n        <div>\n          <div>\n            <h1>Owned Inventory</h1>\n            <Inventory\n              tiles={gameData.ownedTiles}\n              onClickTile={(tile) => {\n                const hasTile = gameData.deckTiles.find((otherTile) => {\n                  return otherTile.config.id === tile.config.id;\n                });\n\n                if (!hasTile) {\n                  gameData.deckTiles.push(tile);\n                }\n              }}\n            />\n          </div>\n        </div>\n        <br />\n        <div>\n          <h1>All Tiles</h1>\n          <Inventory\n            tiles={tileInstances}\n            fade={(tile) => {\n              return !!gameData.ownedTiles.find((ownedTile) => {\n                return ownedTile.config.id === tile.config.id;\n              });\n            }}\n            onClickTile={(tile) => {\n              if (gameData.superUser) {\n                const hasTile = gameData.ownedTiles.find((otherTile) => {\n                  return otherTile.config.id === tile.config.id;\n                });\n\n                if (!hasTile) {\n                  gameData.ownedTiles.push(createTile(tile.config));\n                }\n              }\n            }}\n          />\n        </div>\n        <br />\n        <button onClick={newRound}>Next round</button>\n      </div>\n    </div>\n  );\n}\n","import { createTile } from \"../lib/createTile\";\nimport { emptyTileConfig } from \"../config/tiles\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  boardTiles: number[];\n  gameTiles: TileInstance[];\n  width: number;\n  height: number;\n}\n\nexport function Board({ boardTiles, gameTiles, width, height }: Props) {\n  const style = {\n    fontSize: \"1.5em\",\n    gridTemplateColumns: `repeat(${width}, 5em)`,\n    gridTemplateRows: `repeat(${height}, 5em)`,\n  };\n\n  if (boardTiles.length === 0) {\n    const emptyTileInstance = createTile(emptyTileConfig);\n\n    return (\n      <div className=\"board\" style={style}>\n        {\" \"\n          .repeat(width * height)\n          .split(\"\")\n          .map((_, index) => {\n            return <Tile key={index} tile={emptyTileInstance} />;\n          })}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"board\" style={style}>\n      {boardTiles.map((deckIndex, index) => {\n        const tile = gameTiles[deckIndex];\n        return <Tile key={tile.id} tile={tile} showValue onClick={() => {}} />;\n      })}\n    </div>\n  );\n}\n","import { GameEvent } from \"../types/GameData\";\n\ninterface Props {\n  events: GameEvent[];\n}\n\nexport function GameEvents({ events }: Props) {\n  return (\n    <div className=\"game-events\">\n      {events.map((event) => (\n        <div key={event.id} className=\"event\">\n          <div className=\"message\">{event.message}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { store } from \"../lib/store\";\n\nexport function openModal(modalName: string) {\n  store.state.gameData.modal = modalName;\n  store.update();\n}\n\nexport function closeModal() {\n  store.state.gameData.modal = \"\";\n  store.update();\n}\n","export function Modal({ children, style }: any) {\n  console.log(children);\n  return (\n    <div className=\"modal\">\n      <div className=\"shade\">\n        <div className=\"container\" style={style}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { TextIcon } from \"../config/tiles/Icon\";\nimport { Coin } from \"../config/tiles/misc/icons\";\nimport { rarityNames } from \"../config/tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile?: TileInstance;\n  onClick?: any;\n}\n\nexport function TileDetails({ tile, onClick }: Props) {\n  if (!tile) {\n    return null;\n  }\n\n  const { config } = tile;\n\n  return (\n    <div className=\"tile-details\" onClick={onClick}>\n      <div className=\"name\">{config.name}</div>\n      <div className=\"rarity\">{rarityNames[config.rarity]}</div>\n      <tile.config.icon />\n      <div className=\"base-value\">\n        {config.baseValue}\n        <TextIcon Icon={Coin} />\n      </div>\n      <div className=\"description\">{config.description && config.description()}</div>\n    </div>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Modal } from \"../../components/Modal\";\nimport { TileDetails } from \"../../components/TileDetails\";\nimport { addGameTile } from \"../../lib/game\";\nimport { saveGameData } from \"../../lib/saveGameData\";\nimport { store } from \"../../lib/store\";\nimport { TileInstance } from \"../../types/TileInstance\";\n\nexport function PickNewTileModal() {\n  const { tilesToPick } = store.state.gameData;\n\n  function pickTile(tile?: TileInstance) {\n    if (tile) {\n      addGameTile(tile);\n    }\n\n    store.state.gameData.modal = \"\";\n    store.state.gameData.tilesToPick = [];\n\n    saveGameData();\n\n    closeModal();\n  }\n\n  return (\n    <Modal>\n      <h1>Pick New Tile</h1>\n      <br />\n      <div className=\"pick-a-tile\">\n        {tilesToPick.map((tile) => (\n          <div className=\"option\">\n            <TileDetails key={tile.id} tile={tile} />\n            <button\n              onClick={() => {\n                pickTile(tile);\n              }}\n            >\n              Select\n            </button>\n          </div>\n        ))}\n      </div>\n      <br />\n      <button onClick={() => pickTile()}>Skip</button>\n    </Modal>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Inventory } from \"../../components/Inventory\";\nimport { Modal } from \"../../components/Modal\";\nimport { tileInstances } from \"../../config/tiles\";\nimport { createTile } from \"../../lib/createTile\";\nimport { calculateDeckScore } from \"../../lib/game\";\nimport { store } from \"../../lib/store\";\n\nexport function InventoryModal() {\n  const { gameData } = store.state;\n\n  const deckScore = calculateDeckScore();\n\n  return (\n    <Modal style={{ width: \"50em\" }}>\n      <div>\n        <h1>Inventory</h1>\n        <div>\n          <h1>Game Tiles</h1>\n          <Inventory tiles={gameData.gameTiles} />\n        </div>\n        <div>\n          <h1>Deck</h1>\n          <div style={{ background: deckScore > 1 ? \"red\" : \"none\" }}>Deck Score: {deckScore.toFixed(2)}</div>\n          <Inventory tiles={gameData.deckTiles} />\n        </div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory tiles={gameData.ownedTiles} />\n        </div>\n        {gameData.superUser && (\n          <div>\n            <h1>All Tiles</h1>\n            <Inventory\n              tiles={tileInstances}\n              onClickTile={(tile) => {\n                const hasTile = gameData.ownedTiles.find((otherTile) => {\n                  return otherTile.config.id === tile.config.id;\n                });\n\n                if (!hasTile) {\n                  gameData.ownedTiles.push(createTile(tile.config));\n                }\n              }}\n            />\n          </div>\n        )}\n        <br />\n        <button onClick={closeModal}>Close</button>\n      </div>\n    </Modal>\n  );\n}\n","import { fillEmptyTiles } from \"../lib/game\";\nimport { store } from \"../lib/store\";\n\nconst upgrades = [\n  {\n    id: \"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d\",\n    name: \"Board Width\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridWidth += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"1e0ab330-8ec9-4e41-933d-75251ffa5ee5\",\n    name: \"Board Height\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridHeight += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"0245c559-dd55-4f93-a626-53cc06b17d42\",\n    name: \"XYZ\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {},\n    isComplete: () => {\n      return false;\n    },\n  },\n];\n\nexport function Upgrades() {\n  return (\n    <div className=\"upgrades\">\n      {upgrades.map((upgrade) => {\n        return (\n          <div key={upgrade.id}>\n            <div>{upgrade.name}</div>\n            <div>\n              <button onClick={upgrade.buy}>Buy</button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Modal } from \"../../components/Modal\";\nimport { Upgrades } from \"../../components/Upgrades\";\n\nexport function UpgradesModal() {\n  return (\n    <Modal>\n      <h1>Upgrades</h1>\n      <Upgrades />\n      <br />\n      <button onClick={closeModal}>Close</button>\n    </Modal>\n  );\n}\n","import { Modal } from \"../../components/Modal\";\nimport { store } from \"../../lib/store\";\n\nexport function IntroModal() {\n  const { gameData } = store.state;\n\n  return (\n    <Modal>\n      <h1>Intro</h1>\n      <div>\n        You are a craftsman who's father just passed, leaving you his shop and a few personal possessions. One of these\n        was a well worn rune that you had never seen before... what could it possibly be?\n        <br />\n        <br />\n        <h3>Taxes</h3>\n        As a shop owner you must pay taxes. As time goes on you are given more time, but also expected to pay more\n        taxes.\n        <br />\n        <br />\n        <h3>Getting Items</h3>\n        Every day you will get new shipments of items, which you are then able to use for profit. What happens on the\n        day will be completely up to chance.\n        <br />\n        <br />\n        At the end of the day you will also have the opprtunity to select from additional items to be delivered to your\n        shop.\n        <br />\n        <br />\n        <h3>Item effects</h3>\n        As a craftsman you are able to utilize items in different ways to produce even more valuable or useful items.\n      </div>\n      <br />\n      <button\n        onClick={() => {\n          gameData.flags.introDismissed = true;\n          store.update();\n        }}\n      >\n        Begin your journey\n      </button>\n    </Modal>\n  );\n}\n","import { endRound } from \"../../actions/game\";\nimport { closeModal } from \"../../actions/modal\";\nimport { Modal } from \"../../components/Modal\";\nimport { newGame } from \"../../lib/newGame\";\nimport { saveGameData } from \"../../lib/saveGameData\";\nimport { store } from \"../../lib/store\";\n\nexport function OptionsModal() {\n  return (\n    <Modal>\n      <h1>Options</h1>\n      <br />\n      <button\n        onClick={() => {\n          newGame();\n          saveGameData();\n          store.update();\n        }}\n      >\n        Reset All Game Data\n      </button>\n      <button\n        onClick={() => {\n          saveGameData();\n        }}\n      >\n        Save Game Data\n      </button>\n      <button onClick={endRound}>End Round</button>\n\n      <br />\n      <br />\n      <button onClick={closeModal}>Close</button>\n    </Modal>\n  );\n}\n","import { Board } from \"../components/Board\";\nimport { store } from \"../lib/store\";\nimport { spin } from \"../lib/game\";\nimport { loadGameData } from \"../lib/loadGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\nimport { Coin } from \"../config/tiles/misc/icons\";\nimport { GameEvents } from \"../components/GameEvents\";\nimport packageJson from \"../../package.json\";\nimport { PickNewTileModal } from \"./modals/PickNewTileModal\";\nimport { InventoryModal } from \"./modals/InventoryModal\";\nimport { UpgradesModal } from \"./modals/UpgradesModal\";\nimport { IntroModal } from \"./modals/IntroModal\";\nimport { openModal } from \"../actions/modal\";\nimport { TextIcon } from \"../config/tiles/Icon\";\nimport { OptionsModal } from \"./modals/OptionsModal\";\n\nloadGameData();\n\nfunction Header() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  return (\n    <>\n      <div style={{ fontSize: \"3em\" }}>\n        {gameData.totalCoins}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        / {taxPeriod.taxAmount}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        taxes due in {taxPeriod.totalDays - gameData.currentTaxPeriodDay} Days\n      </div>\n      <div style={{ float: \"right\" }}>Tax Period: {gameData.currentTaxPeriod}</div>\n      <div>\n        Saved: {gameData.savedCoins}\n        <TextIcon Icon={Coin} />\n      </div>\n    </>\n  );\n}\n\nfunction Modals() {\n  const { gameData } = store.state;\n\n  switch (gameData.modal) {\n    case \"PickNewTile\":\n      return <PickNewTileModal />;\n    case \"Inventory\":\n      return <InventoryModal />;\n    case \"Upgrades\":\n      return <UpgradesModal />;\n    case \"Options\":\n      return <OptionsModal />;\n  }\n\n  return null;\n}\n\nexport function MainGame() {\n  const { gameData } = store.state;\n\n  return (\n    <>\n      {!gameData.flags.introDismissed && <IntroModal />}\n      <Modals />\n      <div className=\"app\" style={{ display: \"flex\", justifyContent: \"center\", height: \"100%\" }}>\n        <div className=\"version\">Version: {packageJson.version}</div>\n        <div className=\"main-container\">\n          <Header />\n          <div>\n            <br />\n            <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n              <Board\n                boardTiles={gameData.boardTiles}\n                gameTiles={gameData.gameTiles}\n                width={gameData.gridWidth}\n                height={gameData.gridHeight}\n              />\n            </div>\n            <div style={{ fontSize: \"2em\", textAlign: \"center\" }}>\n              Board value {(!!gameData.boardValue && gameData.boardValue) || 0}\n              <TextIcon Icon={Coin} />\n            </div>\n            {!store.state.spinning && (\n              <button onClick={spin} style={{ marginTop: \"0.5em\" }}>\n                Spin\n              </button>\n            )}\n            {gameData.counters.totalRounds > 0 && (\n              <div style={{ marginTop: \"1em\" }}>\n                <button onClick={() => openModal(\"Inventory\")}>Inventory</button>\n                <button onClick={() => openModal(\"Upgrades\")}>Upgrades</button>\n                <button onClick={() => openModal(\"Options\")}>Options</button>\n              </div>\n            )}\n            <br />\n          </div>\n          {gameData.counters.totalRounds > 0 && (\n            <>\n              {!!gameData.events.length && (\n                <div>\n                  <h1>Events</h1>\n                  <GameEvents events={gameData.events} />\n                  <br />\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","import { store } from \"./lib/store\";\nimport { useEffect, useState } from \"react\";\nimport { newGame } from \"./lib/newGame\";\nimport { loadGameData } from \"./lib/loadGameData\";\nimport { MainGame, RoundEnd } from \"./views\";\nimport { TileDetails } from \"./components/TileDetails\";\n\nloadGameData();\n\nfunction SelectedTile() {\n  return (\n    <>\n      {store.state.selectedTile && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: \"0em\",\n            left: \"0em\",\n            zIndex: 1000000,\n            padding: \"1em\",\n            background: \"#333\",\n            boxShadow: \"0em 0em 1em 0em #000\",\n          }}\n        >\n          <TileDetails tile={store.state.selectedTile} />\n          <button\n            onClick={() => {\n              store.state.selectedTile = undefined;\n              store.update();\n            }}\n          >\n            Close\n          </button>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction App() {\n  const update = useState(0)[1];\n\n  // Did mount / unmount\n  useEffect(() => {\n    store._update = update;\n  }, [update]);\n\n  if (!store.state.gameData) {\n    newGame();\n  }\n\n  const { gameData } = store.state;\n\n  let view = null;\n\n  if (gameData.roundEnded) {\n    view = <RoundEnd />;\n  } else {\n    view = <MainGame />;\n  }\n\n  return (\n    <>\n      <SelectedTile />\n      {view}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}