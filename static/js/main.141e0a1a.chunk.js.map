{"version":3,"sources":["config/tiles/rarities.ts","config/tiles/icons/images/key.png","config/tiles/icons/images/chest1.png","config/tiles/icons/images/chest2.png","config/tiles/icons/images/chest3.png","config/tiles/icons/images/chest4.png","config/tiles/icons/images/coal.png","config/tiles/icons/images/coin.png","config/tiles/icons/images/dagger1.png","config/tiles/icons/images/pickaxe.png","config/tiles/icons/images/rock.png","lib/store.ts","config/tiles/icons/Icon.tsx","config/tiles/lib/iterateAdjacentTiles.ts","config/tiles/set1/index.ts","config/tiles/lib/hasCategory.ts","lib/utils.ts","lib/static.ts","lib/saveGameData.ts","config/taxPeriods.ts","lib/game.ts","config/tiles/lib/removeTile.ts","config/tiles/chests/index.tsx","config/tiles/mining/index.tsx","config/tiles/index.ts","lib/createTile.ts","components/Tile.tsx","components/Board.tsx","components/Inventory.tsx","lib/newGame.ts","components/TileDetails.tsx","components/PickNewTile.tsx","components/Upgrades.tsx","lib/loadGameData.ts","lib/newRound.ts","components/GameEvents.tsx","App.tsx","index.tsx"],"names":["rarity","maxRarity","store","state","gameData","spinning","tilesToPick","selectedTile","_update","value","update","Math","random","window","Icon","image","name","tileName","className","src","alt","onClick","tileConfig","getTileConfigByName","createTile","Chest1","chest1","Chest2","chest2","Chest3","chest3","Chest4","chest4","Coal","coal","Coin","coin","Pickaxe","pickaxe","iterateAdjacentTiles","context","callback","adjecentIndexes","getAdjacentIndexes","getTiles","forEach","tileConfigs","id","icon","categories","calculateValue","total","tile","config","dagger1","hasCategory","category","includes","randomInt","min","max","floor","GAME_ID","saveGameData","localData","localStorage","JSON","parse","gameState","stringify","replaceTileConfigs","ownedTiles","deckTiles","gameTiles","saveDate","Date","tiles","taxPeriods","totalDays","taxAmount","findTile","find","addGameTile","newTile","emptyTileIndex","findIndex","emptyTileConfig","splice","push","pickRandomTile","array","tilesAvailable","reduce","acc","length","setInitialGameTiles","i","fillEmptyTiles","gridWidth","gridHeight","spin","boardTiles","availableGameTiles","availableIndex","gameTile","index","indexOf","generateBoard","data","spinValue","resetTiles","totalSpins","interval","setInterval","highlight","clearInterval","totalCoins","boardValue","count","availableTiles","pickedTiles","console","log","getTileChances","chances","chanceTotal","rand","chance","pickTiles","nextTaxPeriodDay","totalAppearances","startIndex","width","height","indexes","isAdjacent","calculateBoardTileValue","originIndex","checkIndex","tileIndexes","map","taxPeriod","currentTaxPeriod","currentTaxPeriodDay","roundEnded","addGameEvent","message","events","uuid","removeTile","removeValue","onRemove","gameTilesIndex","replaceTile","createChestConfig","baseValue","description","key","activated","createMeta","uses","topStat","meta","broken","rock","tilesByName","get","set1","chests","mining","tilesById","Map","tileInstances","error","Error","effects","Tile","showValue","join","Board","style","fontSize","gridTemplateColumns","gridTemplateRows","emptyTileInstance","repeat","split","_","deckIndex","Inventory","onClickTile","addTile","addOwnedTile","tileId","deckTileIds","addDeckTile","newGame","buildDeck","TileDetails","PickNewTile","pickTile","set","upgrades","cost","buy","isComplete","Upgrades","upgrade","updateTileConfigs","newRound","GameEvents","event","Header","loadGameData","App","useState","useEffect","buttons","deckScore","score","calculateDeckScore","packageJson","version","opacity","display","flexDirection","background","toFixed","otherTile","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.141e0a1a.chunk.js","sourcesContent":["export const rarity = {\n  COMMON: 0,\n  UNCOMMON: 1,\n  RARE: 2,\n  LEGENDARY: 3,\n};\n\nexport const maxRarity = rarity.LEGENDARY;\n","export default __webpack_public_path__ + \"static/media/key.0629d73b.png\";","export default __webpack_public_path__ + \"static/media/chest1.b4054229.png\";","export default __webpack_public_path__ + \"static/media/chest2.d4ed67d0.png\";","export default __webpack_public_path__ + \"static/media/chest3.888bf5be.png\";","export default __webpack_public_path__ + \"static/media/chest4.28dffa1b.png\";","export default __webpack_public_path__ + \"static/media/coal.d3a30adc.png\";","export default __webpack_public_path__ + \"static/media/coin.3480412c.png\";","export default __webpack_public_path__ + \"static/media/dagger1.6892c2d5.png\";","export default __webpack_public_path__ + \"static/media/pickaxe.9f91b8f2.png\";","export default __webpack_public_path__ + \"static/media/rock.14a2b8aa.png\";","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport const store = {\n  state: {\n    gameData: (null as unknown) as GameData,\n    spinning: false,\n    tilesToPick: [] as TileInstance[],\n    selectedTile: (null as unknown) as TileInstance | undefined,\n  },\n  _update: (value: number) => {}, // The function that triggers an update\n  update: (): void => {\n    store._update(Math.random());\n  },\n};\n\n(window as any).store = store;\n","import key from \"./images/key.png\";\nimport chest1 from \"./images/chest1.png\";\nimport chest2 from \"./images/chest2.png\";\nimport chest3 from \"./images/chest3.png\";\nimport chest4 from \"./images/chest4.png\";\n\nimport coal from \"./images/coal.png\";\nimport coin from \"./images/coin.png\";\nimport dagger1 from \"./images/dagger1.png\";\n\nimport pickaxe from \"./images/pickaxe.png\";\nimport rock from \"./images/rock.png\";\nimport { store } from \"../../../lib/store\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { getTileConfigByName } from \"..\";\n\nconst empty =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\ninterface Props {\n  image?: any;\n  tileName?: string;\n}\n\nexport function Icon({ image, tileName: name }: Props) {\n  return (\n    <img\n      className=\"icon\"\n      src={image}\n      alt=\"\"\n      onClick={() => {\n        const tileConfig = getTileConfigByName(name || \"\");\n\n        if (tileConfig) {\n          store.state.selectedTile = createTile(tileConfig);\n          store.update();\n        }\n      }}\n    />\n  );\n}\n\nexport const Empty = () => <Icon image={empty} />;\n\nexport const Key = () => <Icon image={key} tileName={\"Key\"} />;\nexport const Chest1 = () => <Icon image={chest1} />;\nexport const Chest2 = () => <Icon image={chest2} />;\nexport const Chest3 = () => <Icon image={chest3} />;\nexport const Chest4 = () => <Icon image={chest4} />;\n\nexport const Coal = () => <Icon image={coal} tileName={\"Coal\"} />;\nexport const Coin = () => <Icon image={coin} />;\nexport const Dagger1 = () => <Icon image={dagger1} />;\n\nexport const Pickaxe = () => <Icon image={pickaxe} tileName={\"Pickaxe\"} />;\nexport const Rock = () => <Icon image={rock} tileName={\"Rock\"} />;\n","import { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function iterateAdjacentTiles(context: TileValueContext, callback: any) {\n  const adjecentIndexes = context.getAdjacentIndexes();\n\n  const tiles = context.getTiles(adjecentIndexes);\n\n  tiles.forEach(callback);\n}\n","import { TileConfig } from \"../../../types/TileConfig\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { Coal, Coin, Dagger1 } from \"../icons/Icon\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { rarity } from \"../rarities\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"48217c09-300c-44b0-803e-19f51346227b\",\n    name: \"Coal\",\n    icon: Coal,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      let total = 1;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (tile.config.name === \"Coal\") {\n          total += 1;\n        }\n      });\n\n      return total;\n    },\n  },\n  {\n    id: \"2f2e6e35-686f-4033-9940-3f66a153c568\",\n    name: \"Dagger\",\n    icon: Dagger1,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n  {\n    id: \"49d24981-a7d1-4407-b121-ed3e45d427bd\",\n    name: \"Coin\",\n    icon: Coin,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { TileInstance } from \"../../../types/TileInstance\";\n\nexport function hasCategory(tile: TileInstance, category: string) {\n  return tile.config.categories.includes(category);\n}\n","export function randomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","export const GAME_ID = \"9c0617fc-daf3-4f9c-943e-073f698ac0b8\";\n","import { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\n\nexport function saveGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  // Simple clone of just the data\n  const gameState = JSON.parse(JSON.stringify(store.state.gameData));\n\n  replaceTileConfigs(gameState.ownedTiles);\n  replaceTileConfigs(gameState.deckTiles);\n  replaceTileConfigs(gameState.gameTiles);\n\n  localData.gameState = gameState;\n  localData.saveDate = new Date();\n\n  localStorage[`${GAME_ID}`] = JSON.stringify(localData);\n}\n\nfunction replaceTileConfigs(tiles: any[]) {\n  for (const tile of tiles) {\n    tile.config = { id: tile.config.id };\n  }\n}\n","export const taxPeriods = [\n  {\n    totalDays: 0, // This will increment on starting a new game\n    taxAmount: 0,\n  },\n  {\n    totalDays: 5,\n    taxAmount: 25,\n  },\n  {\n    totalDays: 6,\n    taxAmount: 50,\n  },\n  {\n    totalDays: 7,\n    taxAmount: 100,\n  },\n  {\n    totalDays: 8,\n    taxAmount: 200,\n  },\n  {\n    totalDays: 9,\n    taxAmount: 400,\n  },\n  {\n    totalDays: 10,\n    taxAmount: 800,\n  },\n];\n","import { emptyTileConfig } from \"../config/tiles\";\nimport { maxRarity, rarity } from \"../config/tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { createTile } from \"./createTile\";\nimport { randomInt } from \"./utils\";\nimport { store } from \"./store\";\nimport { saveGameData } from \"./saveGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\nimport { v4 as uuid } from \"uuid\";\n\nexport function findTile(tiles: TileInstance[], id: string) {\n  return tiles.find((tile) => {\n    return tile.config.id === id;\n  });\n}\n\nexport function addOwnedTile(tileConfig = emptyTileConfig) {\n  const { ownedTiles } = store.state.gameData;\n\n  if (findTile(ownedTiles, tileConfig.id)) {\n    console.log(`Already own tile ${tileConfig.name}`);\n    return;\n  }\n\n  console.log(`Adding owned tile ${tileConfig.name}`);\n\n  const tile = createTile(tileConfig);\n\n  ownedTiles.push(tile);\n}\n\nexport function addDeckTile(tileId?: string) {\n  if (!tileId) {\n    return;\n  }\n\n  const { deckTileIds } = store.state.gameData;\n\n  if (!deckTileIds.includes(tileId)) {\n    deckTileIds.push(tileId);\n  }\n}\nexport function addGameTile(newTile: TileInstance) {\n  const { gameTiles } = store.state.gameData;\n\n  const emptyTileIndex = gameTiles.findIndex((tile) => {\n    return tile.config.id === emptyTileConfig.id;\n  });\n\n  if (emptyTileIndex >= 0) {\n    gameTiles.splice(emptyTileIndex, 1, newTile);\n  } else {\n    gameTiles.push(newTile);\n  }\n}\n\nexport function buildDeck() {\n  const { gameData } = store.state;\n  const { deckTileIds, ownedTiles } = gameData;\n\n  gameData.deckTiles = deckTileIds.map((id) => {\n    return findTile(ownedTiles, id) || createTile(emptyTileConfig);\n  });\n}\n\nexport function ArrayRandomItem<T>(array: T[]) {\n  return array[randomInt(0, array.length - 1)];\n}\n\nexport function pickRandomTile(tiles: TileInstance[], maxRarity: number) {\n  const tilesAvailable = tiles.reduce((acc, tile) => {\n    if (tile.config.rarity <= maxRarity) {\n      acc.push(tile);\n    }\n\n    return acc;\n  }, [] as TileInstance[]);\n\n  return ArrayRandomItem<TileInstance>(tilesAvailable);\n}\n\nexport function setInitialGameTiles() {\n  const { gameData } = store.state;\n  const { deckTiles } = gameData;\n\n  const gameTiles: TileInstance[] = [];\n\n  for (let i = 0; i < 5; i++) {\n    const tile = pickRandomTile(deckTiles, rarity.COMMON);\n    gameTiles.push(createTile(tile.config));\n  }\n\n  gameData.gameTiles = gameTiles;\n\n  fillEmptyTiles();\n}\n\nexport function fillEmptyTiles() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n\n  for (let i = 0; gameTiles.length < gridWidth * gridHeight; i++) {\n    gameTiles.push(createTile(emptyTileConfig));\n  }\n}\n\nexport function generateBoard() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n  const boardTiles = [];\n  const availableGameTiles = [...gameTiles]; // New array\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    // Get a random index\n    const availableIndex = Math.floor(\n      Math.random() * availableGameTiles.length\n    );\n    const gameTile = availableGameTiles[availableIndex];\n    const index = gameTiles.indexOf(gameTile);\n\n    // console.log(index);\n    boardTiles.push(index);\n\n    availableGameTiles.splice(availableIndex, 1);\n  }\n\n  return boardTiles;\n}\n\nexport function resetTiles() {\n  const { gridWidth, gridHeight, gameTiles, boardTiles } = store.state.gameData;\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    const tile = gameTiles[boardTiles[i]];\n    tile.data.spinValue = 0;\n  }\n}\n\nexport function spin() {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight, deckTiles } = gameData;\n\n  gameData.boardTiles = generateBoard();\n\n  resetTiles();\n  processBoard();\n\n  store.state.spinning = true;\n  store.update();\n\n  let index = 0;\n  const interval = setInterval(() => {\n    const { boardTiles, gameTiles } = gameData;\n\n    if (index > 0 && index <= gridWidth * gridHeight) {\n      const lastTile = gameTiles[boardTiles[index - 1]];\n      lastTile.data.highlight = false;\n    }\n\n    if (index > gridWidth * gridHeight) {\n      // Spin finished\n\n      clearInterval(interval);\n\n      store.state.spinning = false;\n      store.state.gameData.totalCoins += store.state.gameData.boardValue;\n      store.state.tilesToPick = pickTiles(deckTiles);\n      store.update();\n\n      nextTaxPeriodDay();\n\n      saveGameData();\n\n      return;\n    }\n\n    if (index < gridWidth * gridHeight) {\n      const tile = gameTiles[boardTiles[index]];\n      tile.data.highlight = true;\n      tile.data.totalAppearances++;\n      tile.data.spinValue = calculateBoardTileValue(tile, index);\n    }\n\n    index++;\n\n    let boardValue = 0;\n\n    for (const boardTilesIndex of boardTiles) {\n      boardValue += gameTiles[boardTilesIndex].data.spinValue;\n    }\n    store.state.gameData.boardValue = boardValue;\n\n    store.update();\n  }, 100);\n}\n\nexport function processBoard() {\n  const { gameTiles } = store.state.gameData;\n\n  // Add to totalSpins\n  gameTiles.forEach((tile) => {\n    tile.data.totalSpins++;\n  });\n}\n\nexport function isAdjacent(\n  originIndex: number,\n  checkIndex: number,\n  width: number,\n  height: number\n) {\n  // Up / Down or out of bounds\n  if (checkIndex < 0 || checkIndex >= width * height) {\n    return false;\n  }\n\n  // Left / Right\n  if (originIndex + 1 === checkIndex || originIndex - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor(originIndex / width)) {\n      return false;\n    }\n  }\n\n  // Down > Left / Right\n  if (\n    originIndex + width + 1 === checkIndex ||\n    originIndex + width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex + width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  // Up > Left / Right\n  if (\n    originIndex - width + 1 === checkIndex ||\n    originIndex - width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex - width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getAdjacentIndexes(\n  startIndex: number,\n  width: number,\n  height: number\n): number[] {\n  const indexes: number[] = [];\n\n  indexes.push(startIndex + width);\n  indexes.push(startIndex - width);\n  indexes.push(startIndex + 1);\n  indexes.push(startIndex - 1);\n\n  indexes.push(startIndex + width - 1);\n  indexes.push(startIndex + width + 1);\n  indexes.push(startIndex - width - 1);\n  indexes.push(startIndex - width + 1);\n\n  for (let i = 7; i >= 0; i--) {\n    if (!isAdjacent(startIndex, indexes[i], width, height)) {\n      indexes.splice(i, 1);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getTiles(tileIndexes: number[]) {\n  const { boardTiles, gameTiles } = store.state.gameData;\n\n  return tileIndexes.map((index) => {\n    return gameTiles[boardTiles[index]];\n  });\n}\n\nexport function calculateBoardTileValue(tile: TileInstance, index: number) {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight } = gameData;\n\n  const context = {\n    tile,\n    gameData,\n    getAdjacentIndexes: () => {\n      return getAdjacentIndexes(index, gridWidth, gridHeight);\n    },\n    getTiles,\n  };\n\n  return tile.config.calculateValue(context);\n}\n\nfunction getTileChances(tiles: TileInstance[]) {\n  const chances: number[] = [];\n  let chanceTotal = 0;\n\n  for (const tile of tiles) {\n    // The higher the rarity, the lower the chance\n    chanceTotal += maxRarity + 1 - tile.config.rarity;\n    chances.push(chanceTotal);\n  }\n\n  return { chances, chanceTotal };\n}\n\nfunction pickTiles(tiles: TileInstance[], count = 3) {\n  const availableTiles = [...tiles];\n  const pickedTiles = [];\n  console.log(\"Picking tiles\");\n  for (let i = 0; i < count; i++) {\n    const { chances, chanceTotal } = getTileChances(availableTiles);\n\n    const rand = randomInt(0, chanceTotal);\n\n    const index = chances.findIndex((chance) => {\n      return chance >= rand;\n    });\n    console.log({\n      chances,\n      chanceTotal,\n      rand,\n      index,\n    });\n    const tile = availableTiles.splice(index, 1)[0];\n\n    if (tile) {\n      pickedTiles.push(createTile(tile.config));\n    }\n\n    // const index = randomInt(0, availableTiles.length - 1);\n    // const tile = availableTiles.splice(index, 1)[0];\n\n    // if (tile) {\n    //   pickedTiles.push(createTile(tile.config));\n    // }\n  }\n\n  return pickedTiles;\n}\n\nexport function nextTaxPeriodDay() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  gameData.currentTaxPeriodDay++;\n\n  if (gameData.currentTaxPeriodDay >= taxPeriod.totalDays) {\n    gameData.currentTaxPeriod++;\n    gameData.currentTaxPeriodDay = 1;\n    gameData.totalCoins -= taxPeriod.taxAmount;\n\n    if (gameData.totalCoins < 0) {\n      gameData.roundEnded = true;\n    }\n  }\n\n  store.update();\n}\n\nexport function addGameEvent({ message = \"\" }: any) {\n  const { gameData } = store.state;\n\n  gameData.events.push({\n    id: uuid(),\n    message,\n  });\n\n  console.log(`GAME EVENT: ${message}`);\n}\n\nexport function calculateDeckScore() {\n  const { gameData } = store.state;\n  let score = 0;\n\n  for (const tile of gameData.deckTiles) {\n    score += tile.config.rarity;\n  }\n\n  return score / gameData.deckTiles.length;\n}\n","import { emptyTileConfig } from \"..\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { addGameTile } from \"../../../lib/game\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function removeTile(tile: TileInstance, context: TileValueContext) {\n  let removeValue;\n\n  if (tile.config.onRemove) {\n    removeValue = tile.config.onRemove(context);\n  }\n\n  const { gameTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n\n  // Default the replacement tile to an empty one\n  let replaceTile = createTile(emptyTileConfig);\n\n  if (removeValue) {\n    let { tiles } = removeValue;\n\n    // Replace the tile with the appropriate value\n    if (tiles?.length) {\n      replaceTile = tiles[0];\n\n      // Add the remaining tiles\n      for (let i = 1; i < tiles.length; i++) {\n        addGameTile(tiles[i]);\n      }\n    }\n\n    // Apply the value\n    if (removeValue.value) {\n      replaceTile.data.spinValue = removeValue.value;\n    }\n  }\n\n  gameTiles[gameTilesIndex] = replaceTile;\n}\n","import { TileConfig } from \"../../../types/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Chest1, Chest2, Chest3, Chest4, Coin, Key } from \"../icons/Icon\";\n\nfunction createChestConfig({ baseValue, removeValue }: any) {\n  return {\n    categories: [\"chest\"],\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives {removeValue} <Coin />\n        </>\n      );\n    },\n    calculateValue: (context: TileValueContext) => {\n      return baseValue;\n    },\n    onRemove: (context: TileValueContext) => {\n      return { value: removeValue };\n    },\n  };\n}\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"2ef31449-bf1d-4cee-8e93-e0665fb9942a\",\n    name: \"Key\",\n    description: () => {\n      return (\n        <>\n          The key unlocks <Chest1 /> <Chest2 /> <Chest3 /> <Chest4 />,\n          destroying both in the process\n        </>\n      );\n    },\n    icon: Key,\n    rarity: rarity.COMMON,\n    categories: [\"key\"],\n    calculateValue: (context: TileValueContext) => {\n      let activated = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (hasCategory(tile, \"chest\")) {\n          // Remove the tile\n          removeTile(tile, context);\n          activated = true;\n        }\n      });\n\n      if (activated) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 1;\n    },\n  },\n  {\n    id: \"834bf40d-0a3d-4e20-83a0-4e3aa233840c\",\n    name: \"Small Chest\",\n    icon: Chest1,\n    rarity: rarity.COMMON,\n    ...createChestConfig({ baseValue: 1, removeValue: 10 }),\n  },\n  {\n    id: \"c87ea7e4-5479-4aa7-9033-0859d191390b\",\n    name: \"Medium Chest\",\n\n    icon: Chest2,\n    rarity: rarity.UNCOMMON,\n    ...createChestConfig({ baseValue: 2, removeValue: 20 }),\n  },\n  {\n    id: \"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1\",\n    name: \"Large Chest\",\n    icon: Chest3,\n    rarity: rarity.RARE,\n    ...createChestConfig({ baseValue: 3, removeValue: 30 }),\n  },\n  {\n    id: \"3422f3a8-bd1a-4549-a9ff-d0ed0621d646\",\n    name: \"Dark Chest\",\n    icon: Chest4,\n    rarity: rarity.LEGENDARY,\n    ...createChestConfig({ baseValue: 4, removeValue: 40 }),\n  },\n];\n\nexport default tileConfigs;\n","import { TileConfig } from \"../../../types/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Coal, Pickaxe, Rock } from \"../icons/Icon\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { tilesByName } from \"..\";\nimport { addGameEvent } from \"../../../lib/game\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"102f6200-dd6b-434f-b486-67ccc425cc4d\",\n    name: \"Pickaxe\",\n    description: () => {\n      return <>Breaks rocks, has 3 uses</>;\n    },\n    icon: Pickaxe,\n    rarity: rarity.COMMON,\n    categories: [\"mining\"],\n    createMeta: () => {\n      return { uses: 3 };\n    },\n    topStat: (tile: TileInstance) => {\n      return tile.meta.uses;\n    },\n    calculateValue: (context: TileValueContext) => {\n      let broken = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (broken) {\n          return;\n        }\n\n        if (hasCategory(tile, \"rock\")) {\n          removeTile(tile, context);\n          console.log(context.tile.meta);\n          context.tile.meta.uses--;\n\n          if (context.tile.meta.uses === 0) {\n            broken = true;\n            addGameEvent({ message: \"A Pickaxe broke\" });\n          }\n        }\n      });\n\n      if (broken) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 1;\n    },\n  },\n  {\n    id: \"89c89fb8-b343-4767-ba9f-78b4586b4ceb\",\n    name: \"Rock\",\n    description: () => {\n      return (\n        <>\n          Broken by <Pickaxe />, gives one of <Coal />\n        </>\n      );\n    },\n    icon: Rock,\n    rarity: rarity.COMMON,\n    categories: [\"rock\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onRemove: (context: TileValueContext) => {\n      const newTile = createTile(tilesByName.get(\"Coal\"));\n\n      addGameEvent({\n        message: `A broken Rock yielded a ${newTile.config.name}`,\n      });\n\n      return { tiles: [newTile] };\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { TileConfig } from \"../../types/TileConfig\";\nimport { rarity } from \"./rarities\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\nimport { Empty } from \"./icons/Icon\";\n\n// Sets\nimport set1 from \"./set1\";\nimport chests from \"./chests\";\nimport mining from \"./mining\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { createTile } from \"../../lib/createTile\";\n\n// An empty tile config\nexport const emptyTileConfig: TileConfig = {\n  id: \"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1\",\n  name: \"Empty\",\n  icon: Empty,\n  rarity: rarity.COMMON,\n  categories: [\"empty\"],\n  calculateValue: (context: TileValueContext) => {\n    return context.tile.data.spinValue || 0;\n  },\n};\n\nconst tileConfigs: TileConfig[] = [\n  ...set1,\n  ...chests,\n  ...mining,\n  emptyTileConfig,\n];\n\nexport default tileConfigs;\nexport const tilesById = new Map<string, TileConfig>();\nexport const tilesByName = new Map<string, TileConfig>();\nexport const tileInstances: TileInstance[] = [];\n\n// Setup the tiles by Id and name\ntileConfigs.forEach((config) => {\n  tilesById.set(config.id, config);\n  tilesByName.set(config.name, config);\n  tileInstances.push(createTile(config));\n});\n\nexport function getTileConfigByName(name: string) {\n  const tileConfig = tilesByName.get(name);\n\n  if (!tileConfig) {\n    console.error(new Error(`Tile name \"${name}\" not found`));\n  }\n\n  return tileConfig;\n}\n","import { TileConfig } from \"../types/TileConfig\";\nimport { TileData, TileInstance, TileMeta } from \"../types/TileInstance\";\nimport { v4 as uuid } from \"uuid\";\nimport { emptyTileConfig } from \"../config/tiles\";\n\nexport function createTileData() {\n  const tileData: TileData = {\n    spinValue: 0,\n    totalSpins: 0,\n    totalAppearances: 0,\n    highlight: false,\n  };\n\n  return tileData;\n}\n\nexport function createTile(tileConfig?: TileConfig, meta?: TileMeta) {\n  if (!tileConfig) {\n    console.error(\n      new Error(\n        \"Undefined tile config for creating a tile. Adding an empty tile.\"\n      )\n    );\n    tileConfig = emptyTileConfig;\n  }\n\n  if (!meta && tileConfig.createMeta) {\n    meta = tileConfig.createMeta();\n  }\n\n  const tile: TileInstance = {\n    id: uuid(),\n    config: tileConfig,\n    effects: {},\n    data: createTileData(),\n    meta: meta ?? {},\n  };\n\n  return tile;\n}\n","import { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile: TileInstance;\n  showValue?: boolean;\n  onClick?: (tile: TileInstance) => void;\n}\n\nexport function Tile({ tile, showValue, onClick }: Props) {\n  const className = [\"tile\"];\n\n  if (tile.data.highlight) {\n    className.push(\"highlight\");\n  }\n\n  function clickedTile() {\n    store.state.selectedTile = tile;\n    store.update();\n\n    if (onClick) {\n      onClick(tile);\n    }\n  }\n\n  return (\n    <div className={className.join(\" \")} onClick={clickedTile}>\n      {!!tile.config.topStat && showValue && (\n        <div className=\"top-stat\">{tile.config.topStat(tile)}</div>\n      )}\n      {!!tile.data.spinValue && showValue && (\n        <div className=\"value\">{tile.data.spinValue}</div>\n      )}\n      <tile.config.icon />\n    </div>\n  );\n}\n","import { createTile } from \"../lib/createTile\";\nimport { emptyTileConfig } from \"../config/tiles\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  boardTiles: number[];\n  gameTiles: TileInstance[];\n  width: number;\n  height: number;\n}\n\nexport function Board({ boardTiles, gameTiles, width, height }: Props) {\n  const style = {\n    fontSize: \"1.5em\",\n    gridTemplateColumns: `repeat(${width}, 5em)`,\n    gridTemplateRows: `repeat(${height}, 5em)`,\n  };\n\n  if (boardTiles.length === 0) {\n    const emptyTileInstance = createTile(emptyTileConfig);\n\n    return (\n      <div className=\"board\" style={style}>\n        {\" \"\n          .repeat(width * height)\n          .split(\"\")\n          .map((_, index) => {\n            return <Tile key={index} tile={emptyTileInstance} />;\n          })}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"board\" style={style}>\n      {boardTiles.map((deckIndex, index) => {\n        const tile = gameTiles[deckIndex];\n        return <Tile key={tile.id} tile={tile} showValue onClick={() => {}} />;\n      })}\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  tiles: TileInstance[];\n  onClickTile?: (tile: TileInstance) => void;\n}\n\nexport function Inventory({ tiles, onClickTile }: Props) {\n  return (\n    <div className=\"inventory\">\n      {tiles.map((tile) => (\n        <Tile key={tile.id} tile={tile} onClick={onClickTile} />\n      ))}\n    </div>\n  );\n}\n","import { getTileConfigByName } from \"../config/tiles\";\nimport { GameData } from \"../types/GameData\";\nimport {\n  addDeckTile,\n  addOwnedTile,\n  buildDeck,\n  nextTaxPeriodDay,\n  setInitialGameTiles,\n} from \"./game\";\nimport { store } from \"./store\";\n\nfunction addTile(name: string) {\n  const tileConfig = getTileConfigByName(name);\n  addOwnedTile(tileConfig);\n  addDeckTile(tileConfig?.id);\n}\n\nexport function newGame() {\n  const gameData: GameData = {\n    boardTiles: [],\n    ownedTiles: [],\n    deckTileIds: [],\n    deckTiles: [],\n    gameTiles: [],\n    gridWidth: 3,\n    gridHeight: 3,\n    boardValue: 0,\n    totalCoins: 0,\n    currentTaxPeriod: 0,\n    currentTaxPeriodDay: 0,\n    roundEnded: false,\n    events: [],\n  };\n\n  store.state.gameData = gameData;\n\n  addTile(\"Coal\");\n  addTile(\"Dagger\");\n  addTile(\"Pickaxe\");\n  addTile(\"Rock\");\n  // addTile(\"Key\");\n  // addTile(\"Small Chest\");\n  // addTile(\"Medium Chest\");\n\n  buildDeck();\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n}\n","import { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile?: TileInstance;\n  onClick?: any;\n}\n\nexport function TileDetails({ tile, onClick }: Props) {\n  if (!tile) {\n    return null;\n  }\n\n  const { config } = tile;\n\n  return (\n    <div className=\"tile-details\" onClick={onClick}>\n      <div className=\"name\">{config.name}</div>\n      <tile.config.icon />\n      <div className=\"description\">\n        {config.description && config.description()}\n      </div>\n    </div>\n  );\n}\n","import { addGameTile } from \"../lib/game\";\nimport { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { TileDetails } from \"./TileDetails\";\n\nexport function PickNewTile() {\n  const { tilesToPick } = store.state;\n\n  function pickTile(tile?: TileInstance) {\n    if (tile) {\n      addGameTile(tile);\n    }\n\n    store.state.tilesToPick = [];\n    store.state.gameData.boardTiles = [];\n    store.update();\n  }\n\n  return (\n    <div className=\"pick-a-tile\">\n      {tilesToPick.map((tile) => (\n        <TileDetails\n          key={tile.id}\n          tile={tile}\n          onClick={() => {\n            pickTile(tile);\n          }}\n        />\n      ))}\n      <button onClick={() => pickTile()}>Skip</button>\n    </div>\n  );\n}\n","import { fillEmptyTiles } from \"../lib/game\";\nimport { store } from \"../lib/store\";\n\nconst upgrades = [\n  {\n    id: \"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d\",\n    name: \"Board Width\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridWidth += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"1e0ab330-8ec9-4e41-933d-75251ffa5ee5\",\n    name: \"Board Height\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridHeight += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"0245c559-dd55-4f93-a626-53cc06b17d42\",\n    name: \"XYZ\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {},\n    isComplete: () => {\n      return false;\n    },\n  },\n];\n\nexport function Upgrades() {\n  return (\n    <div className=\"upgrades\">\n      {upgrades.map((upgrade) => {\n        return (\n          <div key={upgrade.id}>\n            <div>{upgrade.name}</div>\n            <div>\n              <button onClick={upgrade.buy}>Buy</button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\nimport tileConfigs, { emptyTileConfig } from \"../config/tiles\";\n\nexport function loadGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  if (localData?.gameState) {\n    // Must update configs with references to the actual objects\n    const gameState: GameData = localData.gameState;\n\n    updateTileConfigs(gameState.ownedTiles);\n    updateTileConfigs(gameState.deckTiles);\n    updateTileConfigs(gameState.gameTiles);\n\n    store.state.gameData = localData.gameState;\n  }\n}\n\nfunction updateTileConfigs(tiles: TileInstance[]) {\n  for (const tile of tiles) {\n    tile.config =\n      tileConfigs.find((tileConfig) => {\n        return tileConfig.id === tile.config.id;\n      }) || emptyTileConfig;\n  }\n}\n","import { nextTaxPeriodDay, setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\n\nexport function newRound() {\n  const { gameData } = store.state;\n\n  gameData.currentTaxPeriod = 0;\n  gameData.currentTaxPeriodDay = 0;\n  gameData.roundEnded = false;\n  gameData.boardTiles = [];\n  gameData.totalCoins = 0;\n\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n\n  store.state.tilesToPick = [];\n\n  store.update();\n}\n","import { GameEvent } from \"../types/GameData\";\n\ninterface Props {\n  events: GameEvent[];\n}\n\nexport function GameEvents({ events }: Props) {\n  return (\n    <div className=\"game-events\">\n      {events.map((event) => (\n        <div key={event.id} className=\"event\">\n          <div className=\"message\">{event.message}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { Board } from \"./components/Board\";\nimport { Inventory } from \"./components/Inventory\";\nimport { store } from \"./lib/store\";\nimport { useEffect, useState } from \"react\";\nimport { newGame } from \"./lib/newGame\";\nimport { calculateDeckScore, spin } from \"./lib/game\";\nimport { PickNewTile } from \"./components/PickNewTile\";\nimport { TileDetails } from \"./components/TileDetails\";\nimport { Upgrades } from \"./components/Upgrades\";\nimport { loadGameData } from \"./lib/loadGameData\";\nimport { taxPeriods } from \"./config/taxPeriods\";\nimport { Coin } from \"./config/tiles/icons/Icon\";\nimport { newRound } from \"./lib/newRound\";\nimport { GameEvents } from \"./components/GameEvents\";\nimport { saveGameData } from \"./lib/saveGameData\";\nimport { tileInstances } from \"./config/tiles\";\nimport { createTile } from \"./lib/createTile\";\nimport packageJson from \"../package.json\";\n\nloadGameData();\n\nfunction Header() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  return (\n    <>\n      <div style={{ fontSize: \"3em\" }}>\n        {gameData.totalCoins}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        / {taxPeriod.taxAmount}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        taxes due in {taxPeriod.totalDays - gameData.currentTaxPeriodDay} Days\n      </div>\n      <div style={{ fontSize: \"3em\" }}></div>\n    </>\n  );\n}\n\nfunction App() {\n  const update = useState(0)[1];\n\n  // Did mount / unmount\n  useEffect(() => {\n    store._update = update;\n  }, [update]);\n\n  if (!store.state.gameData) {\n    newGame();\n  }\n\n  const { gameData, tilesToPick } = store.state;\n\n  let buttons = null;\n  if (!store.state.spinning && !tilesToPick.length) {\n    buttons = (\n      <>\n        <button onClick={spin}>Spin</button>\n      </>\n    );\n  }\n\n  if (gameData.roundEnded) {\n    return (\n      <div>\n        THE ROUND IS OVER\n        <button onClick={newRound}>Next round</button>\n      </div>\n    );\n  }\n\n  const deckScore = calculateDeckScore();\n\n  return (\n    <div className=\"app\">\n      <div>Version: {packageJson.version}</div>\n      <Header />\n      {!!tilesToPick.length && (\n        <div>\n          <h1>Pick New Tile</h1>\n          <PickNewTile />\n        </div>\n      )}\n      <div style={{ opacity: tilesToPick.length ? 0.5 : 1 }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div>\n            <h1>Board</h1>\n            <Board\n              boardTiles={gameData.boardTiles}\n              gameTiles={gameData.gameTiles}\n              width={gameData.gridWidth}\n              height={gameData.gridHeight}\n            />\n            {buttons}\n            <div style={{ fontSize: \"2em\" }}>\n              Board value:{\" \"}\n              <b>{(!!gameData.boardValue && gameData.boardValue) || 0}</b>\n            </div>\n          </div>\n          <div style={{ width: \"1em\" }}></div>\n          <div>\n            <h1>Selected Tile</h1>\n            <TileDetails tile={store.state.selectedTile} />\n          </div>\n          <div style={{ width: \"1em\" }}></div>\n          <div>\n            <h1>Events</h1>\n            <GameEvents events={gameData.events} />\n          </div>\n        </div>\n        <div>\n          <h1>Game Tiles</h1>\n          <Inventory tiles={gameData.gameTiles} />\n        </div>\n        <div>\n          <h1>Deck</h1>\n          <div style={{ background: deckScore > 1 ? \"red\" : \"none\" }}>\n            Deck Score: {deckScore.toFixed(2)}\n          </div>\n          <Inventory\n            tiles={gameData.deckTiles}\n            onClickTile={(tile) => {\n              const index = gameData.deckTiles.indexOf(tile);\n\n              if (index >= 0) {\n                gameData.deckTiles.splice(index, 1);\n              }\n            }}\n          />\n        </div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory\n            tiles={gameData.ownedTiles}\n            onClickTile={(tile) => {\n              const hasTile = gameData.deckTiles.find((otherTile) => {\n                return otherTile.config.id === tile.config.id;\n              });\n\n              if (!hasTile) {\n                gameData.deckTiles.push(tile);\n              }\n            }}\n          />\n        </div>\n        <div>\n          <h1>All Tiles</h1>\n          <Inventory\n            tiles={tileInstances}\n            onClickTile={(tile) => {\n              const hasTile = gameData.ownedTiles.find((otherTile) => {\n                return otherTile.config.id === tile.config.id;\n              });\n\n              if (!hasTile) {\n                gameData.ownedTiles.push(createTile(tile.config));\n              }\n            }}\n          />\n        </div>\n        <div>\n          <h1>Upgrades</h1>\n          <Upgrades />\n        </div>\n        <button\n          onClick={() => {\n            newGame();\n            store.update();\n          }}\n        >\n          Reset all game data\n        </button>\n        <button\n          onClick={() => {\n            saveGameData();\n          }}\n        >\n          Save game data\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}