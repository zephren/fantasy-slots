(this["webpackJsonpfantasy-slots"]=this["webpackJsonpfantasy-slots"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"name":"fantasy-slots","version":"0.1.10","private":true,"dependencies":{"gh-pages":"^3.1.0","node-sass":"^5.0.0","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.3","typescript":"^4.2.2","uuid":"^8.3.2","web-vitals":"^1.1.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.7.3","@types/jest":"^26.0.20","@types/node":"^12.20.4","@types/react":"^17.0.2","@types/react-dom":"^17.0.1","@types/uuid":"^8.3.0"},"homepage":"https://zephren.github.io/fantasy-slots"}')},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),c=a(8),r=a.n(c),s=(a(16),{state:{gameData:null,spinning:!1,selectedTile:null},_update:function(e){},update:function(){s._update(Math.random())}});window.store=s;var o=a(5),l=a(1),d=a(9),u=function e(t){Object(d.a)(this,e),this.id="",this.name="",this.icon=void 0,this.rarity=0,this.categories=[],this.baseValue=0,this.description=void 0,this.calculateValue=function(e){return 0},this.onRemove=void 0,this.createMeta=void 0,this.topStat=void 0,this.name="",Object.assign(this,t)},f={COMMON:0,UNCOMMON:1,RARE:2,LEGENDARY:3},b=["Common","Uncommon","Rare","Legendary"],j=f.LEGENDARY,h=a(19);function m(e,t){var a;return e||(console.error(new Error("Undefined tile config for creating a tile. Adding an empty tile.")),e=Je),!t&&e.createMeta&&(t=e.createMeta()),{id:Object(h.a)(),config:e,effects:{},data:{spinValue:0,totalSpins:0,totalAppearances:0,highlight:!1},meta:null!==(a=t)&&void 0!==a?a:{}}}var g=a(0);function O(e){var t=e.image,a=e.config;return Object(g.jsx)("img",{className:"icon",src:t,alt:"",onClick:function(){a&&(s.state.selectedTile=m(a),s.update())}})}function v(e){var t=e.Icon;return Object(g.jsx)("span",{className:"text-icon",children:Object(g.jsx)(t,{})})}var p=new Map;function x(e,t){var a=p.get(t.name);return a||(a=Object(g.jsx)(O,{image:e,config:t})),a}var y=a.p+"static/media/coin.3480412c.png",T=function(){return x(y,ze.Coin)},k={Coin:new u({id:"d9c7f23b-a3e9-4b4e-af69-4a026998d40a",icon:T,rarity:f.COMMON,categories:["coin"],baseValue:1})};function C(e,t){var a=e.getAdjacentIndexes();return e.getTiles(a).map(t)}function w(e,t){return e.config.categories.includes(t)}var M=a(2);function D(e,t){return Math.floor(Math.random()*(t-e+1))+e}var N="9c0617fc-daf3-4f9c-943e-073f698ac0b8";function A(){var e=localStorage["".concat(N)];e=e?JSON.parse(e):{};var t=JSON.parse(JSON.stringify(s.state.gameData));V(t.ownedTiles),V(t.deckTiles),V(t.gameTiles),V(t.tilesToPick),e.gameState=t,e.saveDate=new Date,localStorage["".concat(N)]=JSON.stringify(e)}function V(e){var t,a=Object(M.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.config={id:n.config.id}}}catch(i){a.e(i)}finally{a.f()}}var _=[{totalDays:0,taxAmount:0},{totalDays:5,taxAmount:25},{totalDays:6,taxAmount:50},{totalDays:7,taxAmount:100},{totalDays:8,taxAmount:200},{totalDays:9,taxAmount:400},{totalDays:10,taxAmount:800}];function P(){var e=s.state.gameData;e.roundEnded=!0,e.savedCoins+=e.totalCoins,e.lastTotalCoins=e.totalCoins,e.tilesToPick=[],s.update(),A()}function S(e,t){return e.find((function(e){return e.config.id===t}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=s.state.gameData.ownedTiles;if(S(t,e.id))console.log("Already own tile ".concat(e.name));else{console.log("Adding owned tile ".concat(e.name));var a=m(e);t.push(a)}}function R(e){var t=s.state.gameData.gameTiles,a=t.findIndex((function(e){return e.config.id===Je.id}));a>=0?t.splice(a,1,e):t.push(e)}function I(e,t){var a,n=e.reduce((function(e,a){return a.config.rarity<=t&&e.push(a),e}),[]);return(a=n)[D(0,a.length-1)]}function B(){for(var e=s.state.gameData,t=e.deckTiles,a=[],n=0;n<5;n++){var i=I(t,f.COMMON);a.push(m(i.config))}e.gameTiles=a,H()}function H(){for(var e=s.state.gameData,t=e.gameTiles,a=e.gridWidth,n=e.gridHeight,i=0;t.length<a*n;i++)t.push(m(Je))}function U(){var e=s.state.gameData,t=e.gridWidth,a=e.gridHeight,n=e.deckTiles;e.boardTiles=function(){for(var e=s.state.gameData,t=e.gameTiles,a=e.gridWidth,n=e.gridHeight,i=[],c=Object(o.a)(t),r=0;r<a*n;r++){var l=Math.floor(Math.random()*c.length),d=c[l],u=t.indexOf(d);i.push(u),c.splice(l,1)}return i}(),function(){for(var e=s.state.gameData,t=e.gridWidth,a=e.gridHeight,n=e.gameTiles,i=e.boardTiles,c=0;c<t*a;c++)n[i[c]].data.spinValue=0}(),s.state.gameData.gameTiles.forEach((function(e){e.data.totalSpins++})),s.state.spinning=!0,s.update();var i=0,c=setInterval((function(){var r=e.boardTiles,l=e.gameTiles;i>0&&i<=t*a&&(l[r[i-1]].data.highlight=!1);if(i>t*a)return clearInterval(c),s.state.spinning=!1,s.state.gameData.totalCoins+=s.state.gameData.boardValue,s.state.gameData.tilesToPick=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=Object(o.a)(e),n=[],i=function(e){var t=W(a),i=t.chances,c=D(0,t.chanceTotal),r=i.findIndex((function(e){return e>=c})),s=a.splice(r,1)[0];s&&n.push(m(s.config))},c=0;c<t;c++)i(c);return n}(n),s.state.gameData.modal="PickNewTile",s.update(),J(),void A();if(i<t*a){var d=l[r[i]];d.data.highlight=!0,d.data.totalAppearances++,d.data.spinValue=F(d,i)}i++;var u,f=0,b=Object(M.a)(r);try{for(b.s();!(u=b.n()).done;){f+=l[u.value].data.spinValue}}catch(j){b.e(j)}finally{b.f()}s.state.gameData.boardValue=f,s.update()}),100)}function G(e,t,a,n){return!(t<0||t>=a*n)&&((e+1!==t&&e-1!==t||Math.floor(t/a)===Math.floor(e/a))&&((e+a+1!==t&&e+a-1!==t||Math.floor(t/a)===Math.floor((e+a)/a))&&(e-a+1!==t&&e-a-1!==t||Math.floor(t/a)===Math.floor((e-a)/a))))}function L(e){var t=s.state.gameData,a=t.boardTiles,n=t.gameTiles;return e.map((function(e){return n[a[e]]}))}function F(e,t){if(!e.config.calculateValue)return e.config.baseValue;var a=s.state.gameData,n=a.gridWidth,i=a.gridHeight,c={tile:e,gameData:a,getAdjacentIndexes:function(){return function(e,t,a){var n=[];n.push(e+t),n.push(e-t),n.push(e+1),n.push(e-1),n.push(e+t-1),n.push(e+t+1),n.push(e-t-1),n.push(e-t+1);for(var i=7;i>=0;i--)G(e,n[i],t,a)||n.splice(i,1);return n}(t,n,i)},getTiles:L};return e.config.calculateValue(c)+e.config.baseValue}function W(e){var t,a=[],n=0,i=Object(M.a)(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;n+=j+1-c.config.rarity,a.push(n)}}catch(r){i.e(r)}finally{i.f()}return{chances:a,chanceTotal:n}}function J(){var e=s.state.gameData,t=_[e.currentTaxPeriod];if(e.currentTaxPeriodDay++,e.currentTaxPeriodDay>=t.totalDays){e.currentTaxPeriod++,e.currentTaxPeriodDay=1;var a=e.totalCoins-t.taxAmount;a<0&&P(),e.totalCoins=a}s.update()}function z(e){var t=e.message,a=void 0===t?"":t;s.state.gameData.events.push({id:Object(h.a)(),message:a}),console.log("GAME EVENT: ".concat(a))}function Y(){var e,t=s.state.gameData,a=0,n=Object(M.a)(t.deckTiles);try{for(n.s();!(e=n.n()).done;){a+=e.value.config.rarity}}catch(i){n.e(i)}finally{n.f()}return a/t.deckTiles.length}function K(e,t){var a;e.config.onRemove&&(a=e.config.onRemove(t));var n=t.gameData.gameTiles,i=n.indexOf(e),c=m(Je);if(a){var r=a.tiles;if(null===r||void 0===r?void 0:r.length){c=r[0];for(var s=1;s<r.length;s++)R(r[s])}a.value&&(c.data.spinValue=a.value)}n[i]=c}var Q=a.p+"static/media/key.0629d73b.png",X=a.p+"static/media/chest1.b4054229.png",Z=a.p+"static/media/chest2.d4ed67d0.png",q=a.p+"static/media/chest3.888bf5be.png",$=a.p+"static/media/chest4.28dffa1b.png",ee=function(){return x(X,ze.Small_Chest)},te=function(){return x(Z,ze.Medium_Chest)},ae=function(){return x(q,ze.Large_Chest)},ne=function(){return x($,ze.Dark_Chest)};function ie(e){var t=e.baseValue,a=e.removeValue;return{categories:["chest"],name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["Unlocked by the key, gives ",a," ",Object(g.jsx)(T,{})]})},baseValue:t,onRemove:function(e){return{value:a}}}}var ce={Key:new u({id:"2ef31449-bf1d-4cee-8e93-e0665fb9942a",name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["The key unlocks ",Object(g.jsx)(ee,{})," ",Object(g.jsx)(te,{})," ",Object(g.jsx)(ae,{})," ",Object(g.jsx)(ne,{}),", destroying both in the process"]})},icon:function(){return x(Q,ze.Key)},rarity:f.COMMON,categories:["key"],baseValue:1,calculateValue:function(e){var t=!1;return C(e,(function(a){w(a,"chest")&&(K(a,e),t=!0)})),t&&K(e.tile,e),0}}),Small_Chest:new u(Object(l.a)({id:"834bf40d-0a3d-4e20-83a0-4e3aa233840c",icon:ee,rarity:f.COMMON},ie({baseValue:1,removeValue:10}))),Medium_Chest:new u(Object(l.a)({id:"c87ea7e4-5479-4aa7-9033-0859d191390b",icon:te,rarity:f.UNCOMMON},ie({baseValue:2,removeValue:20}))),Large_Chest:new u(Object(l.a)({id:"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1",icon:ae,rarity:f.RARE},ie({baseValue:3,removeValue:30}))),Dark_Chest:new u(Object(l.a)({id:"3422f3a8-bd1a-4549-a9ff-d0ed0621d646",icon:ne,rarity:f.LEGENDARY},ie({baseValue:4,removeValue:40})))},re=a.p+"static/media/pickaxe.9f91b8f2.png",se=a.p+"static/media/rock.cffc8f04.png",oe=a.p+"static/media/oreCoal.d3a30adc.png",le=a.p+"static/media/oreCopper.ef951831.png",de=a.p+"static/media/oreGold.0a427c5c.png",ue=a.p+"static/media/oreIron.45ad7af5.png",fe=a.p+"static/media/oreMithril.4a29a93f.png",be=a.p+"static/media/oreSilver.3e3113ee.png",je=function(){return x(re,ze.Pickaxe)},he=function(){return x(oe,ze.Coal)},me=function(){return x(le,ze.Copper_Ore)},ge=function(){return x(ue,ze.Iron_Ore)},Oe=function(){return x(be,ze.Silver_Ore)},ve={Pickaxe:new u({id:"102f6200-dd6b-434f-b486-67ccc425cc4d",name:"",description:function(){return Object(g.jsx)(g.Fragment,{children:"Breaks rocks, has 3 uses"})},icon:je,rarity:f.COMMON,categories:["mining"],baseValue:1,createMeta:function(){return{uses:3}},topStat:function(e){return e.meta.uses},calculateValue:function(e){var t=!1;return C(e,(function(a){t||w(a,"rock")&&(K(a,e),console.log(e.tile.meta),e.tile.meta.uses--,0===e.tile.meta.uses&&(t=!0,z({message:"A Pickaxe broke"})))})),t&&K(e.tile,e),0}}),Rock:new u({id:"89c89fb8-b343-4767-ba9f-78b4586b4ceb",name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["Broken by ",Object(g.jsx)(je,{}),", gives one of ",Object(g.jsx)(he,{})," ",Object(g.jsx)(me,{})," ",Object(g.jsx)(ge,{})," ",Object(g.jsx)(Oe,{})]})},icon:function(){return x(se,ze.Rock)},rarity:f.COMMON,categories:["rock"],baseValue:1,onRemove:function(e){var t=m(ze.Coal);return z({message:"A broken Rock yielded a ".concat(t.config.name)}),{tiles:[t]}}}),Coal:new u({id:"48217c09-300c-44b0-803e-19f51346227b",icon:he,rarity:f.COMMON,categories:[],baseValue:1,calculateValue:function(e){return 0}}),Copper_Ore:new u({id:"35e8e354-dcfb-430c-9401-0035b775f00f",icon:me,rarity:f.COMMON,categories:[],baseValue:1}),Iron_Ore:new u({id:"8df321a7-a16d-485e-9b41-aebe784350db",icon:ge,rarity:f.COMMON,categories:[],baseValue:1}),Silver_Ore:new u({id:"7fa9e325-ca81-48cd-a7d5-8b1203354218",icon:Oe,rarity:f.UNCOMMON,categories:[],baseValue:1}),Gold_Ore:new u({id:"5c65694c-aaea-4cf7-9387-ec81765ecaa9",icon:function(){return x(de,ze.Gold_Ore)},rarity:f.UNCOMMON,categories:[],baseValue:1}),Mithril_Ore:new u({id:"adf11359-db8e-4afc-8fe3-1688a3f4fb31",icon:function(){return x(fe,ze.Mithril_Ore)},rarity:f.UNCOMMON,categories:[],baseValue:1})},pe="small-health-potion",xe="medium-health-potion",ye="large-health-potion",Te="small-mana-potion",ke="medium-mana-potion",Ce="large-mana-potion",we="small-elixer",Me="medium-elixer",De="large-elixer",Ne=a.p+"static/media/elixer1.126eb52b.png",Ae=a.p+"static/media/elixer2.f677e6cf.png",Ve=a.p+"static/media/elixer3.ebf689aa.png",_e=a.p+"static/media/healthPotion1.2cc42067.png",Pe=a.p+"static/media/healthPotion2.8e645ab4.png",Se=a.p+"static/media/healthPotion3.e43eb7ea.png",Ee=a.p+"static/media/manaPotion1.03ef4a80.png",Re=a.p+"static/media/manaPotion2.f6d761fd.png",Ie=a.p+"static/media/manaPotion3.c6a0b4ff.png";function Be(e,t){return C(e,(function(e){if(w(e,t))return e})).reduce((function(e,t){return t&&e.push(t),e}),[])}function He(e,t,a){var n=a.gameData,i=n.gameTiles,c=n.boardTiles,r=i.indexOf(e),s=c.indexOf(r);i[r]=t,t.data.spinValue=F(t,s)}function Ue(e,t){var a=Be(t,e);return!!a.length&&(K(a[0],t),He(t.tile,m(Le.Small_Elixer),t),!0)}function Ge(e,t,a){var n=Be(a,e);return n.length>=2&&(K(n[0],a),K(n[1],a),He(a.tile,m(t),a),!0)}var Le={Small_Health_Potion:new u({id:"e77dc97d-8d44-45e4-bbad-deb79574092d",icon:function(){return x(_e,ze.Small_Health_Potion)},rarity:f.COMMON,categories:[pe],baseValue:1,calculateValue:function(e){return Ue(Te,e)||Ge(pe,Le.Medium_Health_Potion,e),0}}),Medium_Health_Potion:new u({id:"c6d67a75-f151-4503-b04d-2fb535c06c92",icon:function(){return x(Pe,ze.Medium_Health_Potion)},rarity:f.UNCOMMON,categories:[xe],baseValue:2}),Large_Health_Potion:new u({id:"227d75ba-7310-4aed-8f39-cab15fb90e20",icon:function(){return x(Se,ze.Large_Health_Potion)},rarity:f.RARE,categories:[ye],baseValue:3}),Small_Mana_Potion:new u({id:"d587eba7-246e-46c7-bd55-2f32b0093cf8",icon:function(){return x(Ee,ze.Small_Mana_Potion)},rarity:f.COMMON,categories:[Te],baseValue:1,calculateValue:function(e){return Ue(pe,e)||Ge(Te,Le.Medium_Mana_Potion,e),0}}),Medium_Mana_Potion:new u({id:"6c067c0f-eefb-43ce-8f81-0aabd19cacc1",icon:function(){return x(Re,ze.Medium_Mana_Potion)},rarity:f.UNCOMMON,categories:[ke],baseValue:2}),Large_Mana_Potion:new u({id:"cf9a1a58-c4ee-4284-a504-fe442c34a8f0",icon:function(){return x(Ie,ze.Large_Mana_Potion)},rarity:f.RARE,categories:[Ce],baseValue:3}),Small_Elixer:new u({id:"93a94d4e-7a9d-4d1a-9f8a-3b1586530ca0",icon:function(){return x(Ne,ze.Small_Elixer)},rarity:f.RARE,categories:[we],baseValue:5,calculateValue:function(e){return Ge(we,Le.Medium_Elixer,e),0}}),Medium_Elixer:new u({id:"1fb94f1d-880e-41eb-9a29-f14700a22928",icon:function(){return x(Ae,ze.Medium_Elixer)},rarity:f.RARE,categories:[Me],baseValue:10}),Large_Elixer:new u({id:"3e5d71cf-0f07-4c87-a76b-b269172b0a17",icon:function(){return x(Ve,ze.Large_Elixer)},rarity:f.LEGENDARY,categories:[De],baseValue:10})},Fe=Le,We={Empty:new u({id:"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1",name:"",icon:function(){return x("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ze.Empty)},rarity:f.COMMON,categories:["empty"],calculateValue:function(e){return e.tile.data.spinValue||0}})},Je=We.Empty,ze=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},We),k),ve),Fe),ce);for(var Ye in ze){ze[Ye].name=Ye.replaceAll("_"," ")}var Ke=Object(o.a)(Object.values(ze)),Qe=Ke,Xe=new Map,Ze=[];function qe(e){var t,a,n,i,c,r,s,o,l,d,u,f,b,j,h,m,g,O,v,p,x=e;x.superUser=null!==(t=x.superUser)&&void 0!==t&&t,x.boardTiles=null!==(a=x.boardTiles)&&void 0!==a?a:[],x.ownedTiles=null!==(n=x.ownedTiles)&&void 0!==n?n:[],x.deckTileIds=null!==(i=x.deckTileIds)&&void 0!==i?i:[],x.deckTiles=null!==(c=x.deckTiles)&&void 0!==c?c:[],x.gameTiles=null!==(r=x.gameTiles)&&void 0!==r?r:[],x.tilesToPick=null!==(s=x.tilesToPick)&&void 0!==s?s:[],x.gridWidth=null!==(o=x.gridWidth)&&void 0!==o?o:3,x.gridHeight=null!==(l=x.gridHeight)&&void 0!==l?l:3,x.boardValue=null!==(d=x.boardValue)&&void 0!==d?d:0,x.totalCoins=null!==(u=x.totalCoins)&&void 0!==u?u:0,x.savedCoins=null!==(f=x.savedCoins)&&void 0!==f?f:0,x.lastTotalCoins=null!==(b=x.lastTotalCoins)&&void 0!==b?b:0,x.currentTaxPeriod=null!==(j=x.currentTaxPeriod)&&void 0!==j?j:0,x.currentTaxPeriodDay=null!==(h=x.currentTaxPeriodDay)&&void 0!==h?h:0,x.roundEnded=null!==(m=x.roundEnded)&&void 0!==m&&m,x.events=null!==(g=x.events)&&void 0!==g?g:[],x.modal=null!==(O=x.modal)&&void 0!==O?O:"",x.flags||(x.flags={}),x.counters||(x.counters={});var y=x.counters;return y.totalSpins=null!==(v=y.totalSpins)&&void 0!==v?v:0,y.totalRounds=null!==(p=y.totalRounds)&&void 0!==p?p:0,x}function $e(e){var t=function(e){var t=ze[e];return t||console.error(new Error('Tile name "'.concat(e,'" not found'))),t}(e);E(t),function(e){if(e){var t=s.state.gameData.deckTileIds;t.includes(e)||t.push(e)}}(null===t||void 0===t?void 0:t.id)}function et(){var e=qe({});s.state.gameData=e,s.state.gameData.tilesToPick=[],$e("Coal"),$e("Pickaxe"),$e("Rock"),function(){var e=s.state.gameData,t=e.deckTileIds,a=e.ownedTiles;e.deckTiles=t.map((function(e){return S(a,e)||m(Je)}))}(),B(),J()}function tt(){var e,t=localStorage["".concat(N)];if(null===(e=t=t?JSON.parse(t):{})||void 0===e?void 0:e.gameState){var a=qe(t.gameState);at(a.ownedTiles),at(a.deckTiles),at(a.gameTiles),at(a.tilesToPick),s.state.gameData=t.gameState}}function at(e){var t,a=Object(M.a)(e);try{var n=function(){var e=t.value;e.config=Qe.find((function(t){return t.id===e.config.id}))||Je};for(a.s();!(t=a.n()).done;)n()}catch(i){a.e(i)}finally{a.f()}}function nt(e){var t=e.tile,a=e.showValue,n=e.fade,i=e.onClick,c=["tile"];return t.data.highlight&&c.push("highlight"),n&&c.push("fade"),Object(g.jsxs)("div",{className:c.join(" "),onClick:function(){s.state.selectedTile=t,s.update(),i&&i(t)},children:[!!t.config.topStat&&a&&Object(g.jsx)("div",{className:"top-stat",children:t.config.topStat(t)}),!!t.data.spinValue&&a&&Object(g.jsx)("div",{className:"value",children:t.data.spinValue}),Object(g.jsx)(t.config.icon,{})]})}function it(e){var t=e.tiles,a=e.onClickTile,n=e.fade;return Object(g.jsx)("div",{className:"inventory",children:t.map((function(e){return Object(g.jsx)(nt,{tile:e,onClick:a,fade:n&&n(e)},e.id)}))})}function ct(){var e=s.state.gameData;e.currentTaxPeriod=0,e.currentTaxPeriodDay=0,e.roundEnded=!1,e.boardTiles=[],e.totalCoins=0,e.events=[],e.tilesToPick=[],e.modal="",e.counters.totalRounds++,B(),J(),s.update()}function rt(){var e=Y(),t=s.state.gameData;function a(e,t){return 100*Math.pow(e+1,2)*(t+1)}function n(){var e=Object.keys(f).map((function(){return[]})),a=Object.keys(f).map((function(){return[]})),n=Object.keys(f).map((function(){return 0}));return Ze.forEach((function(i){a[i.config.rarity].push(i),i.config!==Je&&(S(t.ownedTiles,i.config.id)?n[i.config.rarity]++:e[i.config.rarity].push(i))})),{availableTilesByRarity:e,allTilesByRarity:a,ownedRarityCounts:n}}var i=n(),c=i.availableTilesByRarity,r=i.allTilesByRarity,o=i.ownedRarityCounts;return Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100%"},children:Object(g.jsxs)("div",{className:"main-container",children:[Object(g.jsx)("h1",{children:"The round is over"}),Object(g.jsxs)("h2",{children:["Saved: ",t.savedCoins,Object(g.jsx)(v,{Icon:T})," (",t.lastTotalCoins,Object(g.jsx)(v,{Icon:T})," earned last round)"]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"This is your chance to get a new tile. Getting a new tile will increase the cost of the next tile of the same rarity"}),Object(g.jsx)("div",{className:"buy-new-card",children:Object.keys(f).map((function(e,i){var l=f[e],d=a(l,o[i]),u=c[i].length,b=["rarity"],j=!0;return(d>t.savedCoins||0===u)&&(b.push("disabled"),j=!1),Object(g.jsxs)("div",{className:b.join(" "),children:[Object(g.jsx)("div",{className:"name",children:e}),Object(g.jsx)("div",{className:"cost",children:d}),Object(g.jsxs)("div",{className:"remaining-tiles",children:[c[i].length," of ",r[i].length," tiles available"]}),j&&Object(g.jsx)("button",{onClick:function(){return function(e){var i=n(),c=i.availableTilesByRarity,r=i.ownedRarityCounts,o=c[e],l=D(0,o.length-1);t.savedCoins-=a(e,r[e]),E(o[l].config),s.update()}(i)},children:"Buy"})]},l)}))})]}),Object(g.jsx)("div",{children:"Take this time to reorganize your deck"}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Deck"}),Object(g.jsxs)("div",{style:{background:e>1?"red":"none"},children:["Deck Score: ",e.toFixed(2)]}),Object(g.jsx)(it,{tiles:t.deckTiles,onClickTile:function(e){var a=t.deckTiles.indexOf(e);a>=0&&t.deckTiles.splice(a,1)}})]})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Owned Inventory"}),Object(g.jsx)(it,{tiles:t.ownedTiles,onClickTile:function(e){t.deckTiles.find((function(t){return t.config.id===e.config.id}))||t.deckTiles.push(e)}})]})}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"All Tiles"}),Object(g.jsx)(it,{tiles:Ze,fade:function(e){return!!t.ownedTiles.find((function(t){return t.config.id===e.config.id}))},onClickTile:function(e){t.superUser&&(t.ownedTiles.find((function(t){return t.config.id===e.config.id}))||t.ownedTiles.push(m(e.config)))}})]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:ct,children:"Next round"})]})})}function st(e){var t=e.boardTiles,a=e.gameTiles,n=e.width,i=e.height,c={fontSize:"1.5em",gridTemplateColumns:"repeat(".concat(n,", 5em)"),gridTemplateRows:"repeat(".concat(i,", 5em)")};if(0===t.length){var r=m(Je);return Object(g.jsx)("div",{className:"board",style:c,children:" ".repeat(n*i).split("").map((function(e,t){return Object(g.jsx)(nt,{tile:r},t)}))})}return Object(g.jsx)("div",{className:"board",style:c,children:t.map((function(e,t){var n=a[e];return Object(g.jsx)(nt,{tile:n,showValue:!0,onClick:function(){}},n.id)}))})}function ot(e){var t=e.events;return Object(g.jsx)("div",{className:"game-events",children:t.map((function(e){return Object(g.jsx)("div",{className:"event",children:Object(g.jsx)("div",{className:"message",children:e.message})},e.id)}))})}Ke.forEach((function(e){Xe.set(e.id,e),Ze.push(m(e))}));var lt=a(10);function dt(e){s.state.gameData.modal=e,s.update()}function ut(){s.state.gameData.modal="",s.update()}function ft(e){var t=e.children,a=e.style;return console.log(t),Object(g.jsx)("div",{className:"modal",children:Object(g.jsx)("div",{className:"shade",children:Object(g.jsx)("div",{className:"container",style:a,children:t})})})}function bt(e){var t=e.tile,a=e.onClick;if(!t)return null;var n=t.config;return Object(g.jsxs)("div",{className:"tile-details",onClick:a,children:[Object(g.jsx)("div",{className:"name",children:n.name}),Object(g.jsx)("div",{className:"rarity",children:b[n.rarity]}),Object(g.jsx)(t.config.icon,{}),Object(g.jsxs)("div",{className:"base-value",children:[n.baseValue,Object(g.jsx)(v,{Icon:T})]}),Object(g.jsx)("div",{className:"description",children:n.description&&n.description()})]})}function jt(){var e=s.state.gameData.tilesToPick;function t(e){e&&R(e),s.state.gameData.modal="",s.state.gameData.tilesToPick=[],A(),ut()}return Object(g.jsxs)(ft,{children:[Object(g.jsx)("h1",{children:"Pick New Tile"}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"pick-a-tile",children:e.map((function(e){return Object(g.jsxs)("div",{className:"option",children:[Object(g.jsx)(bt,{tile:e},e.id),Object(g.jsx)("button",{onClick:function(){t(e)},children:"Select"})]})}))}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return t()},children:"Skip"})]})}function ht(){var e=s.state.gameData,t=Y();return Object(g.jsx)(ft,{style:{width:"50em"},children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Inventory"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Game Tiles"}),Object(g.jsx)(it,{tiles:e.gameTiles})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Deck"}),Object(g.jsxs)("div",{style:{background:t>1?"red":"none"},children:["Deck Score: ",t.toFixed(2)]}),Object(g.jsx)(it,{tiles:e.deckTiles})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Owned Inventory"}),Object(g.jsx)(it,{tiles:e.ownedTiles})]}),e.superUser&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"All Tiles"}),Object(g.jsx)(it,{tiles:Ze,onClickTile:function(t){e.ownedTiles.find((function(e){return e.config.id===t.config.id}))||e.ownedTiles.push(m(t.config))}})]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:ut,children:"Close"})]})})}var mt=[{id:"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d",name:"Board Width",cost:function(){return 0},buy:function(){s.state.gameData.gridWidth+=1,H(),s.update()},isComplete:function(){return!1}},{id:"1e0ab330-8ec9-4e41-933d-75251ffa5ee5",name:"Board Height",cost:function(){return 0},buy:function(){s.state.gameData.gridHeight+=1,H(),s.update()},isComplete:function(){return!1}},{id:"0245c559-dd55-4f93-a626-53cc06b17d42",name:"XYZ",cost:function(){return 0},buy:function(){},isComplete:function(){return!1}}];function gt(){return Object(g.jsx)("div",{className:"upgrades",children:mt.map((function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:e.name}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:e.buy,children:"Buy"})})]},e.id)}))})}function Ot(){return Object(g.jsxs)(ft,{children:[Object(g.jsx)("h1",{children:"Upgrades"}),Object(g.jsx)(gt,{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:ut,children:"Close"})]})}function vt(){var e=s.state.gameData;return Object(g.jsxs)(ft,{children:[Object(g.jsx)("h1",{children:"Intro"}),Object(g.jsxs)("div",{children:["You are a craftsman who's father just passed, leaving you his shop and a few personal possessions. One of these was a well worn rune that you had never seen before... what could it possibly be?",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Taxes"}),"As a shop owner you must pay taxes. As time goes on you are given more time, but also expected to pay more taxes.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Getting Items"}),"Every day you will get new shipments of items, which you are then able to use for profit. What happens on the day will be completely up to chance.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"At the end of the day you will also have the opprtunity to select from additional items to be delivered to your shop.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Item effects"}),"As a craftsman you are able to utilize items in different ways to produce even more valuable or useful items."]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){e.flags.introDismissed=!0,s.update()},children:"Begin your journey"})]})}function pt(){return Object(g.jsxs)(ft,{children:[Object(g.jsx)("h1",{children:"Options"}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){et(),A(),s.update()},children:"Reset All Game Data"}),Object(g.jsx)("button",{onClick:function(){A()},children:"Save Game Data"}),Object(g.jsx)("button",{onClick:P,children:"End Round"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:ut,children:"Close"})]})}function xt(){var e=s.state.gameData,t=_[e.currentTaxPeriod];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{fontSize:"3em"},children:[e.totalCoins,Object(g.jsx)("span",{className:"icon-em",children:Object(g.jsx)(T,{})})," ","/ ",t.taxAmount,Object(g.jsx)("span",{className:"icon-em",children:Object(g.jsx)(T,{})})," ","taxes due in ",t.totalDays-e.currentTaxPeriodDay," Days"]}),Object(g.jsxs)("div",{style:{float:"right"},children:["Tax Period: ",e.currentTaxPeriod]}),Object(g.jsxs)("div",{children:["Saved: ",e.savedCoins,Object(g.jsx)(v,{Icon:T})]})]})}function yt(){switch(s.state.gameData.modal){case"PickNewTile":return Object(g.jsx)(jt,{});case"Inventory":return Object(g.jsx)(ht,{});case"Upgrades":return Object(g.jsx)(Ot,{});case"Options":return Object(g.jsx)(pt,{})}return null}function Tt(){var e=s.state.gameData;return Object(g.jsxs)(g.Fragment,{children:[!e.flags.introDismissed&&Object(g.jsx)(vt,{}),Object(g.jsx)(yt,{}),Object(g.jsxs)("div",{className:"app",style:{display:"flex",justifyContent:"center",height:"100%"},children:[Object(g.jsxs)("div",{className:"version",children:["Version: ",lt.version]}),Object(g.jsxs)("div",{className:"main-container",children:[Object(g.jsx)(xt,{}),Object(g.jsxs)("div",{children:[Object(g.jsx)("br",{}),Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(g.jsx)(st,{boardTiles:e.boardTiles,gameTiles:e.gameTiles,width:e.gridWidth,height:e.gridHeight})}),Object(g.jsxs)("div",{style:{fontSize:"2em",textAlign:"center"},children:["Board value ",!!e.boardValue&&e.boardValue||0,Object(g.jsx)(v,{Icon:T})]}),!s.state.spinning&&Object(g.jsx)("button",{onClick:U,style:{marginTop:"0.5em"},children:"Spin"}),e.counters.totalRounds>0&&Object(g.jsxs)("div",{style:{marginTop:"1em"},children:[Object(g.jsx)("button",{onClick:function(){return dt("Inventory")},children:"Inventory"}),Object(g.jsx)("button",{onClick:function(){return dt("Upgrades")},children:"Upgrades"}),Object(g.jsx)("button",{onClick:function(){return dt("Options")},children:"Options"})]}),Object(g.jsx)("br",{})]}),e.counters.totalRounds>0&&Object(g.jsx)(g.Fragment,{children:!!e.events.length&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Events"}),Object(g.jsx)(ot,{events:e.events}),Object(g.jsx)("br",{})]})})]})]})]})}function kt(){return Object(g.jsx)(g.Fragment,{children:s.state.selectedTile&&Object(g.jsxs)("div",{style:{position:"fixed",top:"0em",left:"0em",zIndex:1e6,padding:"1em",background:"#333",boxShadow:"0em 0em 1em 0em #000"},children:[Object(g.jsx)(bt,{tile:s.state.selectedTile}),Object(g.jsx)("button",{onClick:function(){s.state.selectedTile=void 0,s.update()},children:"Close"})]})})}tt(),tt();var Ct=function(){var e=Object(n.useState)(0)[1];Object(n.useEffect)((function(){s._update=e}),[e]),s.state.gameData||et();var t=null;return t=s.state.gameData.roundEnded?Object(g.jsx)(rt,{}):Object(g.jsx)(Tt,{}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(kt,{}),t]})};r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(Ct,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.ba29d845.chunk.js.map