{"version":3,"sources":["lib/createTile.ts","tiles/rarities.ts","tiles/icons/images/key.png","tiles/icons/images/chest1.png","tiles/icons/images/chest2.png","tiles/icons/images/chest3.png","tiles/icons/images/chest4.png","tiles/icons/images/coal.png","tiles/icons/images/coin.png","tiles/icons/images/dagger1.png","tiles/icons/Icon.tsx","tiles/lib/iterateAdjacentTiles.ts","tiles/set1/index.ts","tiles/lib/destroy.ts","tiles/chests/index.tsx","tiles/lib/hasCategory.ts","tiles/index.ts","lib/store.ts","components/Tile.tsx","components/Board.tsx","components/Inventory.tsx","lib/utils.ts","lib/static.ts","lib/saveGameData.ts","config/taxPeriods.ts","lib/game.ts","lib/newGame.ts","components/TileDetails.tsx","components/PickNewTile.tsx","components/Upgrades.tsx","lib/loadGameData.ts","lib/newRound.ts","App.tsx","index.tsx"],"names":["createTile","tileConfig","data","spinValue","totalSpins","totalAppearances","highlight","tile","id","uuid","config","effects","rarity","Icon","image","className","src","alt","Chest1","chest1","Chest2","chest2","Chest3","chest3","Chest4","chest4","Coin","coin","iterateAdjacentTiles","context","callback","adjecentIndexes","getAdjacentIndexes","getTiles","forEach","tileConfigs","name","icon","coal","categories","calculateValue","total","dagger1","destroy","destroyValue","onDestroy","gameTiles","gameData","gameTilesIndex","indexOf","emptyTile","emptyTileConfig","description","key","destroyed","category","includes","hasCategory","alert","set1","chests","tilesById","Map","tilesByName","set","store","state","spinning","tilesToPick","selectedTile","_update","value","update","Math","random","Tile","showValue","onClick","push","join","Board","boardTiles","width","height","style","fontSize","gridTemplateColumns","gridTemplateRows","length","emptyTileInstance","repeat","split","map","_","index","deckIndex","Inventory","tiles","window","randomInt","min","max","floor","GAME_ID","replaceTileConfigs","taxPeriods","totalDays","taxAmount","findTile","find","pickRandomTile","maxRarity","array","tilesAvailable","reduce","acc","setInitialGameTiles","deckTiles","i","fillEmptyTiles","gridWidth","gridHeight","spin","availableGameTiles","availableIndex","gameTile","splice","generateBoard","resetTiles","interval","setInterval","clearInterval","totalCoins","boardValue","count","availableTiles","pickedTiles","pickTiles","nextTaxPeriodDay","localData","localStorage","JSON","parse","gameState","stringify","ownedTiles","saveGameData","startIndex","indexes","isAdjacent","calculateBoardTileValue","originIndex","checkIndex","tileIndexes","taxPeriod","currentTaxPeriod","currentTaxPeriodDay","roundEnded","addTile","get","console","log","addOwnedTile","tileId","deckTileIds","addDeckTile","newGame","buildDeck","TileDetails","PickNewTile","newTile","emptyTileIndex","findIndex","addGameTile","upgrades","cost","buy","isComplete","Upgrades","upgrade","updateTileConfigs","newRound","Header","loadGameData","App","useState","useEffect","buttons","opacity","display","flexDirection","undefined","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dddd2d5b.chunk.js","sourcesContent":["import { TileConfig } from \"../types/TileConfig\";\nimport { TileData, TileInstance } from \"../types/TileInstance\";\nimport { v4 as uuid } from \"uuid\";\n\nexport function createTileData() {\n  const tileData: TileData = {\n    spinValue: 0,\n    totalSpins: 0,\n    totalAppearances: 0,\n    highlight: false,\n  };\n\n  return tileData;\n}\n\nexport function createTile(\n  tileConfig: TileConfig,\n  data: TileData = createTileData()\n) {\n  const tile: TileInstance = {\n    id: uuid(),\n    config: tileConfig,\n    effects: {},\n    data,\n  };\n\n  return tile;\n}\n","export const rarity = {\n  COMMON: 0,\n  UNCOMMON: 1,\n  RARE: 2,\n  LEGENDARY: 3,\n};\n","export default __webpack_public_path__ + \"static/media/key.0629d73b.png\";","export default __webpack_public_path__ + \"static/media/chest1.b4054229.png\";","export default __webpack_public_path__ + \"static/media/chest2.d4ed67d0.png\";","export default __webpack_public_path__ + \"static/media/chest3.888bf5be.png\";","export default __webpack_public_path__ + \"static/media/chest4.28dffa1b.png\";","export default __webpack_public_path__ + \"static/media/coal.d3a30adc.png\";","export default __webpack_public_path__ + \"static/media/coin.3480412c.png\";","export default __webpack_public_path__ + \"static/media/dagger1.6892c2d5.png\";","import key from \"./images/key.png\";\nimport chest1 from \"./images/chest1.png\";\nimport chest2 from \"./images/chest2.png\";\nimport chest3 from \"./images/chest3.png\";\nimport chest4 from \"./images/chest4.png\";\n\nimport coal from \"./images/coal.png\";\nimport coin from \"./images/coin.png\";\nimport dagger1 from \"./images/dagger1.png\";\n\nconst empty =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\ninterface Props {\n  image?: any;\n}\n\nexport function Icon({ image }: Props) {\n  return <img className=\"icon\" src={image} alt=\"\" />;\n}\n\nexport const Empty = () => <Icon image={empty} />;\n\nexport const Key = () => <Icon image={key} />;\nexport const Chest1 = () => <Icon image={chest1} />;\nexport const Chest2 = () => <Icon image={chest2} />;\nexport const Chest3 = () => <Icon image={chest3} />;\nexport const Chest4 = () => <Icon image={chest4} />;\n\nexport const Coal = () => <Icon image={coal} />;\nexport const Coin = () => <Icon image={coin} />;\nexport const Dagger1 = () => <Icon image={dagger1} />;\n","import { TileValueContext } from \"../../types/TileValueContext\";\n\nexport function iterateAdjacentTiles(context: TileValueContext, callback: any) {\n  const adjecentIndexes = context.getAdjacentIndexes();\n\n  const tiles = context.getTiles(adjecentIndexes);\n\n  tiles.forEach(callback);\n}\n","import { TileConfig } from \"../../types/TileConfig\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\nimport { Coal, Coin, Dagger1 } from \"../icons/Icon\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { rarity } from \"../rarities\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"48217c09-300c-44b0-803e-19f51346227b\",\n    name: \"Coal\",\n    icon: Coal,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      let total = 1;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (tile.config.name === \"Coal\") {\n          total += 1;\n        }\n      });\n\n      return total;\n    },\n  },\n  {\n    id: \"2f2e6e35-686f-4033-9940-3f66a153c568\",\n    name: \"Dagger\",\n    icon: Dagger1,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n  {\n    id: \"49d24981-a7d1-4407-b121-ed3e45d427bd\",\n    name: \"Coin\",\n    icon: Coin,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { emptyTileConfig } from \"..\";\nimport { createTile } from \"../../lib/createTile\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\n\nexport function destroy(tile: TileInstance, context: TileValueContext) {\n  let destroyValue = 0;\n\n  if (tile.config.onDestroy) {\n    destroyValue = tile.config.onDestroy(context) || 0;\n  }\n\n  const { gameTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n\n  const emptyTile = createTile(emptyTileConfig);\n\n  gameTiles[gameTilesIndex] = emptyTile;\n\n  if (destroyValue) {\n    emptyTile.data.spinValue = destroyValue;\n  }\n}\n","import { TileConfig } from \"../../types/TileConfig\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { destroy } from \"../lib/destroy\";\nimport { Chest1, Chest2, Chest3, Chest4, Coin, Key } from \"../icons/Icon\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"2ef31449-bf1d-4cee-8e93-e0665fb9942a\",\n    name: \"Key\",\n    description: () => {\n      return (\n        <>\n          The key unlocks <Chest1 /> <Chest2 /> <Chest3 /> <Chest4 />,\n          destroying both in the process\n        </>\n      );\n    },\n    icon: Key,\n    rarity: rarity.COMMON,\n    categories: [\"key\"],\n    calculateValue: (context: TileValueContext) => {\n      let destroyed = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (hasCategory(tile, \"chest\")) {\n          destroy(tile, context);\n          destroyed = true;\n        }\n      });\n\n      if (destroyed) {\n        destroy(context.tile, context);\n      }\n\n      return 1;\n    },\n  },\n  {\n    id: \"834bf40d-0a3d-4e20-83a0-4e3aa233840c\",\n    name: \"Small Chest\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives 10 <Coin />\n        </>\n      );\n    },\n    icon: Chest1,\n    rarity: rarity.COMMON,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      return 10;\n    },\n  },\n  {\n    id: \"c87ea7e4-5479-4aa7-9033-0859d191390b\",\n    name: \"Medium Chest\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives 30 <Coin />\n        </>\n      );\n    },\n    icon: Chest2,\n    rarity: rarity.UNCOMMON,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      return 30;\n    },\n  },\n  {\n    id: \"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1\",\n    name: \"Large Chest\",\n    icon: Chest3,\n    rarity: rarity.RARE,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      alert(\"destroyed\");\n    },\n  },\n  {\n    id: \"3422f3a8-bd1a-4549-a9ff-d0ed0621d646\",\n    name: \"Dark Chest\",\n    icon: Chest4,\n    rarity: rarity.LEGENDARY,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      alert(\"destroyed\");\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { TileInstance } from \"../../types/TileInstance\";\n\nexport function hasCategory(tile: TileInstance, category: string) {\n  return tile.config.categories.includes(category);\n}\n","import { TileConfig } from \"../types/TileConfig\";\nimport { rarity } from \"./rarities\";\nimport set1 from \"./set1\";\nimport chests from \"./chests\";\nimport { TileValueContext } from \"../types/TileValueContext\";\nimport { Empty } from \"./icons/Icon\";\n\nconst tileConfigs: TileConfig[] = [...set1, ...chests];\n\nexport default tileConfigs;\nexport const tilesById = new Map<string, TileConfig>();\nexport const tilesByName = new Map<string, TileConfig>();\n\ntileConfigs.forEach((config) => {\n  tilesById.set(config.id, config);\n  tilesByName.set(config.name, config);\n});\n\nexport const emptyTileConfig: TileConfig = {\n  id: \"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1\",\n  name: \"Empty\",\n  icon: Empty,\n  rarity: rarity.COMMON,\n  categories: [\"empty\"],\n  calculateValue: (context: TileValueContext) => {\n    return context.tile.data.spinValue || 0;\n  },\n};\n","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport const store = {\n  state: {\n    gameData: (null as unknown) as GameData,\n    spinning: false,\n    tilesToPick: [] as TileInstance[],\n    selectedTile: (null as unknown) as TileInstance | undefined,\n  },\n  _update: (value: number) => {}, // The function that triggers an update\n  update: (): void => {\n    store._update(Math.random());\n  },\n};\n\n(window as any).store = store;\n","import { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile: TileInstance;\n  showValue?: boolean;\n  onClick?: () => void;\n}\n\nexport function Tile({ tile, showValue, onClick }: Props) {\n  const className = [\"tile\"];\n\n  if (tile.data.highlight) {\n    className.push(\"highlight\");\n  }\n\n  function clickedTile() {\n    store.state.selectedTile = tile;\n    store.update();\n\n    if (onClick) {\n      onClick();\n    }\n  }\n\n  return (\n    <div className={className.join(\" \")} onClick={clickedTile}>\n      {!!tile.data.spinValue && showValue && (\n        <div className=\"value\">{tile.data.spinValue}</div>\n      )}\n      <tile.config.icon />\n    </div>\n  );\n}\n","import { createTile } from \"../lib/createTile\";\nimport { emptyTileConfig } from \"../tiles\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  boardTiles: number[];\n  gameTiles: TileInstance[];\n  width: number;\n  height: number;\n}\n\nexport function Board({ boardTiles, gameTiles, width, height }: Props) {\n  const style = {\n    fontSize: \"1.5em\",\n    gridTemplateColumns: `repeat(${width}, 5em)`,\n    gridTemplateRows: `repeat(${height}, 5em)`,\n  };\n\n  if (boardTiles.length === 0) {\n    const emptyTileInstance = createTile(emptyTileConfig);\n\n    return (\n      <div className=\"board\" style={style}>\n        {\" \"\n          .repeat(width * height)\n          .split(\"\")\n          .map((_, index) => {\n            return <Tile key={index} tile={emptyTileInstance} />;\n          })}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"board\" style={style}>\n      {boardTiles.map((deckIndex, index) => {\n        const tile = gameTiles[deckIndex];\n        return <Tile key={tile.id} tile={tile} showValue onClick={() => {}} />;\n      })}\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  tiles: TileInstance[];\n}\n\nexport function Inventory({ tiles }: Props) {\n  return (\n    <div className=\"inventory\">\n      {tiles.map((tile) => (\n        <Tile key={tile.id} tile={tile} />\n      ))}\n    </div>\n  );\n}\n","export function randomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","export const GAME_ID = \"9c0617fc-daf3-4f9c-943e-073f698ac0b8\";\n","import { TileInstance } from \"../types/TileInstance\";\nimport { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\n\nexport function saveGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  // Simple clone of just the data\n  const gameState = JSON.parse(JSON.stringify(store.state.gameData));\n\n  replaceTileConfigs(gameState.ownedTiles);\n  replaceTileConfigs(gameState.deckTiles);\n  replaceTileConfigs(gameState.gameTiles);\n\n  localData.gameState = gameState;\n\n  localStorage[`${GAME_ID}`] = JSON.stringify(localData);\n}\n\nfunction replaceTileConfigs(tiles: any[]) {\n  for (const tile of tiles) {\n    tile.config = { id: tile.config.id };\n  }\n}\n","export const taxPeriods = [\n  {\n    totalDays: 0, // This will increment on starting a new game\n    taxAmount: 0,\n  },\n  {\n    totalDays: 5,\n    taxAmount: 25,\n  },\n  {\n    totalDays: 6,\n    taxAmount: 50,\n  },\n  {\n    totalDays: 7,\n    taxAmount: 100,\n  },\n  {\n    totalDays: 8,\n    taxAmount: 200,\n  },\n  {\n    totalDays: 9,\n    taxAmount: 400,\n  },\n  {\n    totalDays: 10,\n    taxAmount: 800,\n  },\n];\n","import { emptyTileConfig } from \"../tiles\";\nimport { rarity } from \"../tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { createTile } from \"./createTile\";\nimport { randomInt } from \"./utils\";\nimport { store } from \"./store\";\nimport { saveGameData } from \"./saveGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\n\nexport function findTile(tiles: TileInstance[], id: string) {\n  return tiles.find((tile) => {\n    return tile.config.id === id;\n  });\n}\n\nexport function addOwnedTile(tileConfig = emptyTileConfig) {\n  const { ownedTiles } = store.state.gameData;\n\n  if (findTile(ownedTiles, tileConfig.id)) {\n    console.log(`Already own tile ${tileConfig.name}`);\n    return;\n  }\n\n  console.log(`Adding owned tile ${tileConfig.name}`);\n\n  const tile = createTile(tileConfig);\n\n  ownedTiles.push(tile);\n}\n\nexport function addDeckTile(tileId?: string) {\n  if (!tileId) {\n    return;\n  }\n\n  const { deckTileIds } = store.state.gameData;\n\n  if (!deckTileIds.includes(tileId)) {\n    deckTileIds.push(tileId);\n  }\n}\nexport function addGameTile(newTile: TileInstance) {\n  const { gameTiles } = store.state.gameData;\n\n  const emptyTileIndex = gameTiles.findIndex((tile) => {\n    return tile.config.id === emptyTileConfig.id;\n  });\n\n  if (emptyTileIndex >= 0) {\n    gameTiles.splice(emptyTileIndex, 1, newTile);\n  } else {\n    gameTiles.push(newTile);\n  }\n}\n\nexport function buildDeck() {\n  const { gameData } = store.state;\n  const { deckTileIds, ownedTiles } = gameData;\n\n  gameData.deckTiles = deckTileIds.map((id) => {\n    return findTile(ownedTiles, id) || createTile(emptyTileConfig);\n  });\n}\n\nexport function ArrayRandomItem<T>(array: T[]) {\n  return array[randomInt(0, array.length - 1)];\n}\n\nexport function pickRandomTile(tiles: TileInstance[], maxRarity: number) {\n  const tilesAvailable = tiles.reduce((acc, tile) => {\n    if (tile.config.rarity <= maxRarity) {\n      acc.push(tile);\n    }\n\n    return acc;\n  }, [] as TileInstance[]);\n\n  return ArrayRandomItem<TileInstance>(tilesAvailable);\n}\n\nexport function setInitialGameTiles() {\n  const { gameData } = store.state;\n  const { deckTiles } = gameData;\n\n  const gameTiles: TileInstance[] = [];\n\n  for (let i = 0; i < 5; i++) {\n    const tile = pickRandomTile(deckTiles, rarity.COMMON);\n    gameTiles.push(createTile(tile.config));\n  }\n\n  gameData.gameTiles = gameTiles;\n\n  fillEmptyTiles();\n}\n\nexport function fillEmptyTiles() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n\n  for (let i = 0; gameTiles.length < gridWidth * gridHeight; i++) {\n    gameTiles.push(createTile(emptyTileConfig));\n  }\n}\n\nexport function generateBoard() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n  const boardTiles = [];\n  const availableGameTiles = [...gameTiles]; // New array\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    // Get a random index\n    const availableIndex = Math.floor(\n      Math.random() * availableGameTiles.length\n    );\n    const gameTile = availableGameTiles[availableIndex];\n    const index = gameTiles.indexOf(gameTile);\n\n    // console.log(index);\n    boardTiles.push(index);\n\n    availableGameTiles.splice(availableIndex, 1);\n  }\n\n  return boardTiles;\n}\n\nexport function resetTiles() {\n  const { gridWidth, gridHeight, gameTiles, boardTiles } = store.state.gameData;\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    const tile = gameTiles[boardTiles[i]];\n    tile.data.spinValue = 0;\n  }\n}\n\nexport function spin() {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight, deckTiles } = gameData;\n\n  gameData.boardTiles = generateBoard();\n\n  resetTiles();\n  processBoard();\n\n  store.state.spinning = true;\n  store.update();\n\n  let index = 0;\n  const interval = setInterval(() => {\n    const { boardTiles, gameTiles } = gameData;\n\n    if (index > 0 && index <= gridWidth * gridHeight) {\n      const lastTile = gameTiles[boardTiles[index - 1]];\n      lastTile.data.highlight = false;\n    }\n\n    if (index > gridWidth * gridHeight) {\n      // Spin finished\n\n      clearInterval(interval);\n\n      store.state.spinning = false;\n      store.state.gameData.totalCoins += store.state.gameData.boardValue;\n      store.state.tilesToPick = pickTiles(deckTiles);\n      store.update();\n\n      nextTaxPeriodDay();\n\n      saveGameData();\n\n      return;\n    }\n\n    if (index < gridWidth * gridHeight) {\n      const tile = gameTiles[boardTiles[index]];\n      tile.data.highlight = true;\n      tile.data.totalAppearances++;\n      tile.data.spinValue = calculateBoardTileValue(tile, index);\n    }\n\n    index++;\n\n    let boardValue = 0;\n\n    for (const boardTilesIndex of boardTiles) {\n      boardValue += gameTiles[boardTilesIndex].data.spinValue;\n    }\n    store.state.gameData.boardValue = boardValue;\n\n    store.update();\n  }, 100);\n}\n\nexport function processBoard() {\n  const { gameTiles } = store.state.gameData;\n\n  // Add to totalSpins\n  gameTiles.forEach((tile) => {\n    tile.data.totalSpins++;\n  });\n}\n\nexport function isAdjacent(\n  originIndex: number,\n  checkIndex: number,\n  width: number,\n  height: number\n) {\n  // Up / Down or out of bounds\n  if (checkIndex < 0 || checkIndex >= width * height) {\n    return false;\n  }\n\n  // Left / Right\n  if (originIndex + 1 === checkIndex || originIndex - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor(originIndex / width)) {\n      return false;\n    }\n  }\n\n  // Down > Left / Right\n  if (\n    originIndex + width + 1 === checkIndex ||\n    originIndex + width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex + width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  // Up > Left / Right\n  if (\n    originIndex - width + 1 === checkIndex ||\n    originIndex - width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex - width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getAdjacentIndexes(\n  startIndex: number,\n  width: number,\n  height: number\n): number[] {\n  const indexes: number[] = [];\n\n  indexes.push(startIndex + width);\n  indexes.push(startIndex - width);\n  indexes.push(startIndex + 1);\n  indexes.push(startIndex - 1);\n\n  indexes.push(startIndex + width - 1);\n  indexes.push(startIndex + width + 1);\n  indexes.push(startIndex - width - 1);\n  indexes.push(startIndex - width + 1);\n\n  for (let i = 7; i >= 0; i--) {\n    if (!isAdjacent(startIndex, indexes[i], width, height)) {\n      indexes.splice(i, 1);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getTiles(tileIndexes: number[]) {\n  const { boardTiles, gameTiles } = store.state.gameData;\n\n  return tileIndexes.map((index) => {\n    return gameTiles[boardTiles[index]];\n  });\n}\n\nexport function calculateBoardTileValue(tile: TileInstance, index: number) {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight } = gameData;\n\n  const context = {\n    tile,\n    gameData,\n    getAdjacentIndexes: () => {\n      return getAdjacentIndexes(index, gridWidth, gridHeight);\n    },\n    getTiles,\n  };\n\n  return tile.config.calculateValue(context);\n}\n\nfunction pickTiles(tiles: TileInstance[], count = 3) {\n  const availableTiles = [...tiles];\n  const pickedTiles = [];\n\n  for (let i = 0; i < count; i++) {\n    const index = randomInt(0, availableTiles.length - 1);\n    const tile = availableTiles.splice(index, 1)[0];\n\n    if (tile) {\n      pickedTiles.push(createTile(tile.config));\n    }\n  }\n\n  return pickedTiles;\n}\n\nexport function nextTaxPeriodDay() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  gameData.currentTaxPeriodDay++;\n\n  if (gameData.currentTaxPeriodDay >= taxPeriod.totalDays) {\n    gameData.currentTaxPeriod++;\n    gameData.currentTaxPeriodDay = 1;\n    gameData.totalCoins -= taxPeriod.taxAmount;\n\n    if (gameData.totalCoins < 0) {\n      gameData.roundEnded = true;\n    }\n  }\n\n  store.update();\n}\n","import { tilesByName } from \"../tiles\";\nimport { GameData } from \"../types/GameData\";\nimport {\n  addDeckTile,\n  addOwnedTile,\n  buildDeck,\n  nextTaxPeriodDay,\n  setInitialGameTiles,\n} from \"./game\";\nimport { store } from \"./store\";\n\nfunction addTile(name: string) {\n  const tileConfig = tilesByName.get(name);\n  addOwnedTile(tileConfig);\n  addDeckTile(tileConfig?.id);\n}\n\nexport function newGame() {\n  const gameData: GameData = {\n    boardTiles: [],\n    ownedTiles: [],\n    deckTileIds: [],\n    deckTiles: [],\n    gameTiles: [],\n    gridWidth: 3,\n    gridHeight: 3,\n    boardValue: 0,\n    totalCoins: 0,\n    currentTaxPeriod: 0,\n    currentTaxPeriodDay: 0,\n    roundEnded: false,\n  };\n\n  store.state.gameData = gameData;\n\n  addTile(\"Coal\");\n  addTile(\"Dagger\");\n  addTile(\"Key\");\n  addTile(\"Small Chest\");\n  addTile(\"Medium Chest\");\n\n  buildDeck();\n\n  setInitialGameTiles();\n\n  nextTaxPeriodDay();\n}\n","import { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile?: TileInstance;\n  onClick?: any;\n}\n\nexport function TileDetails({ tile, onClick }: Props) {\n  if (!tile) {\n    return null;\n  }\n\n  const { config } = tile;\n\n  return (\n    <div className=\"tile-details\" onClick={onClick}>\n      <div className=\"name\">{config.name}</div>\n      <tile.config.icon />\n      <div className=\"description\">\n        {config.description && config.description()}\n      </div>\n    </div>\n  );\n}\n","import { addGameTile } from \"../lib/game\";\nimport { store } from \"../lib/store\";\nimport { TileDetails } from \"./TileDetails\";\n\nexport function PickNewTile() {\n  const { tilesToPick } = store.state;\n\n  return (\n    <div className=\"pick-a-tile\">\n      {tilesToPick.map((tile) => (\n        <TileDetails\n          key={tile.id}\n          tile={tile}\n          onClick={() => {\n            addGameTile(tile);\n            store.state.tilesToPick = [];\n            store.state.gameData.boardTiles = [];\n            store.update();\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n","import { fillEmptyTiles } from \"../lib/game\";\nimport { store } from \"../lib/store\";\n\nconst upgrades = [\n  {\n    id: \"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d\",\n    name: \"Board Width\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridWidth += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"1e0ab330-8ec9-4e41-933d-75251ffa5ee5\",\n    name: \"Board Height\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridHeight += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"0245c559-dd55-4f93-a626-53cc06b17d42\",\n    name: \"XYZ\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {},\n    isComplete: () => {\n      return false;\n    },\n  },\n];\n\nexport function Upgrades() {\n  return (\n    <div className=\"upgrades\">\n      {upgrades.map((upgrade) => {\n        return (\n          <div key={upgrade.id}>\n            <div>{upgrade.name}</div>\n            <div>\n              <button onClick={upgrade.buy}>Buy</button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\nimport tileConfigs, { emptyTileConfig } from \"../tiles\";\n\nexport function loadGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  if (localData?.gameState) {\n    // Must update configs with references to the actual objects\n    const gameState: GameData = localData.gameState;\n\n    updateTileConfigs(gameState.ownedTiles);\n    updateTileConfigs(gameState.deckTiles);\n    updateTileConfigs(gameState.gameTiles);\n\n    store.state.gameData = localData.gameState;\n  }\n}\n\nfunction updateTileConfigs(tiles: TileInstance[]) {\n  for (const tile of tiles) {\n    tile.config =\n      tileConfigs.find((tileConfig) => {\n        return tileConfig.id === tile.config.id;\n      }) || emptyTileConfig;\n  }\n}\n","import { setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\n\nexport function newRound() {\n  const { gameData } = store.state;\n\n  gameData.currentTaxPeriod = 0;\n  gameData.currentTaxPeriodDay = 0;\n  gameData.roundEnded = false;\n  gameData.boardTiles = [];\n  gameData.totalCoins = 0;\n\n  setInitialGameTiles();\n\n  store.state.tilesToPick = [];\n\n  store.update();\n}\n","import { Board } from \"./components/Board\";\nimport { Inventory } from \"./components/Inventory\";\nimport { store } from \"./lib/store\";\nimport { useEffect, useState } from \"react\";\nimport { newGame } from \"./lib/newGame\";\nimport { spin } from \"./lib/game\";\nimport { PickNewTile } from \"./components/PickNewTile\";\nimport { TileDetails } from \"./components/TileDetails\";\nimport { Upgrades } from \"./components/Upgrades\";\nimport { loadGameData } from \"./lib/loadGameData\";\nimport { taxPeriods } from \"./config/taxPeriods\";\nimport { Coin } from \"./tiles/icons/Icon\";\nimport { newRound } from \"./lib/newRound\";\n\nloadGameData();\n\nfunction Header() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  return (\n    <>\n      <div style={{ fontSize: \"3em\" }}>\n        {gameData.totalCoins}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        / {taxPeriod.taxAmount}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        taxes due in {taxPeriod.totalDays - gameData.currentTaxPeriodDay} Days\n      </div>\n      <div style={{ fontSize: \"3em\" }}></div>\n    </>\n  );\n}\n\nfunction App() {\n  const update = useState(0)[1];\n\n  // Did mount / unmount\n  useEffect(() => {\n    store._update = update;\n  }, [update]);\n\n  if (!store.state.gameData) {\n    newGame();\n  }\n\n  const { gameData, tilesToPick } = store.state;\n\n  let buttons = null;\n  if (!store.state.spinning && !tilesToPick.length) {\n    buttons = (\n      <>\n        <button onClick={spin}>Spin</button>\n      </>\n    );\n  }\n\n  if (gameData.roundEnded) {\n    return (\n      <div>\n        THE ROUND IS OVER\n        <button onClick={newRound}>Next round</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <Header />\n      {!!tilesToPick.length && (\n        <div>\n          <h1>Pick New Tile</h1>\n          <PickNewTile />\n        </div>\n      )}\n      <div style={{ opacity: tilesToPick.length ? 0.5 : 1 }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div>\n            <h1>Board</h1>\n            <Board\n              boardTiles={gameData.boardTiles}\n              gameTiles={gameData.gameTiles}\n              width={gameData.gridWidth}\n              height={gameData.gridHeight}\n            />\n            {buttons}\n            <div style={{ fontSize: \"2em\" }}>\n              Board value:{\" \"}\n              <b>{(!!gameData.boardValue && gameData.boardValue) || 0}</b>\n            </div>\n          </div>\n          <div style={{ width: \"1em\" }}></div>\n          <div>\n            <h1>Selected Tile</h1>\n            <TileDetails\n              tile={store.state.selectedTile}\n              onClick={() => {\n                store.state.selectedTile = undefined;\n                store.update();\n              }}\n            />\n          </div>\n        </div>\n        <div>\n          <h1>Game Tiles</h1>\n          <Inventory tiles={gameData.gameTiles} />\n        </div>\n        <div>\n          <h1>Deck</h1>\n          <Inventory tiles={gameData.deckTiles} />\n        </div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory tiles={gameData.ownedTiles} />\n        </div>\n        <div>\n          <h1>Upgrades</h1>\n          <Upgrades />\n        </div>\n        <button\n          onClick={() => {\n            newGame();\n            store.update();\n          }}\n        >\n          Reset all game data\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}