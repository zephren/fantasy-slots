(this["webpackJsonpfantasy-slots"]=this["webpackJsonpfantasy-slots"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"name":"fantasy-slots","version":"0.1.8","private":true,"dependencies":{"gh-pages":"^3.1.0","node-sass":"^5.0.0","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.3","typescript":"^4.2.2","uuid":"^8.3.2","web-vitals":"^1.1.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.7.3","@types/jest":"^26.0.20","@types/node":"^12.20.4","@types/react":"^17.0.2","@types/react-dom":"^17.0.1","@types/uuid":"^8.3.0"},"homepage":"https://zephren.github.io/fantasy-slots"}')},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n.n(a),c=n(8),r=n.n(c),s=(n(16),{state:{gameData:null,spinning:!1,selectedTile:null},_update:function(e){},update:function(){s._update(Math.random())}});window.store=s;var o=n(5),l=n(1),d=n(9),u=function e(t){Object(d.a)(this,e),this.id="",this.name="",this.icon=void 0,this.rarity=0,this.categories=[],this.description=void 0,this.calculateValue=function(e){return 0},this.onRemove=void 0,this.createMeta=void 0,this.topStat=void 0,this.name="",Object.assign(this,t)},f={COMMON:0,UNCOMMON:1,RARE:2,LEGENDARY:3},j=["Common","Uncommon","Rare","Legendary"],b=f.LEGENDARY,h=n(19);function m(e,t){var n;return e||(console.error(new Error("Undefined tile config for creating a tile. Adding an empty tile.")),e=Ie),!t&&e.createMeta&&(t=e.createMeta()),{id:Object(h.a)(),config:e,effects:{},data:{spinValue:0,totalSpins:0,totalAppearances:0,highlight:!1},meta:null!==(n=t)&&void 0!==n?n:{}}}var g=n(0);function O(e){var t=e.image,n=e.config;return Object(g.jsx)("img",{className:"icon",src:t,alt:"",onClick:function(){n&&(s.state.selectedTile=m(n),s.update())}})}function v(e){var t=e.Icon;return Object(g.jsx)("span",{className:"text-icon",children:Object(g.jsx)(t,{})})}var p=new Map;function x(e,t){var n=p.get(t.name);return n||(n=Object(g.jsx)(O,{image:e,config:t})),n}var y=n.p+"static/media/coin.3480412c.png",T=function(){return x(y,Be.Coin)},k={Coin:new u({id:"d9c7f23b-a3e9-4b4e-af69-4a026998d40a",icon:T,rarity:f.COMMON,categories:["coin"],calculateValue:function(e){return 1}})};function C(e,t){var n=e.getAdjacentIndexes();return e.getTiles(n).map(t)}function D(e,t){return e.config.categories.includes(t)}var w=n(2);function M(e,t){return Math.floor(Math.random()*(t-e+1))+e}var N="9c0617fc-daf3-4f9c-943e-073f698ac0b8";function A(){var e=localStorage["".concat(N)];e=e?JSON.parse(e):{};var t=JSON.parse(JSON.stringify(s.state.gameData));P(t.ownedTiles),P(t.deckTiles),P(t.gameTiles),P(t.tilesToPick),e.gameState=t,e.saveDate=new Date,localStorage["".concat(N)]=JSON.stringify(e)}function P(e){var t,n=Object(w.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.config={id:a.config.id}}}catch(i){n.e(i)}finally{n.f()}}var V=[{totalDays:0,taxAmount:0},{totalDays:5,taxAmount:25},{totalDays:6,taxAmount:50},{totalDays:7,taxAmount:100},{totalDays:8,taxAmount:200},{totalDays:9,taxAmount:400},{totalDays:10,taxAmount:800}];function S(){var e=s.state.gameData;e.roundEnded=!0,e.savedCoins+=e.totalCoins,e.lastTotalCoins=e.totalCoins,e.tilesToPick=[],s.update(),A()}function _(e,t){return e.find((function(e){return e.config.id===t}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=s.state.gameData.ownedTiles;if(_(t,e.id))console.log("Already own tile ".concat(e.name));else{console.log("Adding owned tile ".concat(e.name));var n=m(e);t.push(n)}}function R(e){var t=s.state.gameData.gameTiles,n=t.findIndex((function(e){return e.config.id===Ie.id}));n>=0?t.splice(n,1,e):t.push(e)}function I(e,t){var n,a=e.reduce((function(e,n){return n.config.rarity<=t&&e.push(n),e}),[]);return(n=a)[M(0,n.length-1)]}function B(){for(var e=s.state.gameData,t=e.deckTiles,n=[],a=0;a<5;a++){var i=I(t,f.COMMON);n.push(m(i.config))}e.gameTiles=n,H()}function H(){for(var e=s.state.gameData,t=e.gameTiles,n=e.gridWidth,a=e.gridHeight,i=0;t.length<n*a;i++)t.push(m(Ie))}function U(){var e=s.state.gameData,t=e.gridWidth,n=e.gridHeight,a=e.deckTiles;e.boardTiles=function(){for(var e=s.state.gameData,t=e.gameTiles,n=e.gridWidth,a=e.gridHeight,i=[],c=Object(o.a)(t),r=0;r<n*a;r++){var l=Math.floor(Math.random()*c.length),d=c[l],u=t.indexOf(d);i.push(u),c.splice(l,1)}return i}(),function(){for(var e=s.state.gameData,t=e.gridWidth,n=e.gridHeight,a=e.gameTiles,i=e.boardTiles,c=0;c<t*n;c++)a[i[c]].data.spinValue=0}(),s.state.gameData.gameTiles.forEach((function(e){e.data.totalSpins++})),s.state.spinning=!0,s.update();var i=0,c=setInterval((function(){var r=e.boardTiles,l=e.gameTiles;i>0&&i<=t*n&&(l[r[i-1]].data.highlight=!1);if(i>t*n)return clearInterval(c),s.state.spinning=!1,s.state.gameData.totalCoins+=s.state.gameData.boardValue,s.state.gameData.tilesToPick=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Object(o.a)(e),a=[],i=function(e){var t=J(n),i=t.chances,c=M(0,t.chanceTotal),r=i.findIndex((function(e){return e>=c})),s=n.splice(r,1)[0];s&&a.push(m(s.config))},c=0;c<t;c++)i(c);return a}(a),s.state.gameData.modal="PickNewTile",s.update(),z(),void A();if(i<t*n){var d=l[r[i]];d.data.highlight=!0,d.data.totalAppearances++,d.data.spinValue=F(d,i)}i++;var u,f=0,j=Object(w.a)(r);try{for(j.s();!(u=j.n()).done;){f+=l[u.value].data.spinValue}}catch(b){j.e(b)}finally{j.f()}s.state.gameData.boardValue=f,s.update()}),100)}function W(e,t,n,a){return!(t<0||t>=n*a)&&((e+1!==t&&e-1!==t||Math.floor(t/n)===Math.floor(e/n))&&((e+n+1!==t&&e+n-1!==t||Math.floor(t/n)===Math.floor((e+n)/n))&&(e-n+1!==t&&e-n-1!==t||Math.floor(t/n)===Math.floor((e-n)/n))))}function G(e){var t=s.state.gameData,n=t.boardTiles,a=t.gameTiles;return e.map((function(e){return a[n[e]]}))}function F(e,t){var n=s.state.gameData,a=n.gridWidth,i=n.gridHeight,c={tile:e,gameData:n,getAdjacentIndexes:function(){return function(e,t,n){var a=[];a.push(e+t),a.push(e-t),a.push(e+1),a.push(e-1),a.push(e+t-1),a.push(e+t+1),a.push(e-t-1),a.push(e-t+1);for(var i=7;i>=0;i--)W(e,a[i],t,n)||a.splice(i,1);return a}(t,a,i)},getTiles:G};return e.config.calculateValue(c)}function J(e){var t,n=[],a=0,i=Object(w.a)(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;a+=b+1-c.config.rarity,n.push(a)}}catch(r){i.e(r)}finally{i.f()}return{chances:n,chanceTotal:a}}function z(){var e=s.state.gameData,t=V[e.currentTaxPeriod];if(e.currentTaxPeriodDay++,e.currentTaxPeriodDay>=t.totalDays){e.currentTaxPeriod++,e.currentTaxPeriodDay=1;var n=e.totalCoins-t.taxAmount;n<0&&S(),e.totalCoins=n}s.update()}function L(e){var t=e.message,n=void 0===t?"":t;s.state.gameData.events.push({id:Object(h.a)(),message:n}),console.log("GAME EVENT: ".concat(n))}function Y(){var e,t=s.state.gameData,n=0,a=Object(w.a)(t.deckTiles);try{for(a.s();!(e=a.n()).done;){n+=e.value.config.rarity}}catch(i){a.e(i)}finally{a.f()}return n/t.deckTiles.length}function K(e,t){var n;e.config.onRemove&&(n=e.config.onRemove(t));var a=t.gameData.gameTiles,i=a.indexOf(e),c=m(Ie);if(n){var r=n.tiles;if(null===r||void 0===r?void 0:r.length){c=r[0];for(var s=1;s<r.length;s++)R(r[s])}n.value&&(c.data.spinValue=n.value)}a[i]=c}var Q=n.p+"static/media/key.0629d73b.png",X=n.p+"static/media/chest1.b4054229.png",Z=n.p+"static/media/chest2.d4ed67d0.png",q=n.p+"static/media/chest3.888bf5be.png",$=n.p+"static/media/chest4.28dffa1b.png",ee=function(){return x(X,Be.Small_Chest)},te=function(){return x(Z,Be.Medium_Chest)},ne=function(){return x(q,Be.Large_Chest)},ae=function(){return x($,Be.Dark_Chest)};function ie(e){var t=e.baseValue,n=e.removeValue;return{categories:["chest"],name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["Unlocked by the key, gives ",n," ",Object(g.jsx)(T,{})]})},calculateValue:function(e){return t},onRemove:function(e){return{value:n}}}}var ce={Key:new u({id:"2ef31449-bf1d-4cee-8e93-e0665fb9942a",name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["The key unlocks ",Object(g.jsx)(ee,{})," ",Object(g.jsx)(te,{})," ",Object(g.jsx)(ne,{})," ",Object(g.jsx)(ae,{}),", destroying both in the process"]})},icon:function(){return x(Q,Be.Key)},rarity:f.COMMON,categories:["key"],calculateValue:function(e){var t=!1;return C(e,(function(n){D(n,"chest")&&(K(n,e),t=!0)})),t&&K(e.tile,e),1}}),Small_Chest:new u(Object(l.a)({id:"834bf40d-0a3d-4e20-83a0-4e3aa233840c",icon:ee,rarity:f.COMMON},ie({baseValue:1,removeValue:10}))),Medium_Chest:new u(Object(l.a)({id:"c87ea7e4-5479-4aa7-9033-0859d191390b",icon:te,rarity:f.UNCOMMON},ie({baseValue:2,removeValue:20}))),Large_Chest:new u(Object(l.a)({id:"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1",icon:ne,rarity:f.RARE},ie({baseValue:3,removeValue:30}))),Dark_Chest:new u(Object(l.a)({id:"3422f3a8-bd1a-4549-a9ff-d0ed0621d646",icon:ae,rarity:f.LEGENDARY},ie({baseValue:4,removeValue:40})))},re=n.p+"static/media/pickaxe.9f91b8f2.png",se=n.p+"static/media/rock.cffc8f04.png",oe=n.p+"static/media/oreCoal.d3a30adc.png",le=n.p+"static/media/oreCopper.ef951831.png",de=n.p+"static/media/oreIron.45ad7af5.png",ue=n.p+"static/media/oreSilver.3e3113ee.png",fe=function(){return x(re,Be.Pickaxe)},je=function(){return x(oe,Be.Coal)},be=function(){return x(le,Be.Copper_Ore)},he=function(){return x(de,Be.Iron_Ore)},me=function(){return x(ue,Be.Silver_Ore)},ge={Pickaxe:new u({id:"102f6200-dd6b-434f-b486-67ccc425cc4d",name:"",description:function(){return Object(g.jsx)(g.Fragment,{children:"Breaks rocks, has 3 uses"})},icon:fe,rarity:f.COMMON,categories:["mining"],createMeta:function(){return{uses:3}},topStat:function(e){return e.meta.uses},calculateValue:function(e){var t=!1;return C(e,(function(n){t||D(n,"rock")&&(K(n,e),console.log(e.tile.meta),e.tile.meta.uses--,0===e.tile.meta.uses&&(t=!0,L({message:"A Pickaxe broke"})))})),t&&K(e.tile,e),1}}),Rock:new u({id:"89c89fb8-b343-4767-ba9f-78b4586b4ceb",name:"",description:function(){return Object(g.jsxs)(g.Fragment,{children:["Broken by ",Object(g.jsx)(fe,{}),", gives one of ",Object(g.jsx)(je,{})," ",Object(g.jsx)(be,{})," ",Object(g.jsx)(he,{})," ",Object(g.jsx)(me,{})]})},icon:function(){return x(se,Be.Rock)},rarity:f.COMMON,categories:["rock"],calculateValue:function(e){return 1},onRemove:function(e){var t=m(Be.Coal);return L({message:"A broken Rock yielded a ".concat(t.config.name)}),{tiles:[t]}}}),Coal:new u({id:"48217c09-300c-44b0-803e-19f51346227b",icon:je,rarity:f.COMMON,categories:[],calculateValue:function(e){return 1}}),Copper_Ore:new u({id:"35e8e354-dcfb-430c-9401-0035b775f00f",icon:be,rarity:f.COMMON,categories:[],calculateValue:function(e){return 1}}),Iron_Ore:new u({id:"8df321a7-a16d-485e-9b41-aebe784350db",icon:he,rarity:f.COMMON,categories:[],calculateValue:function(e){return 1}}),Silver_Ore:new u({id:"7fa9e325-ca81-48cd-a7d5-8b1203354218",icon:me,rarity:f.UNCOMMON,categories:[],calculateValue:function(e){return 1}})},Oe="small-health-potion",ve="medium-health-potion",pe="small-mana-potion",xe="medium-mana-potion",ye="small-elixer",Te="medium-elixer",ke=n.p+"static/media/elixer1.126eb52b.png",Ce=n.p+"static/media/elixer2.f677e6cf.png",De=n.p+"static/media/healthPotion1.2cc42067.png",we=n.p+"static/media/healthPotion2.8e645ab4.png",Me=n.p+"static/media/manaPotion1.03ef4a80.png",Ne=n.p+"static/media/manaPotion2.f6d761fd.png";function Ae(e,t){return C(e,(function(e){if(D(e,t))return e})).reduce((function(e,t){return t&&e.push(t),e}),[])}function Pe(e,t,n){var a=n.gameData,i=a.gameTiles,c=a.boardTiles,r=i.indexOf(e),s=c.indexOf(r);i[r]=t,t.data.spinValue=F(t,s)}function Ve(e,t){var n=Ae(t,e);return!!n.length&&(K(n[0],t),Pe(t.tile,m(_e.Small_Elixer),t),!0)}function Se(e,t,n){var a=Ae(n,e);return a.length>=2&&(K(a[0],n),K(a[1],n),Pe(n.tile,m(t),n),!0)}var _e={Small_Health_Potion:new u({id:"e77dc97d-8d44-45e4-bbad-deb79574092d",icon:function(){return x(De,Be.Small_Health_Potion)},rarity:f.COMMON,categories:[Oe],calculateValue:function(e){return Ve(pe,e)||Se(Oe,_e.Medium_Health_Potion,e)?0:1}}),Medium_Health_Potion:new u({id:"c6d67a75-f151-4503-b04d-2fb535c06c92",icon:function(){return x(we,Be.Medium_Health_Potion)},rarity:f.UNCOMMON,categories:[ve],calculateValue:function(e){return 2}}),Small_Mana_Potion:new u({id:"d587eba7-246e-46c7-bd55-2f32b0093cf8",icon:function(){return x(Me,Be.Small_Mana_Potion)},rarity:f.COMMON,categories:[pe],calculateValue:function(e){return Ve(Oe,e)||Se(pe,_e.Medium_Mana_Potion,e)?0:1}}),Medium_Mana_Potion:new u({id:"6c067c0f-eefb-43ce-8f81-0aabd19cacc1",icon:function(){return x(Ne,Be.Medium_Mana_Potion)},rarity:f.UNCOMMON,categories:[xe],calculateValue:function(e){return 2}}),Small_Elixer:new u({id:"93a94d4e-7a9d-4d1a-9f8a-3b1586530ca0",icon:function(){return x(ke,Be.Small_Elixer)},rarity:f.RARE,categories:[ye],calculateValue:function(e){return Se(ye,_e.Medium_Elixer,e)?0:5}}),Medium_Elixer:new u({id:"1fb94f1d-880e-41eb-9a29-f14700a22928",icon:function(){return x(Ce,Be.Medium_Elixer)},rarity:f.RARE,categories:[Te],calculateValue:function(e){return 10}})},Ee=_e,Re={Empty:new u({id:"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1",name:"",icon:function(){return x("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Be.Empty)},rarity:f.COMMON,categories:["empty"],calculateValue:function(e){return e.tile.data.spinValue||0}})},Ie=Re.Empty,Be=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},Re),k),ge),Ee),ce);for(var He in Be){Be[He].name=He.replaceAll("_"," ")}var Ue=Object(o.a)(Object.values(Be)),We=Ue,Ge=new Map,Fe=[];function Je(e){var t=e;return t.superUser||(t.superUser=!1),t.boardTiles||(t.boardTiles=[]),t.ownedTiles||(t.ownedTiles=[]),t.deckTileIds||(t.deckTileIds=[]),t.deckTiles||(t.deckTiles=[]),t.gameTiles||(t.gameTiles=[]),t.tilesToPick||(t.tilesToPick=[]),t.gridWidth||(t.gridWidth=3),t.gridHeight||(t.gridHeight=3),t.boardValue||(t.boardValue=0),t.totalCoins||(t.totalCoins=0),t.savedCoins||(t.savedCoins=0),t.lastTotalCoins||(t.lastTotalCoins=0),t.currentTaxPeriod||(t.currentTaxPeriod=0),t.currentTaxPeriodDay||(t.currentTaxPeriodDay=0),t.roundEnded||(t.roundEnded=!1),t.events||(t.events=[]),t.modal||(t.modal=""),t.flags||(t.flags={}),t}function ze(e){var t=function(e){var t=Be[e];return t||console.error(new Error('Tile name "'.concat(e,'" not found'))),t}(e);E(t),function(e){if(e){var t=s.state.gameData.deckTileIds;t.includes(e)||t.push(e)}}(null===t||void 0===t?void 0:t.id)}function Le(){var e=Je({});s.state.gameData=e,s.state.gameData.tilesToPick=[],ze("Coal"),ze("Pickaxe"),ze("Rock"),function(){var e=s.state.gameData,t=e.deckTileIds,n=e.ownedTiles;e.deckTiles=t.map((function(e){return _(n,e)||m(Ie)}))}(),B(),z()}function Ye(){var e,t=localStorage["".concat(N)];if(null===(e=t=t?JSON.parse(t):{})||void 0===e?void 0:e.gameState){var n=Je(t.gameState);Ke(n.ownedTiles),Ke(n.deckTiles),Ke(n.gameTiles),Ke(n.tilesToPick),s.state.gameData=t.gameState}}function Ke(e){var t,n=Object(w.a)(e);try{var a=function(){var e=t.value;e.config=We.find((function(t){return t.id===e.config.id}))||Ie};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}}function Qe(e){var t=e.tile,n=e.showValue,a=e.fade,i=e.onClick,c=["tile"];return t.data.highlight&&c.push("highlight"),a&&c.push("fade"),Object(g.jsxs)("div",{className:c.join(" "),onClick:function(){s.state.selectedTile=t,s.update(),i&&i(t)},children:[!!t.config.topStat&&n&&Object(g.jsx)("div",{className:"top-stat",children:t.config.topStat(t)}),!!t.data.spinValue&&n&&Object(g.jsx)("div",{className:"value",children:t.data.spinValue}),Object(g.jsx)(t.config.icon,{})]})}function Xe(e){var t=e.tiles,n=e.onClickTile,a=e.fade;return Object(g.jsx)("div",{className:"inventory",children:t.map((function(e){return Object(g.jsx)(Qe,{tile:e,onClick:n,fade:a&&a(e)},e.id)}))})}function Ze(){var e=s.state.gameData;e.currentTaxPeriod=0,e.currentTaxPeriodDay=0,e.roundEnded=!1,e.boardTiles=[],e.totalCoins=0,e.events=[],e.tilesToPick=[],e.modal="",B(),z(),s.update()}function qe(){var e=Y(),t=s.state.gameData;function n(e,t){return 100*Math.pow(e+1,2)*(t+1)}function a(){var e=Object.keys(f).map((function(){return[]})),n=Object.keys(f).map((function(){return[]})),a=Object.keys(f).map((function(){return 0}));return Fe.forEach((function(i){n[i.config.rarity].push(i),i.config!==Ie&&(_(t.ownedTiles,i.config.id)?a[i.config.rarity]++:e[i.config.rarity].push(i))})),{availableTilesByRarity:e,allTilesByRarity:n,ownedRarityCounts:a}}var i=a(),c=i.availableTilesByRarity,r=i.allTilesByRarity,o=i.ownedRarityCounts;return Object(g.jsxs)("div",{className:"main-container",children:[Object(g.jsx)("h1",{children:"The round is over"}),Object(g.jsxs)("h2",{children:["Saved: ",t.savedCoins,Object(g.jsx)(v,{Icon:T})," (",t.lastTotalCoins," earned last round)"]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"This is your chance to get a new tile. Getting a new tile will increase the cost of the next tile of the same rarity"}),Object(g.jsx)("div",{className:"buy-new-card",children:Object.keys(f).map((function(e,i){var l=f[e],d=n(l,o[i]),u=c[i].length,j=["rarity"],b=!0;return(d>t.savedCoins||0===u)&&(j.push("disabled"),b=!1),Object(g.jsxs)("div",{className:j.join(" "),children:[Object(g.jsx)("div",{className:"name",children:e}),Object(g.jsx)("div",{className:"cost",children:d}),Object(g.jsxs)("div",{className:"remaining-tiles",children:[c[i].length," of ",r[i].length," tiles available"]}),b&&Object(g.jsx)("button",{onClick:function(){return function(e){var i=a(),c=i.availableTilesByRarity,r=i.ownedRarityCounts,o=c[e],l=M(0,o.length-1);t.savedCoins-=n(e,r[e]),E(o[l].config),s.update()}(i)},children:"Buy"})]},l)}))})]}),Object(g.jsx)("div",{children:"Take this time to reorganize your deck"}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Deck"}),Object(g.jsxs)("div",{style:{background:e>1?"red":"none"},children:["Deck Score: ",e.toFixed(2)]}),Object(g.jsx)(Xe,{tiles:t.deckTiles,onClickTile:function(e){var n=t.deckTiles.indexOf(e);n>=0&&t.deckTiles.splice(n,1)}})]})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Owned Inventory"}),Object(g.jsx)(Xe,{tiles:t.ownedTiles,onClickTile:function(e){t.deckTiles.find((function(t){return t.config.id===e.config.id}))||t.deckTiles.push(e)}})]})}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"All Tiles"}),Object(g.jsx)(Xe,{tiles:Fe,fade:function(e){return!!t.ownedTiles.find((function(t){return t.config.id===e.config.id}))}})]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:Ze,children:"Next round"})]})}function $e(e){var t=e.boardTiles,n=e.gameTiles,a=e.width,i=e.height,c={fontSize:"1.5em",gridTemplateColumns:"repeat(".concat(a,", 5em)"),gridTemplateRows:"repeat(".concat(i,", 5em)")};if(0===t.length){var r=m(Ie);return Object(g.jsx)("div",{className:"board",style:c,children:" ".repeat(a*i).split("").map((function(e,t){return Object(g.jsx)(Qe,{tile:r},t)}))})}return Object(g.jsx)("div",{className:"board",style:c,children:t.map((function(e,t){var a=n[e];return Object(g.jsx)(Qe,{tile:a,showValue:!0,onClick:function(){}},a.id)}))})}function et(e){var t=e.events;return Object(g.jsx)("div",{className:"game-events",children:t.map((function(e){return Object(g.jsx)("div",{className:"event",children:Object(g.jsx)("div",{className:"message",children:e.message})},e.id)}))})}Ue.forEach((function(e){Ge.set(e.id,e),Fe.push(m(e))}));var tt=n(10);function nt(e){s.state.gameData.modal=e,s.update()}function at(){s.state.gameData.modal="",s.update()}function it(e){var t=e.children,n=e.style;return console.log(t),Object(g.jsx)("div",{className:"modal",children:Object(g.jsx)("div",{className:"shade",children:Object(g.jsx)("div",{className:"container",style:n,children:t})})})}function ct(e){var t=e.tile,n=e.onClick;if(!t)return null;var a=t.config;return Object(g.jsxs)("div",{className:"tile-details",onClick:n,children:[Object(g.jsx)("div",{className:"name",children:a.name}),Object(g.jsx)("div",{className:"rarity",children:j[a.rarity]}),Object(g.jsx)(t.config.icon,{}),Object(g.jsx)("div",{className:"description",children:a.description&&a.description()})]})}function rt(){var e=s.state.gameData.tilesToPick;function t(e){e&&R(e),s.state.gameData.modal="",s.state.gameData.tilesToPick=[],A(),at()}return Object(g.jsxs)(it,{children:[Object(g.jsx)("h1",{children:"Pick New Tile"}),Object(g.jsx)("div",{className:"pick-a-tile",children:e.map((function(e){return Object(g.jsxs)("div",{className:"option",children:[Object(g.jsx)(ct,{tile:e},e.id),Object(g.jsx)("button",{onClick:function(){t(e)},children:"Select"})]})}))}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return t()},children:"Skip"})]})}function st(){var e=s.state.gameData,t=Y();return Object(g.jsx)(it,{style:{width:"50em"},children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Inventory"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Game Tiles"}),Object(g.jsx)(Xe,{tiles:e.gameTiles})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Deck"}),Object(g.jsxs)("div",{style:{background:t>1?"red":"none"},children:["Deck Score: ",t.toFixed(2)]}),Object(g.jsx)(Xe,{tiles:e.deckTiles})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Owned Inventory"}),Object(g.jsx)(Xe,{tiles:e.ownedTiles})]}),e.superUser&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"All Tiles"}),Object(g.jsx)(Xe,{tiles:Fe,onClickTile:function(t){e.ownedTiles.find((function(e){return e.config.id===t.config.id}))||e.ownedTiles.push(m(t.config))}})]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:at,children:"Close"})]})})}var ot=[{id:"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d",name:"Board Width",cost:function(){return 0},buy:function(){s.state.gameData.gridWidth+=1,H(),s.update()},isComplete:function(){return!1}},{id:"1e0ab330-8ec9-4e41-933d-75251ffa5ee5",name:"Board Height",cost:function(){return 0},buy:function(){s.state.gameData.gridHeight+=1,H(),s.update()},isComplete:function(){return!1}},{id:"0245c559-dd55-4f93-a626-53cc06b17d42",name:"XYZ",cost:function(){return 0},buy:function(){},isComplete:function(){return!1}}];function lt(){return Object(g.jsx)("div",{className:"upgrades",children:ot.map((function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:e.name}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:e.buy,children:"Buy"})})]},e.id)}))})}function dt(){return Object(g.jsxs)(it,{children:[Object(g.jsx)("h1",{children:"Upgrades"}),Object(g.jsx)(lt,{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:at,children:"Close"})]})}function ut(){var e=s.state.gameData;return Object(g.jsxs)(it,{children:[Object(g.jsx)("h1",{children:"Intro"}),Object(g.jsxs)("div",{children:["You are a craftsman who's father just passed, leaving you his shop and a few personal possessions. One of these was a well worn rune that you had never seen before... what could it possibly be?",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Taxes"}),"As a shop owner you must pay taxes. As time goes on you are given more time, but also expected to pay more taxes.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Getting Items"}),"Every day you will get new shipments of items, which you are then able to use for profit. What happens on the day will be completely up to chance.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"At the end of the day you will also have the opprtunity to select from additional items to be delivered to your shop.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("h3",{children:"Item effects"}),"As a craftsman you are able to utilize items in different ways to produce even more valuable or useful items."]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){e.flags.introDismissed=!0,s.update()},children:"Begin your journey"})]})}function ft(){var e=s.state.gameData,t=V[e.currentTaxPeriod];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{fontSize:"3em"},children:[e.totalCoins,Object(g.jsx)("span",{className:"icon-em",children:Object(g.jsx)(T,{})})," ","/ ",t.taxAmount,Object(g.jsx)("span",{className:"icon-em",children:Object(g.jsx)(T,{})})," ","taxes due in ",t.totalDays-e.currentTaxPeriodDay," Days"]}),Object(g.jsxs)("div",{style:{float:"right"},children:["Tax Period: ",e.currentTaxPeriod]}),Object(g.jsxs)("div",{children:["Saved: ",e.savedCoins,Object(g.jsx)(v,{Icon:T})]})]})}function jt(){switch(s.state.gameData.modal){case"PickNewTile":return Object(g.jsx)(rt,{});case"Inventory":return Object(g.jsx)(st,{});case"Upgrades":return Object(g.jsx)(dt,{})}return null}function bt(){var e=s.state.gameData;return Object(g.jsxs)("div",{className:"app",children:[!e.flags.introDismissed&&Object(g.jsx)(ut,{}),Object(g.jsx)(jt,{}),Object(g.jsxs)("div",{className:"version",children:["Version: ",tt.version]}),Object(g.jsxs)("div",{className:"main-container",children:[Object(g.jsx)(ft,{}),Object(g.jsxs)("div",{children:[Object(g.jsx)("br",{}),Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(g.jsx)($e,{boardTiles:e.boardTiles,gameTiles:e.gameTiles,width:e.gridWidth,height:e.gridHeight})}),Object(g.jsxs)("div",{style:{fontSize:"2em",textAlign:"center"},children:["Board value ",!!e.boardValue&&e.boardValue||0,Object(g.jsx)(v,{Icon:T})]}),!s.state.spinning&&Object(g.jsx)("button",{onClick:U,style:{marginTop:"0.5em"},children:"Spin"}),Object(g.jsxs)("div",{style:{marginTop:"1em"},children:[Object(g.jsx)("button",{onClick:function(){return nt("Inventory")},children:"Inventory"}),Object(g.jsx)("button",{onClick:function(){return nt("Upgrades")},children:"Upgrades"})]}),Object(g.jsx)("br",{})]}),!!e.events.length&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Events"}),Object(g.jsx)(et,{events:e.events}),Object(g.jsx)("br",{})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"Options"}),Object(g.jsx)("button",{onClick:function(){Le(),A(),s.update()},children:"Reset All Game Data"}),Object(g.jsx)("button",{onClick:function(){A()},children:"Save Game Data"}),Object(g.jsx)("button",{onClick:S,children:"End Round"})]})]})]})}function ht(){return Object(g.jsx)(g.Fragment,{children:s.state.selectedTile&&Object(g.jsxs)("div",{style:{position:"fixed",top:"0em",left:"0em",zIndex:1e6,padding:"1em",background:"#333",boxShadow:"0em 0em 1em 0em #000"},children:[Object(g.jsx)(ct,{tile:s.state.selectedTile}),Object(g.jsx)("button",{onClick:function(){s.state.selectedTile=void 0,s.update()},children:"Close"})]})})}Ye(),Ye();var mt=function(){var e=Object(a.useState)(0)[1];Object(a.useEffect)((function(){s._update=e}),[e]),s.state.gameData||Le();var t=null;return t=s.state.gameData.roundEnded?Object(g.jsx)(qe,{}):Object(g.jsx)(bt,{}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ht,{}),t]})};r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(mt,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.81284e99.chunk.js.map