{"version":3,"sources":["lib/store.ts","classes/TileConfig.ts","config/tiles/rarities.ts","lib/createTile.ts","config/tiles/Icon.tsx","config/tiles/misc/icons/coin.png","config/tiles/misc/icons/index.tsx","config/tiles/misc/index.tsx","config/tiles/lib/iterateAdjacentTiles.ts","config/tiles/lib/hasCategory.ts","lib/utils.ts","lib/static.ts","lib/saveGameData.ts","config/taxPeriods.ts","actions/game.ts","lib/game.ts","config/tiles/lib/removeTile.ts","config/tiles/chests/icons/key.png","config/tiles/chests/icons/chest1.png","config/tiles/chests/icons/chest2.png","config/tiles/chests/icons/chest3.png","config/tiles/chests/icons/chest4.png","config/tiles/chests/icons/index.tsx","config/tiles/chests/index.tsx","config/tiles/mining/icons/pickaxe.png","config/tiles/mining/icons/rock.png","config/tiles/mining/icons/oreCoal.png","config/tiles/mining/icons/oreCopper.png","config/tiles/mining/icons/oreIron.png","config/tiles/mining/icons/oreSilver.png","config/tiles/mining/icons/index.tsx","config/tiles/mining/index.tsx","config/tiles/categories.ts","config/tiles/potions/icons/elixer1.png","config/tiles/potions/icons/elixer2.png","config/tiles/potions/icons/healthPotion1.png","config/tiles/potions/icons/healthPotion2.png","config/tiles/potions/icons/manaPotion1.png","config/tiles/potions/icons/manaPotion2.png","config/tiles/lib/findAdjacent.ts","config/tiles/lib/replaceTile.ts","config/tiles/potions/index.ts","config/tiles/potions/icons/index.tsx","config/tiles/empty/index.tsx","config/tiles/index.ts","lib/updateGameData.ts","lib/newGame.ts","lib/loadGameData.ts","components/Tile.tsx","components/Inventory.tsx","lib/newRound.ts","views/RoundEnd.tsx","components/Board.tsx","components/GameEvents.tsx","actions/modal.ts","components/Modal.tsx","components/TileDetails.tsx","views/modals/PickNewTileModal.tsx","views/modals/InventoryModal.tsx","components/Upgrades.tsx","views/modals/UpgradesModal.tsx","views/modals/IntroModal.tsx","views/MainGame.tsx","App.tsx","index.tsx"],"names":["store","state","gameData","spinning","selectedTile","_update","value","update","Math","random","window","TileConfig","properties","id","name","icon","rarity","categories","description","calculateValue","context","onRemove","createMeta","topStat","this","Object","assign","COMMON","UNCOMMON","RARE","LEGENDARY","rarityNames","maxRarity","createTile","tileConfig","meta","console","error","Error","emptyTileConfig","uuid","config","effects","data","spinValue","totalSpins","totalAppearances","highlight","Icon","image","className","src","alt","onClick","TextIcon","iconCache","Map","getIcon","get","Coin","coin","tileConfigsMap","tileConfigs","iterateAdjacentTiles","callback","adjecentIndexes","getAdjacentIndexes","getTiles","map","hasCategory","tile","category","includes","randomInt","min","max","floor","GAME_ID","saveGameData","localData","localStorage","JSON","parse","gameState","stringify","replaceTileConfigs","ownedTiles","deckTiles","gameTiles","tilesToPick","saveDate","Date","tiles","taxPeriods","totalDays","taxAmount","endRound","roundEnded","savedCoins","totalCoins","lastTotalCoins","findTile","find","addOwnedTile","log","push","addGameTile","newTile","emptyTileIndex","findIndex","splice","pickRandomTile","array","tilesAvailable","reduce","acc","length","setInitialGameTiles","i","fillEmptyTiles","gridWidth","gridHeight","spin","boardTiles","availableGameTiles","availableIndex","gameTile","index","indexOf","generateBoard","resetTiles","forEach","interval","setInterval","clearInterval","boardValue","count","availableTiles","pickedTiles","getTileChances","chances","rand","chanceTotal","chance","pickTiles","modal","nextTaxPeriodDay","calculateBoardTileValue","isAdjacent","originIndex","checkIndex","width","height","tileIndexes","boardIndex","startIndex","indexes","taxPeriod","currentTaxPeriod","currentTaxPeriodDay","newTotalCoins","addGameEvent","message","events","calculateDeckScore","score","removeTile","removeValue","gameTilesIndex","replaceTile","Chest1","chest1","Small_Chest","Chest2","chest2","Medium_Chest","Chest3","chest3","Large_Chest","Chest4","chest4","Dark_Chest","createChestConfig","baseValue","Key","key","activated","Pickaxe","pickaxe","Coal","oreCoal","OreCopper","oreCopper","Copper_Ore","OreIron","oreIron","Iron_Ore","OreSilver","oreSilver","Silver_Ore","uses","broken","Rock","rock","findAdjacent","item","createElixer","foundTiles","Small_Elixer","createNextPotion","nextConfig","Small_Health_Potion","healthPotion1","Medium_Health_Potion","healthPotion2","Small_Mana_Potion","manaPotion1","Medium_Mana_Potion","manaPotion2","elixer1","Medium_Elixer","elixer2","Empty","empty","misc","mining","potions","chests","tileName","replaceAll","values","tilesById","tileInstances","updateGameData","superUser","deckTileIds","flags","addTile","getTileConfigByName","tileId","addDeckTile","newGame","buildDeck","loadGameData","updateTileConfigs","Tile","showValue","fade","join","Inventory","onClickTile","newRound","RoundEnd","deckScore","tileRarityCost","rarityValue","rarityCount","pow","getRemainingTiles","availableTilesByRarity","keys","allTilesByRarity","ownedRarityCounts","rarityName","cost","enabled","rarityTiles","buyTileRarity","style","background","toFixed","otherTile","ownedTile","Board","fontSize","gridTemplateColumns","gridTemplateRows","emptyTileInstance","repeat","split","_","deckIndex","GameEvents","event","set","openModal","modalName","closeModal","Modal","children","TileDetails","PickNewTileModal","pickTile","InventoryModal","upgrades","buy","isComplete","Upgrades","upgrade","UpgradesModal","IntroModal","introDismissed","Header","float","Modals","MainGame","packageJson","version","display","justifyContent","textAlign","marginTop","SelectedTile","position","top","left","zIndex","padding","boxShadow","undefined","App","useState","useEffect","view","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.81284e99.chunk.js","sourcesContent":["import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport const store = {\n  state: {\n    gameData: (null as unknown) as GameData,\n    spinning: false,\n    selectedTile: (null as unknown) as TileInstance | undefined,\n  },\n  _update: (value: number) => {}, // The function that triggers an update\n  update: (): void => {\n    store._update(Math.random());\n  },\n};\n\n(window as any).store = store;\n","import { TileInstance, TileMeta } from \"../types/TileInstance\";\nimport { TileValueContext } from \"../types/TileValueContext\";\n\nexport type RemoveValue = {\n  value?: number;\n  tiles?: TileInstance[];\n};\n\nexport class TileConfig {\n  id: string = \"\";\n  name?: string = \"\";\n  icon: any;\n  rarity: number = 0;\n  categories: string[] = [];\n  description?: () => any;\n  calculateValue: (context: TileValueContext) => number = (context) => {\n    return 0;\n  };\n  onRemove?: (context: TileValueContext) => RemoveValue | void;\n  createMeta?: () => TileMeta;\n  topStat?: (tile: TileInstance) => number;\n\n  constructor(properties: TileConfig) {\n    this.name = \"\";\n\n    // This is just easy\n    Object.assign(this, properties);\n  }\n}\n\nexport type TileConfigMap = {\n  [key: string]: TileConfig;\n};\n","export const rarity = {\n  COMMON: 0,\n  UNCOMMON: 1,\n  RARE: 2,\n  LEGENDARY: 3,\n};\n\nexport const rarityNames = [\"Common\", \"Uncommon\", \"Rare\", \"Legendary\"];\n\nexport const maxRarity = rarity.LEGENDARY;\n","import { TileConfig } from \"../classes/TileConfig\";\nimport { TileData, TileInstance, TileMeta } from \"../types/TileInstance\";\nimport { v4 as uuid } from \"uuid\";\nimport { emptyTileConfig } from \"../config/tiles\";\n\nexport function createTileData() {\n  const tileData: TileData = {\n    spinValue: 0,\n    totalSpins: 0,\n    totalAppearances: 0,\n    highlight: false,\n  };\n\n  return tileData;\n}\n\nexport function createTile(tileConfig?: TileConfig, meta?: TileMeta) {\n  if (!tileConfig) {\n    console.error(\n      new Error(\n        \"Undefined tile config for creating a tile. Adding an empty tile.\"\n      )\n    );\n    tileConfig = emptyTileConfig;\n  }\n\n  if (!meta && tileConfig.createMeta) {\n    meta = tileConfig.createMeta();\n  }\n\n  const tile: TileInstance = {\n    id: uuid(),\n    config: tileConfig,\n    effects: {},\n    data: createTileData(),\n    meta: meta ?? {},\n  };\n\n  return tile;\n}\n","import { store } from \"../../lib/store\";\nimport { createTile } from \"../../lib/createTile\";\nimport { tileConfigsMap } from \".\";\nimport { TileConfig } from \"../../classes/TileConfig\";\n\nconst empty = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\ninterface Props {\n  image?: any;\n  config?: TileConfig;\n}\n\nexport function Icon({ image, config: tileConfig }: Props) {\n  return (\n    <img\n      className=\"icon\"\n      src={image}\n      alt=\"\"\n      onClick={() => {\n        if (tileConfig) {\n          store.state.selectedTile = createTile(tileConfig);\n          store.update();\n        }\n      }}\n    />\n  );\n}\n\nexport function TextIcon({ Icon }: any) {\n  return (\n    <span className=\"text-icon\">\n      <Icon />\n    </span>\n  );\n}\n\n// Cache icon instances for faster reference\n// There is no need to create one for each new instance\nconst iconCache = new Map<string, JSX.Element>();\n\nexport function getIcon(image: string, config: TileConfig) {\n  let icon = iconCache.get(config.name!);\n\n  if (!icon) {\n    icon = <Icon image={image} config={config} />;\n  }\n\n  return icon;\n}\n\nexport const Empty = () => getIcon(empty, tileConfigsMap.Empty);\n","export default __webpack_public_path__ + \"static/media/coin.3480412c.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport coin from \"./coin.png\";\n\n// Icons\nexport const Coin = () => getIcon(coin, tileConfigsMap.Coin);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { Coin } from \"./icons\";\n\nconst tileConfigs = {\n  Coin: new TileConfig({\n    id: \"d9c7f23b-a3e9-4b4e-af69-4a026998d40a\",\n    icon: Coin,\n    rarity: rarity.COMMON,\n    categories: [\"coin\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  }),\n};\n\nexport default tileConfigs;\n","import { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function iterateAdjacentTiles(\n  context: TileValueContext,\n  callback: any\n): TileInstance[] {\n  const adjecentIndexes = context.getAdjacentIndexes();\n\n  const tiles = context.getTiles(adjecentIndexes);\n\n  return tiles.map(callback);\n}\n","import { TileInstance } from \"../../../types/TileInstance\";\n\nexport function hasCategory(tile: TileInstance, category: string) {\n  return tile.config.categories.includes(category);\n}\n","export function randomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","export const GAME_ID = \"9c0617fc-daf3-4f9c-943e-073f698ac0b8\";\n","import { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\n\nexport function saveGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  // Simple clone of just the data\n  const gameState = JSON.parse(JSON.stringify(store.state.gameData));\n\n  replaceTileConfigs(gameState.ownedTiles);\n  replaceTileConfigs(gameState.deckTiles);\n  replaceTileConfigs(gameState.gameTiles);\n  replaceTileConfigs(gameState.tilesToPick);\n\n  localData.gameState = gameState;\n  localData.saveDate = new Date();\n\n  localStorage[`${GAME_ID}`] = JSON.stringify(localData);\n}\n\nfunction replaceTileConfigs(tiles: any[]) {\n  for (const tile of tiles) {\n    tile.config = { id: tile.config.id };\n  }\n}\n","export const taxPeriods = [\n  {\n    totalDays: 0, // This will increment on starting a new game\n    taxAmount: 0,\n  },\n  {\n    totalDays: 5,\n    taxAmount: 25,\n  },\n  {\n    totalDays: 6,\n    taxAmount: 50,\n  },\n  {\n    totalDays: 7,\n    taxAmount: 100,\n  },\n  {\n    totalDays: 8,\n    taxAmount: 200,\n  },\n  {\n    totalDays: 9,\n    taxAmount: 400,\n  },\n  {\n    totalDays: 10,\n    taxAmount: 800,\n  },\n];\n","import { saveGameData } from \"../lib/saveGameData\";\nimport { store } from \"../lib/store\";\n\nexport function endRound() {\n  const { gameData } = store.state;\n\n  gameData.roundEnded = true;\n  gameData.savedCoins += gameData.totalCoins;\n  gameData.lastTotalCoins = gameData.totalCoins;\n  gameData.tilesToPick = [];\n\n  store.update();\n\n  saveGameData();\n}\n","import { emptyTileConfig } from \"../config/tiles\";\nimport { maxRarity, rarity } from \"../config/tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { createTile } from \"./createTile\";\nimport { randomInt } from \"./utils\";\nimport { store } from \"./store\";\nimport { saveGameData } from \"./saveGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\nimport { v4 as uuid } from \"uuid\";\nimport { TileConfig } from \"../classes/TileConfig\";\nimport { endRound } from \"../actions/game\";\n\nexport function findTile(tiles: TileInstance[], id: string) {\n  return tiles.find((tile) => {\n    return tile.config.id === id;\n  });\n}\n\nexport function addOwnedTile(tileConfig: TileConfig = emptyTileConfig) {\n  const { ownedTiles } = store.state.gameData;\n\n  if (findTile(ownedTiles, tileConfig.id)) {\n    console.log(`Already own tile ${tileConfig.name}`);\n    return;\n  }\n\n  console.log(`Adding owned tile ${tileConfig.name}`);\n\n  const tile = createTile(tileConfig);\n\n  ownedTiles.push(tile);\n}\n\nexport function addDeckTile(tileId?: string) {\n  if (!tileId) {\n    return;\n  }\n\n  const { deckTileIds } = store.state.gameData;\n\n  if (!deckTileIds.includes(tileId)) {\n    deckTileIds.push(tileId);\n  }\n}\nexport function addGameTile(newTile: TileInstance) {\n  const { gameTiles } = store.state.gameData;\n\n  const emptyTileIndex = gameTiles.findIndex((tile) => {\n    return tile.config.id === emptyTileConfig.id;\n  });\n\n  if (emptyTileIndex >= 0) {\n    gameTiles.splice(emptyTileIndex, 1, newTile);\n  } else {\n    gameTiles.push(newTile);\n  }\n}\n\nexport function buildDeck() {\n  const { gameData } = store.state;\n  const { deckTileIds, ownedTiles } = gameData;\n\n  gameData.deckTiles = deckTileIds.map((id) => {\n    return findTile(ownedTiles, id) || createTile(emptyTileConfig);\n  });\n}\n\nexport function ArrayRandomItem<T>(array: T[]) {\n  return array[randomInt(0, array.length - 1)];\n}\n\nexport function pickRandomTile(tiles: TileInstance[], maxRarity: number) {\n  const tilesAvailable = tiles.reduce((acc, tile) => {\n    if (tile.config.rarity <= maxRarity) {\n      acc.push(tile);\n    }\n\n    return acc;\n  }, [] as TileInstance[]);\n\n  return ArrayRandomItem<TileInstance>(tilesAvailable);\n}\n\nexport function setInitialGameTiles() {\n  const { gameData } = store.state;\n  const { deckTiles } = gameData;\n\n  const gameTiles: TileInstance[] = [];\n\n  for (let i = 0; i < 5; i++) {\n    const tile = pickRandomTile(deckTiles, rarity.COMMON);\n    gameTiles.push(createTile(tile.config));\n  }\n\n  gameData.gameTiles = gameTiles;\n\n  fillEmptyTiles();\n}\n\nexport function fillEmptyTiles() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n\n  for (let i = 0; gameTiles.length < gridWidth * gridHeight; i++) {\n    gameTiles.push(createTile(emptyTileConfig));\n  }\n}\n\nexport function generateBoard() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n  const boardTiles = [];\n  const availableGameTiles = [...gameTiles]; // New array\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    // Get a random index\n    const availableIndex = Math.floor(Math.random() * availableGameTiles.length);\n    const gameTile = availableGameTiles[availableIndex];\n    const index = gameTiles.indexOf(gameTile);\n\n    // console.log(index);\n    boardTiles.push(index);\n\n    availableGameTiles.splice(availableIndex, 1);\n  }\n\n  return boardTiles;\n}\n\nexport function resetTiles() {\n  const { gridWidth, gridHeight, gameTiles, boardTiles } = store.state.gameData;\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    const tile = gameTiles[boardTiles[i]];\n    tile.data.spinValue = 0;\n  }\n}\n\nexport function spin() {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight, deckTiles } = gameData;\n\n  gameData.boardTiles = generateBoard();\n\n  resetTiles();\n  processBoard();\n\n  store.state.spinning = true;\n  store.update();\n\n  let index = 0;\n  const interval = setInterval(() => {\n    const { boardTiles, gameTiles } = gameData;\n\n    if (index > 0 && index <= gridWidth * gridHeight) {\n      const lastTile = gameTiles[boardTiles[index - 1]];\n      lastTile.data.highlight = false;\n    }\n\n    if (index > gridWidth * gridHeight) {\n      // Spin finished\n\n      clearInterval(interval);\n\n      store.state.spinning = false;\n      store.state.gameData.totalCoins += store.state.gameData.boardValue;\n      store.state.gameData.tilesToPick = pickTiles(deckTiles);\n      store.state.gameData.modal = \"PickNewTile\";\n      store.update();\n\n      nextTaxPeriodDay();\n\n      saveGameData();\n\n      return;\n    }\n\n    if (index < gridWidth * gridHeight) {\n      const tile = gameTiles[boardTiles[index]];\n      tile.data.highlight = true;\n      tile.data.totalAppearances++;\n      tile.data.spinValue = calculateBoardTileValue(tile, index);\n    }\n\n    index++;\n\n    let boardValue = 0;\n\n    for (const boardTilesIndex of boardTiles) {\n      boardValue += gameTiles[boardTilesIndex].data.spinValue;\n    }\n    store.state.gameData.boardValue = boardValue;\n\n    store.update();\n  }, 100);\n}\n\nexport function processBoard() {\n  const { gameTiles } = store.state.gameData;\n\n  // Add to totalSpins\n  gameTiles.forEach((tile) => {\n    tile.data.totalSpins++;\n  });\n}\n\nexport function isAdjacent(originIndex: number, checkIndex: number, width: number, height: number) {\n  // Up / Down or out of bounds\n  if (checkIndex < 0 || checkIndex >= width * height) {\n    return false;\n  }\n\n  // Left / Right\n  if (originIndex + 1 === checkIndex || originIndex - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor(originIndex / width)) {\n      return false;\n    }\n  }\n\n  // Down > Left / Right\n  if (originIndex + width + 1 === checkIndex || originIndex + width - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor((originIndex + width) / width)) {\n      return false;\n    }\n  }\n\n  // Up > Left / Right\n  if (originIndex - width + 1 === checkIndex || originIndex - width - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor((originIndex - width) / width)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getAdjacentIndexes(startIndex: number, width: number, height: number): number[] {\n  const indexes: number[] = [];\n\n  indexes.push(startIndex + width);\n  indexes.push(startIndex - width);\n  indexes.push(startIndex + 1);\n  indexes.push(startIndex - 1);\n\n  indexes.push(startIndex + width - 1);\n  indexes.push(startIndex + width + 1);\n  indexes.push(startIndex - width - 1);\n  indexes.push(startIndex - width + 1);\n\n  for (let i = 7; i >= 0; i--) {\n    if (!isAdjacent(startIndex, indexes[i], width, height)) {\n      indexes.splice(i, 1);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getTiles(tileIndexes: number[]) {\n  const { boardTiles, gameTiles } = store.state.gameData;\n\n  return tileIndexes.map((index) => {\n    return gameTiles[boardTiles[index]];\n  });\n}\n\nexport function calculateBoardTileValue(tile: TileInstance, boardIndex: number) {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight } = gameData;\n\n  const context = {\n    tile,\n    gameData,\n    getAdjacentIndexes: () => {\n      return getAdjacentIndexes(boardIndex, gridWidth, gridHeight);\n    },\n    getTiles,\n  };\n\n  return tile.config.calculateValue(context);\n}\n\nfunction getTileChances(tiles: TileInstance[]) {\n  const chances: number[] = [];\n  let chanceTotal = 0;\n\n  for (const tile of tiles) {\n    // The higher the rarity, the lower the chance\n    chanceTotal += maxRarity + 1 - tile.config.rarity;\n    chances.push(chanceTotal);\n  }\n\n  return { chances, chanceTotal };\n}\n\nfunction pickTiles(tiles: TileInstance[], count = 3) {\n  const availableTiles = [...tiles];\n  const pickedTiles = [];\n\n  for (let i = 0; i < count; i++) {\n    const { chances, chanceTotal } = getTileChances(availableTiles);\n\n    const rand = randomInt(0, chanceTotal);\n\n    const index = chances.findIndex((chance) => {\n      return chance >= rand;\n    });\n\n    const tile = availableTiles.splice(index, 1)[0];\n\n    if (tile) {\n      pickedTiles.push(createTile(tile.config));\n    }\n\n    // const index = randomInt(0, availableTiles.length - 1);\n    // const tile = availableTiles.splice(index, 1)[0];\n\n    // if (tile) {\n    //   pickedTiles.push(createTile(tile.config));\n    // }\n  }\n\n  return pickedTiles;\n}\n\nexport function nextTaxPeriodDay() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  gameData.currentTaxPeriodDay++;\n\n  if (gameData.currentTaxPeriodDay >= taxPeriod.totalDays) {\n    gameData.currentTaxPeriod++;\n    gameData.currentTaxPeriodDay = 1;\n\n    const newTotalCoins = gameData.totalCoins - taxPeriod.taxAmount;\n\n    if (newTotalCoins < 0) {\n      endRound();\n    }\n\n    gameData.totalCoins = newTotalCoins;\n  }\n\n  store.update();\n}\n\nexport function addGameEvent({ message = \"\" }: any) {\n  const { gameData } = store.state;\n\n  gameData.events.push({\n    id: uuid(),\n    message,\n  });\n\n  console.log(`GAME EVENT: ${message}`);\n}\n\nexport function calculateDeckScore() {\n  const { gameData } = store.state;\n  let score = 0;\n\n  for (const tile of gameData.deckTiles) {\n    score += tile.config.rarity;\n  }\n\n  return score / gameData.deckTiles.length;\n}\n","import { emptyTileConfig } from \"..\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { addGameTile } from \"../../../lib/game\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function removeTile(tile: TileInstance, context: TileValueContext) {\n  let removeValue;\n\n  if (tile.config.onRemove) {\n    removeValue = tile.config.onRemove(context);\n  }\n\n  const { gameTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n\n  // Default the replacement tile to an empty one\n  let replaceTile = createTile(emptyTileConfig);\n\n  if (removeValue) {\n    let { tiles } = removeValue;\n\n    // Replace the tile with the appropriate value\n    if (tiles?.length) {\n      replaceTile = tiles[0];\n\n      // Add the remaining tiles\n      for (let i = 1; i < tiles.length; i++) {\n        addGameTile(tiles[i]);\n      }\n    }\n\n    // Apply the value\n    if (removeValue.value) {\n      replaceTile.data.spinValue = removeValue.value;\n    }\n  }\n\n  gameTiles[gameTilesIndex] = replaceTile;\n}\n","export default __webpack_public_path__ + \"static/media/key.0629d73b.png\";","export default __webpack_public_path__ + \"static/media/chest1.b4054229.png\";","export default __webpack_public_path__ + \"static/media/chest2.d4ed67d0.png\";","export default __webpack_public_path__ + \"static/media/chest3.888bf5be.png\";","export default __webpack_public_path__ + \"static/media/chest4.28dffa1b.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport key from \"./key.png\";\nimport chest1 from \"./chest1.png\";\nimport chest2 from \"./chest2.png\";\nimport chest3 from \"./chest3.png\";\nimport chest4 from \"./chest4.png\";\n\n// Icons\nexport const Key = () => getIcon(key, tileConfigsMap.Key);\nexport const Chest1 = () => getIcon(chest1, tileConfigsMap.Small_Chest);\nexport const Chest2 = () => getIcon(chest2, tileConfigsMap.Medium_Chest);\nexport const Chest3 = () => getIcon(chest3, tileConfigsMap.Large_Chest);\nexport const Chest4 = () => getIcon(chest4, tileConfigsMap.Dark_Chest);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Chest1, Chest2, Chest3, Chest4, Key } from \"./icons\";\nimport { Coin } from \"../misc/icons\";\n\nfunction createChestConfig({ baseValue, removeValue }: any) {\n  return {\n    categories: [\"chest\"],\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives {removeValue} <Coin />\n        </>\n      );\n    },\n    calculateValue: (context: TileValueContext) => {\n      return baseValue;\n    },\n    onRemove: (context: TileValueContext) => {\n      return { value: removeValue };\n    },\n  };\n}\n\nconst tileConfigs = {\n  Key: new TileConfig({\n    id: \"2ef31449-bf1d-4cee-8e93-e0665fb9942a\",\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          The key unlocks <Chest1 /> <Chest2 /> <Chest3 /> <Chest4 />, destroying both in the process\n        </>\n      );\n    },\n    icon: Key,\n    rarity: rarity.COMMON,\n    categories: [\"key\"],\n    calculateValue: (context: TileValueContext) => {\n      let activated = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (hasCategory(tile, \"chest\")) {\n          // Remove the tile\n          removeTile(tile, context);\n          activated = true;\n        }\n      });\n\n      if (activated) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 1;\n    },\n  }),\n  Small_Chest: new TileConfig({\n    id: \"834bf40d-0a3d-4e20-83a0-4e3aa233840c\",\n    icon: Chest1,\n    rarity: rarity.COMMON,\n    ...createChestConfig({ baseValue: 1, removeValue: 10 }),\n  }),\n  Medium_Chest: new TileConfig({\n    id: \"c87ea7e4-5479-4aa7-9033-0859d191390b\",\n    icon: Chest2,\n    rarity: rarity.UNCOMMON,\n    ...createChestConfig({ baseValue: 2, removeValue: 20 }),\n  }),\n  Large_Chest: new TileConfig({\n    id: \"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1\",\n    icon: Chest3,\n    rarity: rarity.RARE,\n    ...createChestConfig({ baseValue: 3, removeValue: 30 }),\n  }),\n  Dark_Chest: new TileConfig({\n    id: \"3422f3a8-bd1a-4549-a9ff-d0ed0621d646\",\n    icon: Chest4,\n    rarity: rarity.LEGENDARY,\n    ...createChestConfig({ baseValue: 4, removeValue: 40 }),\n  }),\n};\n\nexport default tileConfigs;\n","export default __webpack_public_path__ + \"static/media/pickaxe.9f91b8f2.png\";","export default __webpack_public_path__ + \"static/media/rock.cffc8f04.png\";","export default __webpack_public_path__ + \"static/media/oreCoal.d3a30adc.png\";","export default __webpack_public_path__ + \"static/media/oreCopper.ef951831.png\";","export default __webpack_public_path__ + \"static/media/oreIron.45ad7af5.png\";","export default __webpack_public_path__ + \"static/media/oreSilver.3e3113ee.png\";","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport pickaxe from \"./pickaxe.png\";\nimport rock from \"./rock.png\";\n\nimport oreCoal from \"./oreCoal.png\";\nimport oreCopper from \"./oreCopper.png\";\nimport oreExoticPurple from \"./oreExoticPurple.png\";\nimport oreGold from \"./oreGold.png\";\nimport oreIron from \"./oreIron.png\";\nimport oreMithril from \"./oreMithril.png\";\nimport oreSilver from \"./oreSilver.png\";\n\n// Icons\nexport const Pickaxe = () => getIcon(pickaxe, tileConfigsMap.Pickaxe);\nexport const Rock = () => getIcon(rock, tileConfigsMap.Rock);\n\nexport const Coal = () => getIcon(oreCoal, tileConfigsMap.Coal);\nexport const OreCopper = () => getIcon(oreCopper, tileConfigsMap.Copper_Ore);\nexport const OreIron = () => getIcon(oreIron, tileConfigsMap.Iron_Ore);\nexport const OreSilver = () => getIcon(oreSilver, tileConfigsMap.Silver_Ore);\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { Coal, OreCopper, OreIron, OreSilver, Pickaxe, Rock } from \"./icons\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { tileConfigsMap } from \"..\";\nimport { addGameEvent } from \"../../../lib/game\";\n\nconst tileConfigs = {\n  Pickaxe: new TileConfig({\n    id: \"102f6200-dd6b-434f-b486-67ccc425cc4d\",\n    name: \"\",\n    description: () => {\n      return <>Breaks rocks, has 3 uses</>;\n    },\n    icon: Pickaxe,\n    rarity: rarity.COMMON,\n    categories: [\"mining\"],\n    createMeta: () => {\n      return { uses: 3 };\n    },\n    topStat: (tile: TileInstance) => {\n      return tile.meta.uses;\n    },\n    calculateValue: (context: TileValueContext) => {\n      let broken = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (broken) {\n          return;\n        }\n\n        if (hasCategory(tile, \"rock\")) {\n          removeTile(tile, context);\n          console.log(context.tile.meta);\n          context.tile.meta.uses--;\n\n          if (context.tile.meta.uses === 0) {\n            broken = true;\n            addGameEvent({ message: \"A Pickaxe broke\" });\n          }\n        }\n      });\n\n      if (broken) {\n        // Remove self\n        removeTile(context.tile, context);\n      }\n\n      return 1;\n    },\n  }),\n  Rock: new TileConfig({\n    id: \"89c89fb8-b343-4767-ba9f-78b4586b4ceb\",\n    name: \"\",\n    description: () => {\n      return (\n        <>\n          Broken by <Pickaxe />, gives one of <Coal /> <OreCopper /> <OreIron /> <OreSilver />\n        </>\n      );\n    },\n    icon: Rock,\n    rarity: rarity.COMMON,\n    categories: [\"rock\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onRemove: (context: TileValueContext) => {\n      const newTile = createTile(tileConfigsMap.Coal);\n\n      addGameEvent({\n        message: `A broken Rock yielded a ${newTile.config.name}`,\n      });\n\n      return { tiles: [newTile] };\n    },\n  }),\n  Coal: new TileConfig({\n    id: \"48217c09-300c-44b0-803e-19f51346227b\",\n    icon: Coal,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      let total = 1;\n\n      // iterateAdjacentTiles(context, (tile: TileInstance) => {\n      //   if (tile.config.name === \"Coal\") {\n      //     total += 1;\n      //   }\n      // });\n\n      return total;\n    },\n  }),\n  Copper_Ore: new TileConfig({\n    id: \"35e8e354-dcfb-430c-9401-0035b775f00f\",\n    icon: OreCopper,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  }),\n  Iron_Ore: new TileConfig({\n    id: \"8df321a7-a16d-485e-9b41-aebe784350db\",\n    icon: OreIron,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  }),\n  Silver_Ore: new TileConfig({\n    id: \"7fa9e325-ca81-48cd-a7d5-8b1203354218\",\n    icon: OreSilver,\n    rarity: rarity.UNCOMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  }),\n};\n\nexport default tileConfigs;\n","export const categories = {\n  POTION: \"potion\",\n  SMALL_HEALTH_POTION: \"small-health-potion\",\n  MEDIUM_HEALTH_POTION: \"medium-health-potion\",\n  SMALL_MANA_POTION: \"small-mana-potion\",\n  MEDIUM_MANA_POTION: \"medium-mana-potion\",\n  SMALL_ELIXER: \"small-elixer\",\n  MEDIUM_ELIXER: \"medium-elixer\",\n};\n","export default __webpack_public_path__ + \"static/media/elixer1.126eb52b.png\";","export default __webpack_public_path__ + \"static/media/elixer2.f677e6cf.png\";","export default __webpack_public_path__ + \"static/media/healthPotion1.2cc42067.png\";","export default __webpack_public_path__ + \"static/media/healthPotion2.8e645ab4.png\";","export default __webpack_public_path__ + \"static/media/manaPotion1.03ef4a80.png\";","export default __webpack_public_path__ + \"static/media/manaPotion2.f6d761fd.png\";","import { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { hasCategory } from \"./hasCategory\";\nimport { iterateAdjacentTiles } from \"./iterateAdjacentTiles\";\n\nexport function findAdjacent(\n  context: TileValueContext,\n  category: string\n): TileInstance[] {\n  return iterateAdjacentTiles(context, (tile: TileInstance) => {\n    if (hasCategory(tile, category)) {\n      return tile;\n    }\n  }).reduce((acc, item) => {\n    if (item) {\n      acc.push(item);\n    }\n    return acc;\n  }, [] as TileInstance[]);\n}\n","import { calculateBoardTileValue } from \"../../../lib/game\";\nimport { TileInstance } from \"../../../types/TileInstance\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\n\nexport function replaceTile(\n  tile: TileInstance,\n  newTile: TileInstance,\n  context: TileValueContext\n) {\n  const { gameTiles, boardTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n  const boardIndex = boardTiles.indexOf(gameTilesIndex);\n\n  gameTiles[gameTilesIndex] = newTile;\n\n  newTile.data.spinValue = calculateBoardTileValue(newTile, boardIndex);\n}\n","import { TileConfig } from \"../../../classes/TileConfig\";\nimport { createTile } from \"../../../lib/createTile\";\nimport { TileValueContext } from \"../../../types/TileValueContext\";\nimport { categories } from \"../categories\";\nimport { HealthPotion1, HealthPotion2, Elixer1, Elixer2, ManaPotion1, ManaPotion2 } from \"./icons\";\nimport { findAdjacent } from \"../lib/findAdjacent\";\nimport { removeTile } from \"../lib/removeTile\";\nimport { replaceTile } from \"../lib/replaceTile\";\nimport { rarity } from \"../rarities\";\n\nfunction findAndRemoveMatch(category: string, context: TileValueContext) {\n  const foundTiles = findAdjacent(context, category);\n\n  if (foundTiles.length) {\n    console.log(foundTiles);\n    removeTile(foundTiles[0], context);\n    return true;\n  }\n\n  return false;\n}\n\nfunction createElixer(category: string, context: TileValueContext) {\n  const foundTiles = findAdjacent(context, category);\n\n  if (foundTiles.length) {\n    removeTile(foundTiles[0], context);\n    replaceTile(context.tile, createTile(tileConfigs.Small_Elixer), context);\n    return true;\n  }\n\n  return false;\n}\n\nfunction createNextPotion(category: string, nextConfig: TileConfig, context: TileValueContext) {\n  const foundTiles = findAdjacent(context, category);\n\n  if (foundTiles.length >= 2) {\n    removeTile(foundTiles[0], context);\n    removeTile(foundTiles[1], context);\n    replaceTile(context.tile, createTile(nextConfig), context);\n    return true;\n  }\n\n  return false;\n}\n\nconst tileConfigs = {\n  Small_Health_Potion: new TileConfig({\n    id: \"e77dc97d-8d44-45e4-bbad-deb79574092d\",\n    icon: HealthPotion1,\n    rarity: rarity.COMMON,\n    categories: [categories.SMALL_HEALTH_POTION],\n    calculateValue: (context: TileValueContext) => {\n      if (createElixer(categories.SMALL_MANA_POTION, context)) {\n        return 0;\n      }\n\n      if (createNextPotion(categories.SMALL_HEALTH_POTION, tileConfigs.Medium_Health_Potion, context)) {\n        return 0;\n      }\n\n      return 1;\n    },\n  }),\n  Medium_Health_Potion: new TileConfig({\n    id: \"c6d67a75-f151-4503-b04d-2fb535c06c92\",\n    icon: HealthPotion2,\n    rarity: rarity.UNCOMMON,\n    categories: [categories.MEDIUM_HEALTH_POTION],\n    calculateValue: (context: TileValueContext) => {\n      return 2;\n    },\n  }),\n  Small_Mana_Potion: new TileConfig({\n    id: \"d587eba7-246e-46c7-bd55-2f32b0093cf8\",\n    icon: ManaPotion1,\n    rarity: rarity.COMMON,\n    categories: [categories.SMALL_MANA_POTION],\n    calculateValue: (context: TileValueContext) => {\n      if (createElixer(categories.SMALL_HEALTH_POTION, context)) {\n        return 0;\n      }\n\n      if (createNextPotion(categories.SMALL_MANA_POTION, tileConfigs.Medium_Mana_Potion, context)) {\n        return 0;\n      }\n\n      return 1;\n    },\n  }),\n  Medium_Mana_Potion: new TileConfig({\n    id: \"6c067c0f-eefb-43ce-8f81-0aabd19cacc1\",\n    icon: ManaPotion2,\n    rarity: rarity.UNCOMMON,\n    categories: [categories.MEDIUM_MANA_POTION],\n    calculateValue: (context: TileValueContext) => {\n      return 2;\n    },\n  }),\n  Small_Elixer: new TileConfig({\n    id: \"93a94d4e-7a9d-4d1a-9f8a-3b1586530ca0\",\n    icon: Elixer1,\n    rarity: rarity.RARE,\n    categories: [categories.SMALL_ELIXER],\n    calculateValue: (context: TileValueContext) => {\n      if (createNextPotion(categories.SMALL_ELIXER, tileConfigs.Medium_Elixer, context)) {\n        return 0;\n      }\n\n      return 5;\n    },\n  }),\n  Medium_Elixer: new TileConfig({\n    id: \"1fb94f1d-880e-41eb-9a29-f14700a22928\",\n    icon: Elixer2,\n    rarity: rarity.RARE,\n    categories: [categories.MEDIUM_ELIXER],\n    calculateValue: (context: TileValueContext) => {\n      return 10;\n    },\n  }),\n};\n\nexport default tileConfigs;\n","import { tileConfigsMap } from \"../..\";\nimport { getIcon } from \"../../Icon\";\n\n// Images\nimport elixer1 from \"./elixer1.png\";\nimport elixer2 from \"./elixer2.png\";\nimport elixer3 from \"./elixer3.png\";\nimport healthPotion1 from \"./healthPotion1.png\";\nimport healthPotion2 from \"./healthPotion2.png\";\nimport healthPotion3 from \"./healthPotion3.png\";\nimport manaPotion1 from \"./manaPotion1.png\";\nimport manaPotion2 from \"./manaPotion2.png\";\nimport manaPotion3 from \"./manaPotion3.png\";\n\n// Icons\nexport const HealthPotion1 = () => getIcon(healthPotion1, tileConfigsMap.Small_Health_Potion);\nexport const HealthPotion2 = () => getIcon(healthPotion2, tileConfigsMap.Medium_Health_Potion);\n\nexport const ManaPotion1 = () => getIcon(manaPotion1, tileConfigsMap.Small_Mana_Potion);\nexport const ManaPotion2 = () => getIcon(manaPotion2, tileConfigsMap.Medium_Mana_Potion);\n\nexport const Elixer1 = () => getIcon(elixer1, tileConfigsMap.Small_Elixer);\nexport const Elixer2 = () => getIcon(elixer2, tileConfigsMap.Medium_Elixer);\n","import { TileValueContext } from \"../../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { Empty } from \"../Icon\";\nimport { TileConfig } from \"../../../classes/TileConfig\";\n\nconst tileConfigs = {\n  Empty: new TileConfig({\n    id: \"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1\",\n    name: \"\",\n    icon: Empty,\n    rarity: rarity.COMMON,\n    categories: [\"empty\"],\n    calculateValue: (context: TileValueContext) => {\n      return context.tile.data.spinValue || 0;\n    },\n  }),\n};\n\nexport default tileConfigs;\n","import { TileConfig } from \"../../classes/TileConfig\";\n\n// Sets\nimport misc from \"./misc\";\nimport chests from \"./chests\";\nimport mining from \"./mining\";\nimport potions from \"./potions\";\nimport empty from \"./empty\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { createTile } from \"../../lib/createTile\";\n\nexport const emptyTileConfig = empty.Empty;\n\nexport const tileConfigsMap = {\n  ...empty,\n  ...misc,\n  ...mining,\n  ...potions,\n  ...chests,\n};\n\nexport type TileConfigNames = keyof typeof tileConfigsMap;\n\n// Update the names on all tileConfigs\nfor (const tileName in tileConfigsMap) {\n  const tileConfig = (tileConfigsMap as any)[tileName];\n  tileConfig.name = tileName.replaceAll(\"_\", \" \");\n}\n\nconst tileConfigs: TileConfig[] = [...Object.values(tileConfigsMap)];\n\nexport default tileConfigs;\nexport const tilesById = new Map<string, TileConfig>();\nexport const tileInstances: TileInstance[] = [];\n\n// Setup the tiles by Id and name\ntileConfigs.forEach((config) => {\n  tilesById.set(config.id, config);\n  tileInstances.push(createTile(config));\n});\n\nexport function getTileConfigByName(name: TileConfigNames): TileConfig {\n  const tileConfig = tileConfigsMap[name];\n\n  if (!tileConfig) {\n    console.error(new Error(`Tile name \"${name}\" not found`));\n  }\n\n  return tileConfig;\n}\n","import { GameData } from \"../types/GameData\";\n\nexport function updateGameData(gameData: any) {\n  const updateGameData: GameData = gameData;\n\n  if (!updateGameData.superUser) {\n    updateGameData.superUser = false;\n  }\n\n  if (!updateGameData.boardTiles) {\n    updateGameData.boardTiles = [];\n  }\n\n  if (!updateGameData.ownedTiles) {\n    updateGameData.ownedTiles = [];\n  }\n\n  if (!updateGameData.deckTileIds) {\n    updateGameData.deckTileIds = [];\n  }\n\n  if (!updateGameData.deckTiles) {\n    updateGameData.deckTiles = [];\n  }\n\n  if (!updateGameData.gameTiles) {\n    updateGameData.gameTiles = [];\n  }\n\n  if (!updateGameData.tilesToPick) {\n    updateGameData.tilesToPick = [];\n  }\n\n  if (!updateGameData.gridWidth) {\n    updateGameData.gridWidth = 3;\n  }\n\n  if (!updateGameData.gridHeight) {\n    updateGameData.gridHeight = 3;\n  }\n\n  if (!updateGameData.boardValue) {\n    updateGameData.boardValue = 0;\n  }\n\n  if (!updateGameData.totalCoins) {\n    updateGameData.totalCoins = 0;\n  }\n\n  if (!updateGameData.savedCoins) {\n    updateGameData.savedCoins = 0;\n  }\n\n  if (!updateGameData.lastTotalCoins) {\n    updateGameData.lastTotalCoins = 0;\n  }\n\n  if (!updateGameData.currentTaxPeriod) {\n    updateGameData.currentTaxPeriod = 0;\n  }\n\n  if (!updateGameData.currentTaxPeriodDay) {\n    updateGameData.currentTaxPeriodDay = 0;\n  }\n\n  if (!updateGameData.roundEnded) {\n    updateGameData.roundEnded = false;\n  }\n\n  if (!updateGameData.events) {\n    updateGameData.events = [];\n  }\n\n  if (!updateGameData.modal) {\n    updateGameData.modal = \"\";\n  }\n\n  if (!updateGameData.flags) {\n    updateGameData.flags = {} as any;\n  }\n\n  // Should be find to leave flags that default to \"false\" as \"undefined\"\n  // \"true\" defaults should definitely be initialized\n  // if (updateGameData.flags.introDismissed === undefined) {\n  //   updateGameData.flags.introDismissed= false;\n  // }\n\n  return updateGameData;\n}\n","import { getTileConfigByName, TileConfigNames } from \"../config/tiles\";\nimport { GameData } from \"../types/GameData\";\nimport { addDeckTile, addOwnedTile, buildDeck, nextTaxPeriodDay, setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\nimport { updateGameData } from \"./updateGameData\";\n\nfunction addTile(name: TileConfigNames) {\n  const tileConfig = getTileConfigByName(name);\n  addOwnedTile(tileConfig);\n  addDeckTile(tileConfig?.id);\n}\n\nexport function newGame() {\n  const gameData = updateGameData({});\n\n  store.state.gameData = gameData;\n  store.state.gameData.tilesToPick = [];\n\n  addTile(\"Coal\");\n  addTile(\"Pickaxe\");\n  addTile(\"Rock\");\n  // addTile(\"Key\");\n  // addTile(\"Small Chest\");\n  // addTile(\"Medium Chest\");\n\n  buildDeck();\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n}\n","import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\nimport tileConfigs, { emptyTileConfig } from \"../config/tiles\";\nimport { updateGameData } from \"./updateGameData\";\n\nexport function loadGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  if (localData?.gameState) {\n    // Must update configs with references to the actual objects\n    const gameState: GameData = updateGameData(localData.gameState);\n\n    updateTileConfigs(gameState.ownedTiles);\n    updateTileConfigs(gameState.deckTiles);\n    updateTileConfigs(gameState.gameTiles);\n    updateTileConfigs(gameState.tilesToPick);\n\n    store.state.gameData = localData.gameState;\n  }\n}\n\nfunction updateTileConfigs(tiles: TileInstance[]) {\n  for (const tile of tiles) {\n    tile.config =\n      tileConfigs.find((tileConfig) => {\n        return tileConfig.id === tile.config.id;\n      }) || emptyTileConfig;\n  }\n}\n","import { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile: TileInstance;\n  showValue?: boolean;\n  fade?: boolean;\n  onClick?: (tile: TileInstance) => void;\n}\n\nexport function Tile({ tile, showValue, fade, onClick }: Props) {\n  const className = [\"tile\"];\n\n  if (tile.data.highlight) {\n    className.push(\"highlight\");\n  }\n\n  if (fade) {\n    className.push(\"fade\");\n  }\n\n  function clickedTile() {\n    store.state.selectedTile = tile;\n    store.update();\n\n    if (onClick) {\n      onClick(tile);\n    }\n  }\n\n  return (\n    <div className={className.join(\" \")} onClick={clickedTile}>\n      {!!tile.config.topStat && showValue && <div className=\"top-stat\">{tile.config.topStat(tile)}</div>}\n      {!!tile.data.spinValue && showValue && <div className=\"value\">{tile.data.spinValue}</div>}\n      <tile.config.icon />\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  tiles: TileInstance[];\n  fade?: (tile: TileInstance) => boolean;\n  onClickTile?: (tile: TileInstance) => void;\n}\n\nexport function Inventory({ tiles, onClickTile, fade }: Props) {\n  return (\n    <div className=\"inventory\">\n      {tiles.map((tile) => (\n        <Tile key={tile.id} tile={tile} onClick={onClickTile} fade={fade && fade(tile)} />\n      ))}\n    </div>\n  );\n}\n","import { nextTaxPeriodDay, setInitialGameTiles } from \"./game\";\nimport { store } from \"./store\";\n\nexport function newRound() {\n  const { gameData } = store.state;\n\n  gameData.currentTaxPeriod = 0;\n  gameData.currentTaxPeriodDay = 0;\n  gameData.roundEnded = false;\n  gameData.boardTiles = [];\n  gameData.totalCoins = 0;\n  gameData.events = [];\n  gameData.tilesToPick = [];\n  gameData.modal = \"\";\n\n  setInitialGameTiles();\n  nextTaxPeriodDay();\n\n  store.update();\n}\n","import { Inventory } from \"../components/Inventory\";\nimport { emptyTileConfig, tileInstances } from \"../config/tiles\";\nimport { TextIcon } from \"../config/tiles/Icon\";\nimport { Coin } from \"../config/tiles/misc/icons\";\nimport { rarity } from \"../config/tiles/rarities\";\nimport { createTile } from \"../lib/createTile\";\nimport { addOwnedTile, calculateDeckScore, findTile } from \"../lib/game\";\nimport { newRound } from \"../lib/newRound\";\nimport { store } from \"../lib/store\";\nimport { randomInt } from \"../lib/utils\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport function RoundEnd() {\n  const deckScore = calculateDeckScore();\n\n  const { gameData } = store.state;\n\n  function tileRarityCost(rarityValue: number, rarityCount: number) {\n    return Math.pow(rarityValue + 1, 2) * 100 * (rarityCount + 1);\n  }\n\n  function getRemainingTiles() {\n    const availableTilesByRarity: TileInstance[][] = Object.keys(rarity).map(() => []);\n    const allTilesByRarity: TileInstance[][] = Object.keys(rarity).map(() => []);\n    const ownedRarityCounts: number[] = Object.keys(rarity).map(() => 0);\n\n    tileInstances.forEach((tile) => {\n      allTilesByRarity[tile.config.rarity].push(tile);\n\n      if (tile.config === emptyTileConfig) {\n        // Skip the empty tile\n        return;\n      }\n\n      if (!findTile(gameData.ownedTiles, tile.config.id)) {\n        availableTilesByRarity[tile.config.rarity].push(tile);\n      } else {\n        ownedRarityCounts[tile.config.rarity]++;\n      }\n    });\n\n    return {\n      availableTilesByRarity,\n      allTilesByRarity,\n      ownedRarityCounts,\n    };\n  }\n\n  function buyTileRarity(rarity: number) {\n    const { availableTilesByRarity, ownedRarityCounts } = getRemainingTiles();\n\n    const rarityTiles = availableTilesByRarity[rarity];\n\n    const index = randomInt(0, rarityTiles.length - 1);\n\n    gameData.savedCoins -= tileRarityCost(rarity, ownedRarityCounts[rarity]);\n\n    addOwnedTile(rarityTiles[index].config);\n\n    store.update();\n  }\n\n  const { availableTilesByRarity, allTilesByRarity, ownedRarityCounts } = getRemainingTiles();\n\n  return (\n    <div className=\"main-container\">\n      <h1>The round is over</h1>\n      <h2>\n        Saved: {gameData.savedCoins}\n        <TextIcon Icon={Coin} /> ({gameData.lastTotalCoins} earned last round)\n      </h2>\n      <div>\n        <div>\n          This is your chance to get a new tile. Getting a new tile will increase the cost of the next tile of the same\n          rarity\n        </div>\n        <div className=\"buy-new-card\">\n          {Object.keys(rarity).map((rarityName, index) => {\n            const rarityValue = (rarity as any)[rarityName];\n            const rarityCount = ownedRarityCounts[index];\n            const cost = tileRarityCost(rarityValue, rarityCount);\n            const availableTiles = availableTilesByRarity[index].length;\n            const className = [\"rarity\"];\n            let enabled = true;\n\n            if (cost > gameData.savedCoins || availableTiles === 0) {\n              className.push(\"disabled\");\n              enabled = false;\n            }\n\n            return (\n              <div key={rarityValue} className={className.join(\" \")}>\n                <div className=\"name\">{rarityName}</div>\n                <div className=\"cost\">{cost}</div>\n                <div className=\"remaining-tiles\">\n                  {availableTilesByRarity[index].length} of {allTilesByRarity[index].length} tiles available\n                </div>\n                {enabled && <button onClick={() => buyTileRarity(index)}>Buy</button>}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      <div>Take this time to reorganize your deck</div>\n      <br />\n      <div>\n        <div>\n          <h1>Deck</h1>\n          <div style={{ background: deckScore > 1 ? \"red\" : \"none\" }}>Deck Score: {deckScore.toFixed(2)}</div>\n          <Inventory\n            tiles={gameData.deckTiles}\n            onClickTile={(tile) => {\n              const index = gameData.deckTiles.indexOf(tile);\n\n              if (index >= 0) {\n                gameData.deckTiles.splice(index, 1);\n              }\n            }}\n          />\n        </div>\n      </div>\n      <br />\n      <div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory\n            tiles={gameData.ownedTiles}\n            onClickTile={(tile) => {\n              const hasTile = gameData.deckTiles.find((otherTile) => {\n                return otherTile.config.id === tile.config.id;\n              });\n\n              if (!hasTile) {\n                gameData.deckTiles.push(tile);\n              }\n            }}\n          />\n        </div>\n      </div>\n      <br />\n      <div>\n        <h1>All Tiles</h1>\n        <Inventory\n          tiles={tileInstances}\n          fade={(tile) => {\n            return !!gameData.ownedTiles.find((ownedTile) => {\n              return ownedTile.config.id === tile.config.id;\n            });\n          }}\n          // onClickTile={(tile) => {\n          //   if (gameData.superUser) {\n          //     const hasTile = gameData.ownedTiles.find((otherTile) => {\n          //       return otherTile.config.id === tile.config.id;\n          //     });\n\n          //     if (!hasTile) {\n          //       gameData.ownedTiles.push(createTile(tile.config));\n          //     }\n          //   }\n          // }}\n        />\n      </div>\n      <br />\n      <button onClick={newRound}>Next round</button>\n    </div>\n  );\n}\n","import { createTile } from \"../lib/createTile\";\nimport { emptyTileConfig } from \"../config/tiles\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  boardTiles: number[];\n  gameTiles: TileInstance[];\n  width: number;\n  height: number;\n}\n\nexport function Board({ boardTiles, gameTiles, width, height }: Props) {\n  const style = {\n    fontSize: \"1.5em\",\n    gridTemplateColumns: `repeat(${width}, 5em)`,\n    gridTemplateRows: `repeat(${height}, 5em)`,\n  };\n\n  if (boardTiles.length === 0) {\n    const emptyTileInstance = createTile(emptyTileConfig);\n\n    return (\n      <div className=\"board\" style={style}>\n        {\" \"\n          .repeat(width * height)\n          .split(\"\")\n          .map((_, index) => {\n            return <Tile key={index} tile={emptyTileInstance} />;\n          })}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"board\" style={style}>\n      {boardTiles.map((deckIndex, index) => {\n        const tile = gameTiles[deckIndex];\n        return <Tile key={tile.id} tile={tile} showValue onClick={() => {}} />;\n      })}\n    </div>\n  );\n}\n","import { GameEvent } from \"../types/GameData\";\n\ninterface Props {\n  events: GameEvent[];\n}\n\nexport function GameEvents({ events }: Props) {\n  return (\n    <div className=\"game-events\">\n      {events.map((event) => (\n        <div key={event.id} className=\"event\">\n          <div className=\"message\">{event.message}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { store } from \"../lib/store\";\n\nexport function openModal(modalName: string) {\n  store.state.gameData.modal = modalName;\n  store.update();\n}\n\nexport function closeModal() {\n  store.state.gameData.modal = \"\";\n  store.update();\n}\n","import { GameEvent } from \"../types/GameData\";\n\nexport function Modal({ children, style }: any) {\n  console.log(children);\n  return (\n    <div className=\"modal\">\n      <div className=\"shade\">\n        <div className=\"container\" style={style}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { rarityNames } from \"../config/tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile?: TileInstance;\n  onClick?: any;\n}\n\nexport function TileDetails({ tile, onClick }: Props) {\n  if (!tile) {\n    return null;\n  }\n\n  const { config } = tile;\n\n  return (\n    <div className=\"tile-details\" onClick={onClick}>\n      <div className=\"name\">{config.name}</div>\n      <div className=\"rarity\">{rarityNames[config.rarity]}</div>\n      <tile.config.icon />\n      <div className=\"description\">{config.description && config.description()}</div>\n    </div>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Modal } from \"../../components/Modal\";\nimport { TileDetails } from \"../../components/TileDetails\";\nimport { addGameTile } from \"../../lib/game\";\nimport { saveGameData } from \"../../lib/saveGameData\";\nimport { store } from \"../../lib/store\";\nimport { TileInstance } from \"../../types/TileInstance\";\n\nexport function PickNewTileModal() {\n  const { tilesToPick } = store.state.gameData;\n\n  function pickTile(tile?: TileInstance) {\n    if (tile) {\n      addGameTile(tile);\n    }\n\n    store.state.gameData.modal = \"\";\n    store.state.gameData.tilesToPick = [];\n\n    saveGameData();\n\n    closeModal();\n  }\n\n  return (\n    <Modal>\n      <h1>Pick New Tile</h1>\n      <div className=\"pick-a-tile\">\n        {tilesToPick.map((tile) => (\n          <div className=\"option\">\n            <TileDetails key={tile.id} tile={tile} />\n            <button\n              onClick={() => {\n                pickTile(tile);\n              }}\n            >\n              Select\n            </button>\n          </div>\n        ))}\n      </div>\n      <br />\n      <button onClick={() => pickTile()}>Skip</button>\n    </Modal>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Inventory } from \"../../components/Inventory\";\nimport { Modal } from \"../../components/Modal\";\nimport { tileInstances } from \"../../config/tiles\";\nimport { createTile } from \"../../lib/createTile\";\nimport { calculateDeckScore } from \"../../lib/game\";\nimport { store } from \"../../lib/store\";\n\nexport function InventoryModal() {\n  const { gameData } = store.state;\n\n  const deckScore = calculateDeckScore();\n\n  return (\n    <Modal style={{ width: \"50em\" }}>\n      <div>\n        <h1>Inventory</h1>\n        <div>\n          <h1>Game Tiles</h1>\n          <Inventory tiles={gameData.gameTiles} />\n        </div>\n        <div>\n          <h1>Deck</h1>\n          <div style={{ background: deckScore > 1 ? \"red\" : \"none\" }}>Deck Score: {deckScore.toFixed(2)}</div>\n          <Inventory tiles={gameData.deckTiles} />\n        </div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory tiles={gameData.ownedTiles} />\n        </div>\n        {gameData.superUser && (\n          <div>\n            <h1>All Tiles</h1>\n            <Inventory\n              tiles={tileInstances}\n              onClickTile={(tile) => {\n                const hasTile = gameData.ownedTiles.find((otherTile) => {\n                  return otherTile.config.id === tile.config.id;\n                });\n\n                if (!hasTile) {\n                  gameData.ownedTiles.push(createTile(tile.config));\n                }\n              }}\n            />\n          </div>\n        )}\n        <br />\n        <button onClick={closeModal}>Close</button>\n      </div>\n    </Modal>\n  );\n}\n","import { fillEmptyTiles } from \"../lib/game\";\nimport { store } from \"../lib/store\";\n\nconst upgrades = [\n  {\n    id: \"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d\",\n    name: \"Board Width\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridWidth += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"1e0ab330-8ec9-4e41-933d-75251ffa5ee5\",\n    name: \"Board Height\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridHeight += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"0245c559-dd55-4f93-a626-53cc06b17d42\",\n    name: \"XYZ\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {},\n    isComplete: () => {\n      return false;\n    },\n  },\n];\n\nexport function Upgrades() {\n  return (\n    <div className=\"upgrades\">\n      {upgrades.map((upgrade) => {\n        return (\n          <div key={upgrade.id}>\n            <div>{upgrade.name}</div>\n            <div>\n              <button onClick={upgrade.buy}>Buy</button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { closeModal } from \"../../actions/modal\";\nimport { Modal } from \"../../components/Modal\";\nimport { Upgrades } from \"../../components/Upgrades\";\nimport { store } from \"../../lib/store\";\n\nexport function UpgradesModal() {\n  return (\n    <Modal>\n      <h1>Upgrades</h1>\n      <Upgrades />\n      <br />\n      <button onClick={closeModal}>Close</button>\n    </Modal>\n  );\n}\n","import { Modal } from \"../../components/Modal\";\nimport { Upgrades } from \"../../components/Upgrades\";\nimport { store } from \"../../lib/store\";\n\nexport function IntroModal() {\n  const { gameData } = store.state;\n\n  return (\n    <Modal>\n      <h1>Intro</h1>\n      <div>\n        You are a craftsman who's father just passed, leaving you his shop and a few personal possessions. One of these\n        was a well worn rune that you had never seen before... what could it possibly be?\n        <br />\n        <br />\n        <h3>Taxes</h3>\n        As a shop owner you must pay taxes. As time goes on you are given more time, but also expected to pay more\n        taxes.\n        <br />\n        <br />\n        <h3>Getting Items</h3>\n        Every day you will get new shipments of items, which you are then able to use for profit. What happens on the\n        day will be completely up to chance.\n        <br />\n        <br />\n        At the end of the day you will also have the opprtunity to select from additional items to be delivered to your\n        shop.\n        <br />\n        <br />\n        <h3>Item effects</h3>\n        As a craftsman you are able to utilize items in different ways to produce even more valuable or useful items.\n      </div>\n      <br />\n      <button\n        onClick={() => {\n          gameData.flags.introDismissed = true;\n          store.update();\n        }}\n      >\n        Begin your journey\n      </button>\n    </Modal>\n  );\n}\n","import { Board } from \"../components/Board\";\nimport { store } from \"../lib/store\";\nimport { newGame } from \"../lib/newGame\";\nimport { spin } from \"../lib/game\";\nimport { TileDetails } from \"../components/TileDetails\";\nimport { loadGameData } from \"../lib/loadGameData\";\nimport { taxPeriods } from \"../config/taxPeriods\";\nimport { Coin } from \"../config/tiles/misc/icons\";\nimport { GameEvents } from \"../components/GameEvents\";\nimport { saveGameData } from \"../lib/saveGameData\";\nimport packageJson from \"../../package.json\";\nimport { PickNewTileModal } from \"./modals/PickNewTileModal\";\nimport { InventoryModal } from \"./modals/InventoryModal\";\nimport { UpgradesModal } from \"./modals/UpgradesModal\";\nimport { IntroModal } from \"./modals/IntroModal\";\nimport { openModal } from \"../actions/modal\";\nimport { endRound } from \"../actions/game\";\nimport { TextIcon } from \"../config/tiles/Icon\";\n\nloadGameData();\n\nfunction Header() {\n  const { gameData } = store.state;\n  const taxPeriod = taxPeriods[gameData.currentTaxPeriod];\n\n  return (\n    <>\n      <div style={{ fontSize: \"3em\" }}>\n        {gameData.totalCoins}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        / {taxPeriod.taxAmount}\n        <span className=\"icon-em\">\n          <Coin />\n        </span>{\" \"}\n        taxes due in {taxPeriod.totalDays - gameData.currentTaxPeriodDay} Days\n      </div>\n      <div style={{ float: \"right\" }}>Tax Period: {gameData.currentTaxPeriod}</div>\n      <div>\n        Saved: {gameData.savedCoins}\n        <TextIcon Icon={Coin} />\n      </div>\n    </>\n  );\n}\n\nfunction Modals() {\n  const { gameData } = store.state;\n\n  switch (gameData.modal) {\n    case \"PickNewTile\":\n      return <PickNewTileModal />;\n    case \"Inventory\":\n      return <InventoryModal />;\n    case \"Upgrades\":\n      return <UpgradesModal />;\n  }\n\n  return null;\n}\n\nexport function MainGame() {\n  const { gameData } = store.state;\n\n  return (\n    <div className=\"app\">\n      {!gameData.flags.introDismissed && <IntroModal />}\n      <Modals />\n      <div className=\"version\">Version: {packageJson.version}</div>\n      <div className=\"main-container\">\n        <Header />\n        <div>\n          <br />\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n            <Board\n              boardTiles={gameData.boardTiles}\n              gameTiles={gameData.gameTiles}\n              width={gameData.gridWidth}\n              height={gameData.gridHeight}\n            />\n          </div>\n          <div style={{ fontSize: \"2em\", textAlign: \"center\" }}>\n            Board value {(!!gameData.boardValue && gameData.boardValue) || 0}\n            <TextIcon Icon={Coin} />\n          </div>\n          {!store.state.spinning && (\n            <button onClick={spin} style={{ marginTop: \"0.5em\" }}>\n              Spin\n            </button>\n          )}\n          <div style={{ marginTop: \"1em\" }}>\n            <button onClick={() => openModal(\"Inventory\")}>Inventory</button>\n            <button onClick={() => openModal(\"Upgrades\")}>Upgrades</button>\n          </div>\n          <br />\n        </div>\n        {!!gameData.events.length && (\n          <div>\n            <h1>Events</h1>\n            <GameEvents events={gameData.events} />\n            <br />\n          </div>\n        )}\n        <div>\n          <h1>Options</h1>\n          <button\n            onClick={() => {\n              newGame();\n              saveGameData();\n              store.update();\n            }}\n          >\n            Reset All Game Data\n          </button>\n          <button\n            onClick={() => {\n              saveGameData();\n            }}\n          >\n            Save Game Data\n          </button>\n          <button onClick={endRound}>End Round</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { store } from \"./lib/store\";\nimport { useEffect, useState } from \"react\";\nimport { newGame } from \"./lib/newGame\";\nimport { loadGameData } from \"./lib/loadGameData\";\nimport { MainGame, RoundEnd } from \"./views\";\nimport { TileDetails } from \"./components/TileDetails\";\n\nloadGameData();\n\nfunction SelectedTile() {\n  return (\n    <>\n      {store.state.selectedTile && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: \"0em\",\n            left: \"0em\",\n            zIndex: 1000000,\n            padding: \"1em\",\n            background: \"#333\",\n            boxShadow: \"0em 0em 1em 0em #000\",\n          }}\n        >\n          <TileDetails tile={store.state.selectedTile} />\n          <button\n            onClick={() => {\n              store.state.selectedTile = undefined;\n              store.update();\n            }}\n          >\n            Close\n          </button>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction App() {\n  const update = useState(0)[1];\n\n  // Did mount / unmount\n  useEffect(() => {\n    store._update = update;\n  }, [update]);\n\n  if (!store.state.gameData) {\n    newGame();\n  }\n\n  const { gameData } = store.state;\n\n  let view = null;\n\n  if (gameData.roundEnded) {\n    view = <RoundEnd />;\n  } else {\n    view = <MainGame />;\n  }\n\n  return (\n    <>\n      <SelectedTile />\n      {view}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}