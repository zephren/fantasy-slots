{"version":3,"sources":["lib/store.ts","components/Tile.tsx","components/Board.tsx","components/Inventory.tsx","tiles/rarities.ts","tiles/icons/images/key.png","tiles/icons/images/chest1.png","tiles/icons/images/chest2.png","tiles/icons/images/chest3.png","tiles/icons/images/chest4.png","tiles/icons/images/coal.png","tiles/icons/images/coin.png","tiles/icons/images/dagger1.png","tiles/icons/Icon.tsx","tiles/lib/iterateAdjacentTiles.ts","tiles/set1/index.ts","lib/createTile.ts","tiles/lib/destroy.ts","tiles/chests/index.tsx","tiles/lib/hasCategory.ts","tiles/index.ts","lib/utils.ts","lib/static.ts","lib/game.ts","lib/saveGameData.ts","lib/newGame.ts","components/TileDetails.tsx","components/PickNewTile.tsx","components/Upgrades.tsx","lib/loadGameData.ts","App.tsx","index.tsx"],"names":["store","state","gameData","spinning","tilesToPick","selectedTile","_update","value","update","Math","random","window","Tile","tile","showValue","onClick","className","data","highlight","push","join","spinValue","config","icon","Board","boardTiles","gameTiles","width","height","style","fontSize","gridTemplateColumns","gridTemplateRows","map","deckIndex","index","id","Inventory","tiles","rarity","Icon","image","src","alt","Chest1","chest1","Chest2","chest2","Chest3","chest3","Chest4","chest4","Coin","coin","iterateAdjacentTiles","context","callback","adjecentIndexes","getAdjacentIndexes","getTiles","forEach","tileConfigs","name","coal","categories","calculateValue","total","dagger1","createTile","tileConfig","totalSpins","totalAppearances","uuid","configId","effects","destroy","destroyValue","onDestroy","gameTilesIndex","indexOf","emptyTile","emptyTileConfig","description","key","destroyed","category","includes","hasCategory","alert","set1","chests","tilesById","Map","tilesByName","set","randomInt","min","max","floor","GAME_ID","findTile","find","pickRandomTile","maxRarity","array","tilesAvailable","reduce","acc","length","fillEmptyTiles","gridWidth","gridHeight","i","spin","deckTiles","availableGameTiles","availableIndex","gameTile","splice","generateBoard","resetTiles","interval","setInterval","clearInterval","totalCoins","boardValue","count","availableTiles","pickedTiles","pickTiles","localData","localStorage","JSON","parse","gameState","stringify","saveGameData","console","log","startIndex","indexes","isAdjacent","calculateBoardTileValue","originIndex","checkIndex","tileIndexes","addTile","get","ownedTiles","addOwnedTile","tileId","deckTileIds","addDeckTile","newGame","buildDeck","setInitialGameTiles","TileDetails","PickNewTile","newTile","emptyTileIndex","findIndex","addGameTile","upgrades","cost","buy","isComplete","Upgrades","upgrade","loadGameData","App","useState","useEffect","buttons","opacity","display","flexDirection","undefined","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cc1c2fc5.chunk.js","sourcesContent":["import { GameData } from \"../types/GameData\";\nimport { TileInstance } from \"../types/TileInstance\";\n\nexport const store = {\n  state: {\n    gameData: (null as unknown) as GameData,\n    spinning: false,\n    tilesToPick: [] as TileInstance[],\n    selectedTile: (null as unknown) as TileInstance | undefined,\n  },\n  _update: (value: number) => {}, // The function that triggers an update\n  update: (): void => {\n    store._update(Math.random());\n  },\n};\n\n(window as any).store = store;\n","import { store } from \"../lib/store\";\nimport { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile: TileInstance;\n  showValue?: boolean;\n  onClick?: () => void;\n}\n\nexport function Tile({ tile, showValue, onClick }: Props) {\n  const className = [\"tile\"];\n\n  if (tile.data.highlight) {\n    className.push(\"highlight\");\n  }\n\n  function clickedTile() {\n    store.state.selectedTile = tile;\n    store.update();\n\n    if (onClick) {\n      onClick();\n    }\n  }\n\n  return (\n    <div className={className.join(\" \")} onClick={clickedTile}>\n      {!!tile.data.spinValue && showValue && (\n        <div className=\"value\">{tile.data.spinValue}</div>\n      )}\n      <tile.config.icon />\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  boardTiles: number[];\n  gameTiles: TileInstance[];\n  width: number;\n  height: number;\n}\n\nexport function Board({ boardTiles, gameTiles, width, height }: Props) {\n  const style = {\n    fontSize: \"1.5em\",\n    gridTemplateColumns: `repeat(${width}, 5em)`,\n    gridTemplateRows: `repeat(${height}, 5em)`,\n  };\n\n  return (\n    <div className=\"board\" style={style}>\n      {boardTiles.map((deckIndex, index) => {\n        const tile = gameTiles[deckIndex];\n        return (\n          <Tile\n            key={tile.id}\n            tile={tile}\n            showValue\n            onClick={() => {\n              // const { boardTiles, gameTiles } = store.state.gameData;\n              // const indexes = getAdjacentIndexes(index, width, height, 1);\n              // console.log(indexes);\n              // indexes.forEach((foundIndex) => {\n              //   const foundTile = gameTiles[boardTiles[foundIndex]];\n              //   foundTile.data.highlight = true;\n              // });\n              // store.update();\n            }}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import { TileInstance } from \"../types/TileInstance\";\nimport { Tile } from \"./Tile\";\n\ninterface Props {\n  tiles: TileInstance[];\n}\n\nexport function Inventory({ tiles }: Props) {\n  return (\n    <div className=\"inventory\">\n      {tiles.map((tile) => (\n        <Tile key={tile.id} tile={tile} />\n      ))}\n    </div>\n  );\n}\n","export const rarity = {\n  COMMON: 0,\n  UNCOMMON: 1,\n  RARE: 2,\n  LEGENDARY: 3,\n};\n","export default __webpack_public_path__ + \"static/media/key.0629d73b.png\";","export default __webpack_public_path__ + \"static/media/chest1.b4054229.png\";","export default __webpack_public_path__ + \"static/media/chest2.d4ed67d0.png\";","export default __webpack_public_path__ + \"static/media/chest3.888bf5be.png\";","export default __webpack_public_path__ + \"static/media/chest4.28dffa1b.png\";","export default __webpack_public_path__ + \"static/media/coal.d3a30adc.png\";","export default __webpack_public_path__ + \"static/media/coin.3480412c.png\";","export default __webpack_public_path__ + \"static/media/dagger1.6892c2d5.png\";","import key from \"./images/key.png\";\nimport chest1 from \"./images/chest1.png\";\nimport chest2 from \"./images/chest2.png\";\nimport chest3 from \"./images/chest3.png\";\nimport chest4 from \"./images/chest4.png\";\n\nimport coal from \"./images/coal.png\";\nimport coin from \"./images/coin.png\";\nimport dagger1 from \"./images/dagger1.png\";\n\nconst empty =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\ninterface Props {\n  image?: any;\n}\n\nexport function Icon({ image }: Props) {\n  return <img className=\"icon\" src={image} alt=\"\" />;\n}\n\nexport const Empty = () => <Icon image={empty} />;\n\nexport const Key = () => <Icon image={key} />;\nexport const Chest1 = () => <Icon image={chest1} />;\nexport const Chest2 = () => <Icon image={chest2} />;\nexport const Chest3 = () => <Icon image={chest3} />;\nexport const Chest4 = () => <Icon image={chest4} />;\n\nexport const Coal = () => <Icon image={coal} />;\nexport const Coin = () => <Icon image={coin} />;\nexport const Dagger1 = () => <Icon image={dagger1} />;\n","import { TileValueContext } from \"../../types/TileValueContext\";\n\nexport function iterateAdjacentTiles(context: TileValueContext, callback: any) {\n  const adjecentIndexes = context.getAdjacentIndexes();\n\n  const tiles = context.getTiles(adjecentIndexes);\n\n  tiles.forEach(callback);\n}\n","import { TileConfig } from \"../../types/TileConfig\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\nimport { Coal, Coin, Dagger1 } from \"../icons/Icon\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { rarity } from \"../rarities\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"48217c09-300c-44b0-803e-19f51346227b\",\n    name: \"Coal\",\n    icon: Coal,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      let total = 1;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (tile.config.name === \"Coal\") {\n          total += 1;\n        }\n      });\n\n      return total;\n    },\n  },\n  {\n    id: \"2f2e6e35-686f-4033-9940-3f66a153c568\",\n    name: \"Dagger\",\n    icon: Dagger1,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n  {\n    id: \"49d24981-a7d1-4407-b121-ed3e45d427bd\",\n    name: \"Coin\",\n    icon: Coin,\n    rarity: rarity.COMMON,\n    categories: [],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { TileConfig } from \"../types/TileConfig\";\nimport { TileData, TileInstance } from \"../types/TileInstance\";\nimport { v4 as uuid } from \"uuid\";\n\nexport function createTileData() {\n  const tileData: TileData = {\n    spinValue: 0,\n    totalSpins: 0,\n    totalAppearances: 0,\n    highlight: false,\n  };\n\n  return tileData;\n}\n\nexport function createTile(\n  tileConfig: TileConfig,\n  data: TileData = createTileData()\n) {\n  const tile: TileInstance = {\n    id: uuid(),\n    configId: tileConfig.id,\n    config: tileConfig,\n    effects: {},\n    data,\n  };\n\n  return tile;\n}\n","import { emptyTileConfig } from \"..\";\nimport { createTile } from \"../../lib/createTile\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\n\nexport function destroy(tile: TileInstance, context: TileValueContext) {\n  let destroyValue = 0;\n\n  if (tile.config.onDestroy) {\n    destroyValue = tile.config.onDestroy(context) || 0;\n  }\n\n  const { gameTiles } = context.gameData;\n  const gameTilesIndex = gameTiles.indexOf(tile);\n\n  const emptyTile = createTile(emptyTileConfig);\n\n  gameTiles[gameTilesIndex] = emptyTile;\n\n  if (destroyValue) {\n    emptyTile.data.spinValue = destroyValue;\n  }\n}\n","import { TileConfig } from \"../../types/TileConfig\";\nimport { TileValueContext } from \"../../types/TileValueContext\";\nimport { rarity } from \"../rarities\";\nimport { iterateAdjacentTiles } from \"../lib/iterateAdjacentTiles\";\nimport { TileInstance } from \"../../types/TileInstance\";\nimport { hasCategory } from \"../lib/hasCategory\";\nimport { destroy } from \"../lib/destroy\";\nimport { Chest1, Chest2, Chest3, Chest4, Coin, Key } from \"../icons/Icon\";\n\nconst tileConfigs: TileConfig[] = [\n  {\n    id: \"2ef31449-bf1d-4cee-8e93-e0665fb9942a\",\n    name: \"Key\",\n    description: () => {\n      return (\n        <>\n          The key unlocks <Chest1 /> <Chest2 /> <Chest3 /> <Chest4 />,\n          destroying both in the process\n        </>\n      );\n    },\n    icon: Key,\n    rarity: rarity.COMMON,\n    categories: [\"key\"],\n    calculateValue: (context: TileValueContext) => {\n      let destroyed = false;\n\n      iterateAdjacentTiles(context, (tile: TileInstance) => {\n        if (hasCategory(tile, \"chest\")) {\n          destroy(tile, context);\n          destroyed = true;\n        }\n      });\n\n      if (destroyed) {\n        destroy(context.tile, context);\n      }\n\n      return 1;\n    },\n  },\n  {\n    id: \"834bf40d-0a3d-4e20-83a0-4e3aa233840c\",\n    name: \"Small Chest\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives 10 <Coin />\n        </>\n      );\n    },\n    icon: Chest1,\n    rarity: rarity.COMMON,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      return 10;\n    },\n  },\n  {\n    id: \"c87ea7e4-5479-4aa7-9033-0859d191390b\",\n    name: \"Medium Chest\",\n    description: () => {\n      return (\n        <>\n          Unlocked by the key, gives 30 <Coin />\n        </>\n      );\n    },\n    icon: Chest2,\n    rarity: rarity.UNCOMMON,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      return 30;\n    },\n  },\n  {\n    id: \"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1\",\n    name: \"Large Chest\",\n    icon: Chest3,\n    rarity: rarity.RARE,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      alert(\"destroyed\");\n    },\n  },\n  {\n    id: \"3422f3a8-bd1a-4549-a9ff-d0ed0621d646\",\n    name: \"Dark Chest\",\n    icon: Chest4,\n    rarity: rarity.LEGENDARY,\n    categories: [\"chest\"],\n    calculateValue: (context: TileValueContext) => {\n      return 1;\n    },\n    onDestroy: (context: TileValueContext) => {\n      alert(\"destroyed\");\n    },\n  },\n];\n\nexport default tileConfigs;\n","import { TileInstance } from \"../../types/TileInstance\";\n\nexport function hasCategory(tile: TileInstance, category: string) {\n  return tile.config.categories.includes(category);\n}\n","import { TileConfig } from \"../types/TileConfig\";\nimport { rarity } from \"./rarities\";\nimport set1 from \"./set1\";\nimport chests from \"./chests\";\nimport { TileValueContext } from \"../types/TileValueContext\";\nimport { Empty } from \"./icons/Icon\";\n\nconst tileConfigs: TileConfig[] = [...set1, ...chests];\n\nexport default tileConfigs;\nexport const tilesById = new Map<string, TileConfig>();\nexport const tilesByName = new Map<string, TileConfig>();\n\ntileConfigs.forEach((config) => {\n  tilesById.set(config.id, config);\n  tilesByName.set(config.name, config);\n});\n\nexport const emptyTileConfig: TileConfig = {\n  id: \"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1\",\n  name: \"Empty\",\n  icon: Empty,\n  rarity: rarity.COMMON,\n  categories: [\"empty\"],\n  calculateValue: (context: TileValueContext) => {\n    return context.tile.data.spinValue || 0;\n  },\n};\n","export function randomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","export const GAME_ID = \"9c0617fc-daf3-4f9c-943e-073f698ac0b8\";\n","import { emptyTileConfig } from \"../tiles\";\nimport { rarity } from \"../tiles/rarities\";\nimport { TileInstance } from \"../types/TileInstance\";\nimport { createTile } from \"./createTile\";\nimport { randomInt } from \"./utils\";\nimport { store } from \"./store\";\nimport { saveGameData } from \"./saveGameData\";\n\nexport function findTile(tiles: TileInstance[], id: string) {\n  return tiles.find((tile) => {\n    return tile.configId === id;\n  });\n}\n\nexport function addOwnedTile(tileConfig = emptyTileConfig) {\n  const { ownedTiles } = store.state.gameData;\n\n  if (findTile(ownedTiles, tileConfig.id)) {\n    console.log(`Already own tile ${tileConfig.name}`);\n    return;\n  }\n\n  console.log(`Adding owned tile ${tileConfig.name}`);\n\n  const tile = createTile(tileConfig);\n\n  ownedTiles.push(tile);\n}\n\nexport function addDeckTile(tileId?: string) {\n  if (!tileId) {\n    return;\n  }\n\n  const { deckTileIds } = store.state.gameData;\n\n  if (!deckTileIds.includes(tileId)) {\n    deckTileIds.push(tileId);\n  }\n}\nexport function addGameTile(newTile: TileInstance) {\n  const { gameTiles } = store.state.gameData;\n\n  const emptyTileIndex = gameTiles.findIndex((tile) => {\n    return tile.config.id === emptyTileConfig.id;\n  });\n  console.log(emptyTileIndex);\n  if (emptyTileIndex >= 0) {\n    gameTiles.splice(emptyTileIndex, 1, newTile);\n  } else {\n    gameTiles.push(newTile);\n  }\n}\n\nexport function buildDeck() {\n  const { gameData } = store.state;\n  const { deckTileIds, ownedTiles } = gameData;\n\n  gameData.deckTiles = deckTileIds.map((id) => {\n    return findTile(ownedTiles, id) || createTile(emptyTileConfig);\n  });\n}\n\nexport function ArrayRandomItem<T>(array: T[]) {\n  return array[randomInt(0, array.length - 1)];\n}\n\nexport function pickRandomTile(tiles: TileInstance[], maxRarity: number) {\n  const tilesAvailable = tiles.reduce((acc, tile) => {\n    if (tile.config.rarity <= maxRarity) {\n      acc.push(tile);\n    }\n\n    return acc;\n  }, [] as TileInstance[]);\n\n  return ArrayRandomItem<TileInstance>(tilesAvailable);\n}\n\nexport function setInitialGameTiles() {\n  const { gameData } = store.state;\n  const { deckTiles } = gameData;\n\n  const gameTiles: TileInstance[] = [];\n\n  for (let i = 0; i < 5; i++) {\n    const tile = pickRandomTile(deckTiles, rarity.COMMON);\n    gameTiles.push(createTile(tile.config));\n  }\n\n  gameData.gameTiles = gameTiles;\n\n  fillEmptyTiles();\n}\n\nexport function fillEmptyTiles() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n\n  for (let i = 0; gameTiles.length < gridWidth * gridHeight; i++) {\n    gameTiles.push(createTile(emptyTileConfig));\n  }\n}\n\nexport function generateBoard() {\n  const { gameData } = store.state;\n  const { gameTiles, gridWidth, gridHeight } = gameData;\n  const boardTiles = [];\n  const availableGameTiles = [...gameTiles]; // New array\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    // Get a random index\n    const availableIndex = Math.floor(\n      Math.random() * availableGameTiles.length\n    );\n    const gameTile = availableGameTiles[availableIndex];\n    const index = gameTiles.indexOf(gameTile);\n\n    // console.log(index);\n    boardTiles.push(index);\n\n    availableGameTiles.splice(availableIndex, 1);\n  }\n\n  return boardTiles;\n}\n\nexport function resetTiles() {\n  const { gridWidth, gridHeight, gameTiles, boardTiles } = store.state.gameData;\n\n  for (let i = 0; i < gridWidth * gridHeight; i++) {\n    const tile = gameTiles[boardTiles[i]];\n    tile.data.spinValue = 0;\n  }\n}\n\nexport function spin() {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight, deckTiles } = gameData;\n\n  gameData.boardTiles = generateBoard();\n\n  resetTiles();\n  processBoard();\n\n  store.state.spinning = true;\n  store.update();\n\n  let index = 0;\n  const interval = setInterval(() => {\n    const { boardTiles, gameTiles } = gameData;\n\n    if (index > 0 && index <= gridWidth * gridHeight) {\n      const lastTile = gameTiles[boardTiles[index - 1]];\n      lastTile.data.highlight = false;\n    }\n\n    if (index > gridWidth * gridHeight) {\n      clearInterval(interval);\n\n      store.state.spinning = false;\n      store.state.gameData.totalCoins += store.state.gameData.boardValue;\n      store.state.tilesToPick = pickTiles(deckTiles);\n      store.update();\n\n      saveGameData();\n\n      return;\n    }\n\n    if (index < gridWidth * gridHeight) {\n      const tile = gameTiles[boardTiles[index]];\n      tile.data.highlight = true;\n      tile.data.totalAppearances++;\n      tile.data.spinValue = calculateBoardTileValue(tile, index);\n    }\n\n    index++;\n\n    let boardValue = 0;\n    for (const index of boardTiles) {\n      boardValue += gameTiles[boardTiles[index]].data.spinValue;\n    }\n    store.state.gameData.boardValue = boardValue;\n\n    store.update();\n  }, 100);\n}\n\nexport function processBoard() {\n  const { gameTiles } = store.state.gameData;\n\n  // Add to totalSpins\n  gameTiles.forEach((tile) => {\n    tile.data.totalSpins++;\n  });\n}\n\nexport function isAdjacent(\n  originIndex: number,\n  checkIndex: number,\n  width: number,\n  height: number\n) {\n  // Up / Down or out of bounds\n  if (checkIndex < 0 || checkIndex >= width * height) {\n    return false;\n  }\n\n  // Left / Right\n  if (originIndex + 1 === checkIndex || originIndex - 1 === checkIndex) {\n    if (Math.floor(checkIndex / width) !== Math.floor(originIndex / width)) {\n      return false;\n    }\n  }\n\n  // Down > Left / Right\n  if (\n    originIndex + width + 1 === checkIndex ||\n    originIndex + width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex + width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  // Up > Left / Right\n  if (\n    originIndex - width + 1 === checkIndex ||\n    originIndex - width - 1 === checkIndex\n  ) {\n    if (\n      Math.floor(checkIndex / width) !==\n      Math.floor((originIndex - width) / width)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getAdjacentIndexes(\n  startIndex: number,\n  width: number,\n  height: number\n): number[] {\n  const indexes: number[] = [];\n\n  indexes.push(startIndex + width);\n  indexes.push(startIndex - width);\n  indexes.push(startIndex + 1);\n  indexes.push(startIndex - 1);\n\n  indexes.push(startIndex + width - 1);\n  indexes.push(startIndex + width + 1);\n  indexes.push(startIndex - width - 1);\n  indexes.push(startIndex - width + 1);\n\n  for (let i = 7; i >= 0; i--) {\n    if (!isAdjacent(startIndex, indexes[i], width, height)) {\n      indexes.splice(i, 1);\n    }\n  }\n\n  return indexes;\n}\n\nfunction getTiles(tileIndexes: number[]) {\n  const { boardTiles, gameTiles } = store.state.gameData;\n\n  return tileIndexes.map((index) => {\n    return gameTiles[boardTiles[index]];\n  });\n}\n\nexport function calculateBoardTileValue(tile: TileInstance, index: number) {\n  const { gameData } = store.state;\n  const { gridWidth, gridHeight } = gameData;\n\n  console.log(\"Tile Index\", index);\n\n  const context = {\n    tile,\n    gameData,\n    getAdjacentIndexes: () => {\n      return getAdjacentIndexes(index, gridWidth, gridHeight);\n    },\n    getTiles,\n  };\n\n  return tile.config.calculateValue(context);\n}\n\nfunction pickTiles(tiles: TileInstance[], count = 3) {\n  const availableTiles = [...tiles];\n  const pickedTiles = [];\n\n  for (let i = 0; i < count; i++) {\n    const index = randomInt(0, availableTiles.length - 1);\n    const tile = availableTiles.splice(index, 1)[0];\n\n    if (tile) {\n      pickedTiles.push(createTile(tile.config));\n    }\n  }\n\n  return pickedTiles;\n}\n","import { GAME_ID } from \"./static\";\nimport { store } from \"./store\";\n\nexport function saveGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  // Need to remove the config objects from (should clone things first)\n  localData.gameState = store.state.gameData;\n\n  localStorage[`${GAME_ID}`] = JSON.stringify(localData);\n}\n","import { tilesByName } from \"../tiles\";\nimport { GameData } from \"../types/GameData\";\nimport {\n  addDeckTile,\n  addOwnedTile,\n  buildDeck,\n  setInitialGameTiles,\n} from \"./game\";\nimport { store } from \"./store\";\n\nfunction addTile(name: string) {\n  const tileConfig = tilesByName.get(name);\n  addOwnedTile(tileConfig);\n  addDeckTile(tileConfig?.id);\n}\n\nexport function newGame() {\n  const gameData: GameData = {\n    boardTiles: [],\n    ownedTiles: [],\n    deckTileIds: [],\n    deckTiles: [],\n    gameTiles: [],\n    gridWidth: 3,\n    gridHeight: 3,\n    boardValue: 0,\n    totalCoins: 0,\n  };\n\n  store.state.gameData = gameData;\n\n  addTile(\"Coal\");\n  addTile(\"Dagger\");\n  addTile(\"Key\");\n  addTile(\"Small Chest\");\n  addTile(\"Medium Chest\");\n\n  buildDeck();\n\n  setInitialGameTiles();\n}\n","import { TileInstance } from \"../types/TileInstance\";\n\ninterface Props {\n  tile?: TileInstance;\n  onClick?: any;\n}\n\nexport function TileDetails({ tile, onClick }: Props) {\n  if (!tile) {\n    return null;\n  }\n\n  const { config } = tile;\n\n  return (\n    <div className=\"tile-details\" onClick={onClick}>\n      <div className=\"name\">{config.name}</div>\n      <tile.config.icon />\n      <div className=\"description\">\n        {config.description && config.description()}\n      </div>\n    </div>\n  );\n}\n","import { addGameTile } from \"../lib/game\";\nimport { store } from \"../lib/store\";\nimport { TileDetails } from \"./TileDetails\";\n\nexport function PickNewTile() {\n  const { tilesToPick } = store.state;\n\n  return (\n    <div className=\"pick-a-tile\">\n      {tilesToPick.map((tile) => (\n        <TileDetails\n          tile={tile}\n          onClick={() => {\n            addGameTile(tile);\n            store.state.tilesToPick = [];\n            store.state.gameData.boardTiles = [];\n            store.update();\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n","import { fillEmptyTiles } from \"../lib/game\";\nimport { store } from \"../lib/store\";\n\nconst upgrades = [\n  {\n    id: \"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d\",\n    name: \"Board Width\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridWidth += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"1e0ab330-8ec9-4e41-933d-75251ffa5ee5\",\n    name: \"Board Height\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {\n      const { gameData } = store.state;\n      gameData.gridHeight += 1;\n      fillEmptyTiles();\n      store.update();\n    },\n    isComplete: () => {\n      return false;\n    },\n  },\n  {\n    id: \"0245c559-dd55-4f93-a626-53cc06b17d42\",\n    name: \"XYZ\",\n    cost: () => {\n      return 0;\n    },\n    buy: () => {},\n    isComplete: () => {\n      return false;\n    },\n  },\n];\n\nexport function Upgrades() {\n  return (\n    <div className=\"upgrades\">\n      {upgrades.map((upgrade) => {\n        return (\n          <div key={upgrade.id}>\n            <div>{upgrade.name}</div>\n            <div>\n              <button onClick={upgrade.buy}>Buy</button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import { GAME_ID } from \"./static\";\n\nexport function loadGameData() {\n  let localData = localStorage[`${GAME_ID}`];\n\n  if (localData) {\n    localData = JSON.parse(localData);\n  } else {\n    localData = {};\n  }\n\n  if (localData?.gameState) {\n    // Must update configs with references to the actual objects\n    // store.state.gameData = localData.gameState;\n  }\n}\n","import { Board } from \"./components/Board\";\nimport { Inventory } from \"./components/Inventory\";\nimport { store } from \"./lib/store\";\nimport { useEffect, useState } from \"react\";\nimport { newGame } from \"./lib/newGame\";\nimport { spin } from \"./lib/game\";\nimport { PickNewTile } from \"./components/PickNewTile\";\nimport { TileDetails } from \"./components/TileDetails\";\nimport { Upgrades } from \"./components/Upgrades\";\nimport { loadGameData } from \"./lib/loadGameData\";\n\nloadGameData();\n\nfunction App() {\n  const update = useState(0)[1];\n\n  // Did mount / unmount\n  useEffect(() => {\n    store._update = update;\n  }, [update]);\n\n  if (!store.state.gameData) {\n    newGame();\n  }\n\n  const { gameData, tilesToPick } = store.state;\n\n  let buttons = null;\n  if (!store.state.spinning && !tilesToPick.length) {\n    buttons = (\n      <>\n        <button onClick={spin}>Spin</button>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <div style={{ fontSize: \"3em\" }}>{gameData.totalCoins} Coins</div>\n      {!!tilesToPick.length && (\n        <div>\n          <h1>Pick New Tile</h1>\n          <PickNewTile />\n        </div>\n      )}\n      <div style={{ opacity: tilesToPick.length ? 0.5 : 1 }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div>\n            <h1>Board</h1>\n            <Board\n              boardTiles={gameData.boardTiles}\n              gameTiles={gameData.gameTiles}\n              width={gameData.gridWidth}\n              height={gameData.gridHeight}\n            />\n            {buttons}\n            <div style={{ fontSize: \"2em\" }}>\n              Board value:{\" \"}\n              <b>{(!!gameData.boardValue && gameData.boardValue) || 0}</b>\n            </div>\n          </div>\n          <div style={{ width: \"1em\" }}></div>\n          <div>\n            <h1>Selected Tile</h1>\n            <TileDetails\n              tile={store.state.selectedTile}\n              onClick={() => {\n                store.state.selectedTile = undefined;\n                store.update();\n              }}\n            />\n          </div>\n        </div>\n        <div>\n          <h1>Game Tiles</h1>\n          <Inventory tiles={gameData.gameTiles} />\n        </div>\n        <div>\n          <h1>Deck</h1>\n          <Inventory tiles={gameData.deckTiles} />\n        </div>\n        <div>\n          <h1>Owned Inventory</h1>\n          <Inventory tiles={gameData.ownedTiles} />\n        </div>\n        <div>\n          <h1>Upgrades</h1>\n          <Upgrades />\n        </div>\n        <button\n          onClick={() => {\n            newGame();\n            store.update();\n          }}\n        >\n          Reset all game data\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/main.scss\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}