(this["webpackJsonpfantasy-slots"]=this["webpackJsonpfantasy-slots"]||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"name":"fantasy-slots","version":"0.1.11","private":true,"dependencies":{"gh-pages":"^3.1.0","node-sass":"^5.0.0","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.3","typescript":"^4.2.2","uuid":"^8.3.2","web-vitals":"^1.1.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.7.3","@types/jest":"^26.0.20","@types/node":"^12.20.4","@types/react":"^17.0.2","@types/react-dom":"^17.0.1","@types/uuid":"^8.3.0"},"homepage":"https://zephren.github.io/fantasy-slots"}')},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),r=a(10),c=a.n(r),s=(a(18),{state:{gameData:null,spinning:!1,selectedTile:null},_update:function(e){},update:function(){s._update(Math.random())}});window.store=s;var o=a(5),l=a(1),d=a(11),u=function e(t){Object(d.a)(this,e),this.id="",this.name="",this.icon=void 0,this.rarity=0,this.categories=[],this.baseValue=0,this.description=void 0,this.calculateValue=function(e){return 0},this.onRemove=void 0,this.createMeta=void 0,this.topStat=void 0,this.name="",Object.assign(this,t)},j={COMMON:0,UNCOMMON:1,RARE:2,LEGENDARY:3},b=["Common","Uncommon","Rare","Legendary"],f=j.LEGENDARY,h=a(22);function g(e,t){var a;return e||(console.error(new Error("Undefined tile config for creating a tile. Adding an empty tile.")),e=et),!t&&e.createMeta&&(t=e.createMeta()),{id:Object(h.a)(),config:e,effects:{},data:{spinValue:0,totalSpins:0,totalAppearances:0,highlight:!1},meta:null!==(a=t)&&void 0!==a?a:{}}}var m=a(0);function x(e){var t=e.image,a=e.config;return Object(m.jsx)("img",{className:"icon",src:t,alt:"",onClick:function(){a&&(s.state.selectedTile=g(a),s.update())}})}function O(e){var t=e.Icon;return Object(m.jsx)("span",{className:"text-icon",children:Object(m.jsx)(t,{})})}var p=new Map;function v(e,t){var a=p.get(t.name);return a||(a=Object(m.jsx)(x,{image:e,config:t})),a}var y=a.p+"static/media/coin.3480412c.png",T=function(){return v(y,tt.Coin)},k={Coin:new u({id:"d9c7f23b-a3e9-4b4e-af69-4a026998d40a",icon:T,rarity:j.COMMON,categories:["coin"],baseValue:1})};function C(e,t){var a=e.getAdjacentIndexes();return e.getTiles(a).map(t)}function w(e,t){return e.config.categories.includes(t)}var M=a(4),D=a.n(M),N=a(2),A=a(8);function V(e,t){return Math.floor(Math.random()*(t-e+1))+e}var P="9c0617fc-daf3-4f9c-943e-073f698ac0b8";function _(){var e=localStorage["".concat(P)];e=e?JSON.parse(e):{};var t=JSON.parse(JSON.stringify(s.state.gameData));S(t.ownedTiles),S(t.deckTiles),S(t.gameTiles),S(t.tilesToPick),e.gameState=t,e.saveDate=new Date,localStorage["".concat(P)]=JSON.stringify(e)}function S(e){var t,a=Object(N.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.config={id:n.config.id}}}catch(i){a.e(i)}finally{a.f()}}var R=[{totalDays:0,taxAmount:0},{totalDays:5,taxAmount:25},{totalDays:6,taxAmount:50},{totalDays:7,taxAmount:100},{totalDays:8,taxAmount:200},{totalDays:9,taxAmount:400},{totalDays:10,taxAmount:800}];function E(){var e=s.state.gameData;e.boardTiles=[],e.roundEnded=!0,e.savedCoins+=e.totalCoins,e.lastTotalCoins=e.totalCoins,e.tilesToPick=[],s.update(),_()}function I(e,t){return e.find((function(e){return e.config.id===t}))}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=s.state.gameData.ownedTiles;if(I(t,e.id))console.log("Already own tile ".concat(e.name));else{console.log("Adding owned tile ".concat(e.name));var a=g(e);t.push(a)}}function W(e){var t=s.state.gameData.gameTiles,a=t.findIndex((function(e){return e.config.id===et.id}));a>=0?t.splice(a,1,e):t.push(e)}function B(e,t){var a,n=e.reduce((function(e,a){return a.config.rarity<=t&&e.push(a),e}),[]);return(a=n)[V(0,a.length-1)]}function U(){for(var e=s.state.gameData,t=e.deckTiles,a=[],n=0;n<5;n++){var i=B(t,j.COMMON);a.push(g(i.config))}e.gameTiles=a,G()}function G(){for(var e=s.state.gameData,t=e.gameTiles,a=e.gridWidth,n=e.gridHeight,i=0;t.length<a*n;i++)t.push(g(et))}function F(){for(var e=s.state.gameData,t=e.gameTiles,a=e.gridWidth,n=e.gridHeight,i=[],r=Object(o.a)(t),c=0;c<a*n;c++){var l=Math.floor(Math.random()*r.length),d=r[l],u=t.indexOf(d);i.push(u),r.splice(l,1)}return i}function L(){var e=s.state.gameData,t=e.gridWidth,a=e.gridHeight,n=e.gameTiles,i=e.boardTiles;if(i.length)for(var r=0;r<t*a;r++){n[i[r]].data.spinValue=0}}function z(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}}function J(){return Y.apply(this,arguments)}function Y(){return(Y=Object(A.a)(D.a.mark((function e(){var t,a,n,i,r,c,l,d,u,j,b,f;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(){return(f=Object(A.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=0,c=setInterval((function(){var o=t.boardTiles,l=t.gameTiles;r>0&&r<=a*n&&(l[o[r-1]].data.highlight=!1);if(r>a*n)return clearInterval(c),s.state.spinning=!1,s.state.gameData.totalCoins+=s.state.gameData.boardValue,s.state.gameData.tilesToPick=$(i),s.state.gameData.modal="PickNewTile",s.update(),ee(),_(),void e();if(r<a*n){var d=l[o[r]];d.data.highlight=!0,d.data.totalAppearances++,d.data.spinValue=X(d,r)}r++;var u,j=0,b=Object(N.a)(o);try{for(b.s();!(u=b.n()).done;){j+=l[u.value].data.spinValue}}catch(f){b.e(f)}finally{b.f()}s.state.gameData.boardValue=j,s.update()}),100)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},b=function(){return f.apply(this,arguments)},j=function(){return(j=Object(A.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=setInterval((function(){0===--l&&(clearInterval(t),e());var a=Object(o.a)(d);z(a);for(var n=0;n<c;n++)s.state.gameData.boardTiles[n]=a.pop();console.log(s.state.gameData.boardTiles),s.update()}),100)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(){return j.apply(this,arguments)},t=s.state.gameData,a=t.gridWidth,n=t.gridHeight,i=t.deckTiles,r=F(),L(),K(),s.state.spinning=!0,s.update(),c=a*n,l=10,d=s.state.gameData.gameTiles.map((function(e,t){return t})),e.next=16,u();case 16:return t.boardTiles=r,e.next=19,b();case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){s.state.gameData.gameTiles.forEach((function(e){e.data.totalSpins++}))}function Q(e,t,a,n){return!(t<0||t>=a*n)&&((e+1!==t&&e-1!==t||Math.floor(t/a)===Math.floor(e/a))&&((e+a+1!==t&&e+a-1!==t||Math.floor(t/a)===Math.floor((e+a)/a))&&(e-a+1!==t&&e-a-1!==t||Math.floor(t/a)===Math.floor((e-a)/a))))}function q(e){var t=s.state.gameData,a=t.boardTiles,n=t.gameTiles;return e.map((function(e){return n[a[e]]}))}function X(e,t){if(!e.config.calculateValue)return e.config.baseValue;var a=s.state.gameData,n=a.gridWidth,i=a.gridHeight,r={tile:e,gameData:a,getAdjacentIndexes:function(){return function(e,t,a){var n=[];n.push(e+t),n.push(e-t),n.push(e+1),n.push(e-1),n.push(e+t-1),n.push(e+t+1),n.push(e-t-1),n.push(e-t+1);for(var i=7;i>=0;i--)Q(e,n[i],t,a)||n.splice(i,1);return n}(t,n,i)},getTiles:q};return e.config.calculateValue(r)+e.config.baseValue}function Z(e){var t,a=[],n=0,i=Object(N.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n+=f+1-r.config.rarity,a.push(n)}}catch(c){i.e(c)}finally{i.f()}return{chances:a,chanceTotal:n}}function $(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=Object(o.a)(e),n=[],i=function(e){var t=Z(a),i=t.chances,r=V(0,t.chanceTotal),c=i.findIndex((function(e){return e>=r})),s=a.splice(c,1)[0];s&&n.push(g(s.config))},r=0;r<t;r++)i(r);return n}function ee(){var e=s.state.gameData,t=R[e.currentTaxPeriod];if(e.currentTaxPeriodDay++,e.currentTaxPeriodDay>=t.totalDays){e.currentTaxPeriod++,e.currentTaxPeriodDay=1;var a=e.totalCoins-t.taxAmount;a<0&&E(),e.totalCoins=a}s.update()}function te(e){var t=e.message,a=void 0===t?"":t;s.state.gameData.events.push({id:Object(h.a)(),message:a}),console.log("GAME EVENT: ".concat(a))}function ae(){var e,t=s.state.gameData,a=0,n=Object(N.a)(t.deckTiles);try{for(n.s();!(e=n.n()).done;){a+=e.value.config.rarity}}catch(i){n.e(i)}finally{n.f()}return a/t.deckTiles.length}function ne(e,t){var a;e.config.onRemove&&(a=e.config.onRemove(t));var n=t.gameData.gameTiles,i=n.indexOf(e),r=g(et);if(a){var c=a.tiles;if(null===c||void 0===c?void 0:c.length){r=c[0];for(var s=1;s<c.length;s++)W(c[s])}a.value&&(r.data.spinValue=a.value)}n[i]=r}var ie=a.p+"static/media/key.0629d73b.png",re=a.p+"static/media/chest1.b4054229.png",ce=a.p+"static/media/chest2.d4ed67d0.png",se=a.p+"static/media/chest3.888bf5be.png",oe=a.p+"static/media/chest4.28dffa1b.png",le=function(){return v(re,tt.Small_Chest)},de=function(){return v(ce,tt.Medium_Chest)},ue=function(){return v(se,tt.Large_Chest)},je=function(){return v(oe,tt.Dark_Chest)};function be(e){var t=e.baseValue,a=e.removeValue;return{categories:["chest"],name:"",description:function(){return Object(m.jsxs)(m.Fragment,{children:["Unlocked by the key, gives ",a," ",Object(m.jsx)(T,{})]})},baseValue:t,onRemove:function(e){return{value:a}}}}var fe={Key:new u({id:"2ef31449-bf1d-4cee-8e93-e0665fb9942a",name:"",description:function(){return Object(m.jsxs)(m.Fragment,{children:["The key unlocks ",Object(m.jsx)(le,{})," ",Object(m.jsx)(de,{})," ",Object(m.jsx)(ue,{})," ",Object(m.jsx)(je,{}),", destroying both in the process"]})},icon:function(){return v(ie,tt.Key)},rarity:j.COMMON,categories:["key"],baseValue:1,calculateValue:function(e){var t=!1;return C(e,(function(a){w(a,"chest")&&(ne(a,e),t=!0)})),t&&ne(e.tile,e),0}}),Small_Chest:new u(Object(l.a)({id:"834bf40d-0a3d-4e20-83a0-4e3aa233840c",icon:le,rarity:j.COMMON},be({baseValue:1,removeValue:10}))),Medium_Chest:new u(Object(l.a)({id:"c87ea7e4-5479-4aa7-9033-0859d191390b",icon:de,rarity:j.UNCOMMON},be({baseValue:2,removeValue:20}))),Large_Chest:new u(Object(l.a)({id:"8abbd4fc-1fee-4c14-b5c2-2a627de70dd1",icon:ue,rarity:j.RARE},be({baseValue:3,removeValue:30}))),Dark_Chest:new u(Object(l.a)({id:"3422f3a8-bd1a-4549-a9ff-d0ed0621d646",icon:je,rarity:j.LEGENDARY},be({baseValue:4,removeValue:40})))},he=a.p+"static/media/pickaxe.9f91b8f2.png",ge=a.p+"static/media/rock.cffc8f04.png",me=a.p+"static/media/oreCoal.d3a30adc.png",xe=a.p+"static/media/oreCopper.ef951831.png",Oe=a.p+"static/media/oreGold.0a427c5c.png",pe=a.p+"static/media/oreIron.45ad7af5.png",ve=a.p+"static/media/oreMithril.4a29a93f.png",ye=a.p+"static/media/oreSilver.3e3113ee.png",Te=function(){return v(he,tt.Pickaxe)},ke=function(){return v(me,tt.Coal)},Ce=function(){return v(xe,tt.Copper_Ore)},we=function(){return v(pe,tt.Iron_Ore)},Me=function(){return v(ye,tt.Silver_Ore)},De={Pickaxe:new u({id:"102f6200-dd6b-434f-b486-67ccc425cc4d",name:"",description:function(){return Object(m.jsx)(m.Fragment,{children:"Breaks rocks, has 3 uses"})},icon:Te,rarity:j.COMMON,categories:["mining"],baseValue:1,createMeta:function(){return{uses:3}},topStat:function(e){return e.meta.uses},calculateValue:function(e){var t=!1;return C(e,(function(a){t||w(a,"rock")&&(ne(a,e),console.log(e.tile.meta),e.tile.meta.uses--,0===e.tile.meta.uses&&(t=!0,te({message:"A Pickaxe broke"})))})),t&&ne(e.tile,e),0}}),Rock:new u({id:"89c89fb8-b343-4767-ba9f-78b4586b4ceb",name:"",description:function(){return Object(m.jsxs)(m.Fragment,{children:["Broken by ",Object(m.jsx)(Te,{}),", gives one of ",Object(m.jsx)(ke,{})," ",Object(m.jsx)(Ce,{})," ",Object(m.jsx)(we,{})," ",Object(m.jsx)(Me,{})]})},icon:function(){return v(ge,tt.Rock)},rarity:j.COMMON,categories:["rock"],baseValue:1,onRemove:function(e){var t=g(tt.Coal);return te({message:"A broken Rock yielded a ".concat(t.config.name)}),{tiles:[t]}}}),Coal:new u({id:"48217c09-300c-44b0-803e-19f51346227b",icon:ke,rarity:j.COMMON,categories:[],baseValue:1,calculateValue:function(e){return 0}}),Copper_Ore:new u({id:"35e8e354-dcfb-430c-9401-0035b775f00f",icon:Ce,rarity:j.COMMON,categories:[],baseValue:1}),Iron_Ore:new u({id:"8df321a7-a16d-485e-9b41-aebe784350db",icon:we,rarity:j.COMMON,categories:[],baseValue:1}),Silver_Ore:new u({id:"7fa9e325-ca81-48cd-a7d5-8b1203354218",icon:Me,rarity:j.UNCOMMON,categories:[],baseValue:1}),Gold_Ore:new u({id:"5c65694c-aaea-4cf7-9387-ec81765ecaa9",icon:function(){return v(Oe,tt.Gold_Ore)},rarity:j.UNCOMMON,categories:[],baseValue:1}),Mithril_Ore:new u({id:"adf11359-db8e-4afc-8fe3-1688a3f4fb31",icon:function(){return v(ve,tt.Mithril_Ore)},rarity:j.UNCOMMON,categories:[],baseValue:1})},Ne="small-health-potion",Ae="medium-health-potion",Ve="large-health-potion",Pe="small-mana-potion",_e="medium-mana-potion",Se="large-mana-potion",Re="small-elixer",Ee="medium-elixer",Ie="large-elixer",He=a.p+"static/media/elixer1.126eb52b.png",We=a.p+"static/media/elixer2.f677e6cf.png",Be=a.p+"static/media/elixer3.ebf689aa.png",Ue=a.p+"static/media/healthPotion1.2cc42067.png",Ge=a.p+"static/media/healthPotion2.8e645ab4.png",Fe=a.p+"static/media/healthPotion3.e43eb7ea.png",Le=a.p+"static/media/manaPotion1.03ef4a80.png",ze=a.p+"static/media/manaPotion2.f6d761fd.png",Je=a.p+"static/media/manaPotion3.c6a0b4ff.png";function Ye(e,t){return C(e,(function(e){if(w(e,t))return e})).reduce((function(e,t){return t&&e.push(t),e}),[])}function Ke(e,t,a){var n=a.gameData,i=n.gameTiles,r=n.boardTiles,c=i.indexOf(e),s=r.indexOf(c);i[c]=t,t.data.spinValue=X(t,s)}function Qe(e,t){var a=Ye(t,e);return!!a.length&&(ne(a[0],t),Ke(t.tile,g(Xe.Small_Elixer),t),!0)}function qe(e,t,a){var n=Ye(a,e);return n.length>=2&&(ne(n[0],a),ne(n[1],a),Ke(a.tile,g(t),a),!0)}var Xe={Small_Health_Potion:new u({id:"e77dc97d-8d44-45e4-bbad-deb79574092d",icon:function(){return v(Ue,tt.Small_Health_Potion)},rarity:j.COMMON,categories:[Ne],baseValue:1,calculateValue:function(e){return Qe(Pe,e)||qe(Ne,Xe.Medium_Health_Potion,e),0}}),Medium_Health_Potion:new u({id:"c6d67a75-f151-4503-b04d-2fb535c06c92",icon:function(){return v(Ge,tt.Medium_Health_Potion)},rarity:j.UNCOMMON,categories:[Ae],baseValue:2}),Large_Health_Potion:new u({id:"227d75ba-7310-4aed-8f39-cab15fb90e20",icon:function(){return v(Fe,tt.Large_Health_Potion)},rarity:j.RARE,categories:[Ve],baseValue:3}),Small_Mana_Potion:new u({id:"d587eba7-246e-46c7-bd55-2f32b0093cf8",icon:function(){return v(Le,tt.Small_Mana_Potion)},rarity:j.COMMON,categories:[Pe],baseValue:1,calculateValue:function(e){return Qe(Ne,e)||qe(Pe,Xe.Medium_Mana_Potion,e),0}}),Medium_Mana_Potion:new u({id:"6c067c0f-eefb-43ce-8f81-0aabd19cacc1",icon:function(){return v(ze,tt.Medium_Mana_Potion)},rarity:j.UNCOMMON,categories:[_e],baseValue:2}),Large_Mana_Potion:new u({id:"cf9a1a58-c4ee-4284-a504-fe442c34a8f0",icon:function(){return v(Je,tt.Large_Mana_Potion)},rarity:j.RARE,categories:[Se],baseValue:3}),Small_Elixer:new u({id:"93a94d4e-7a9d-4d1a-9f8a-3b1586530ca0",icon:function(){return v(He,tt.Small_Elixer)},rarity:j.RARE,categories:[Re],baseValue:5,calculateValue:function(e){return qe(Re,Xe.Medium_Elixer,e),0}}),Medium_Elixer:new u({id:"1fb94f1d-880e-41eb-9a29-f14700a22928",icon:function(){return v(We,tt.Medium_Elixer)},rarity:j.RARE,categories:[Ee],baseValue:10}),Large_Elixer:new u({id:"3e5d71cf-0f07-4c87-a76b-b269172b0a17",icon:function(){return v(Be,tt.Large_Elixer)},rarity:j.LEGENDARY,categories:[Ie],baseValue:10})},Ze=Xe,$e={Empty:new u({id:"04f5df2c-22d6-4e31-8e81-c81f0ba1c4c1",name:"",icon:function(){return v("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",tt.Empty)},rarity:j.COMMON,categories:["empty"],calculateValue:function(e){return e.tile.data.spinValue||0}})},et=$e.Empty,tt=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},$e),k),De),Ze),fe);for(var at in tt){tt[at].name=at.replaceAll("_"," ")}var nt=Object(o.a)(Object.values(tt)),it=nt,rt=new Map,ct=[];function st(e){var t,a,n,i,r,c,s,o,l,d,u,j,b,f,h,g,m,x,O,p,v,y,T=e;T.superUser=null!==(t=T.superUser)&&void 0!==t&&t,T.boardTiles=null!==(a=T.boardTiles)&&void 0!==a?a:[],T.ownedTiles=null!==(n=T.ownedTiles)&&void 0!==n?n:[],T.deckTileIds=null!==(i=T.deckTileIds)&&void 0!==i?i:[],T.deckTiles=null!==(r=T.deckTiles)&&void 0!==r?r:[],T.gameTiles=null!==(c=T.gameTiles)&&void 0!==c?c:[],T.tilesToPick=null!==(s=T.tilesToPick)&&void 0!==s?s:[],T.gridWidth=null!==(o=T.gridWidth)&&void 0!==o?o:3,T.gridHeight=null!==(l=T.gridHeight)&&void 0!==l?l:3,T.gridWidthMax=null!==(d=T.gridWidthMax)&&void 0!==d?d:3,T.gridHeightMax=null!==(u=T.gridHeightMax)&&void 0!==u?u:3,T.boardValue=null!==(j=T.boardValue)&&void 0!==j?j:0,T.totalCoins=null!==(b=T.totalCoins)&&void 0!==b?b:0,T.savedCoins=null!==(f=T.savedCoins)&&void 0!==f?f:0,T.lastTotalCoins=null!==(h=T.lastTotalCoins)&&void 0!==h?h:0,T.currentTaxPeriod=null!==(g=T.currentTaxPeriod)&&void 0!==g?g:0,T.currentTaxPeriodDay=null!==(m=T.currentTaxPeriodDay)&&void 0!==m?m:0,T.roundEnded=null!==(x=T.roundEnded)&&void 0!==x&&x,T.events=null!==(O=T.events)&&void 0!==O?O:[],T.modal=null!==(p=T.modal)&&void 0!==p?p:"Intro",T.flags||(T.flags={}),T.counters||(T.counters={});var k=T.counters;return k.totalSpins=null!==(v=k.totalSpins)&&void 0!==v?v:0,k.totalRounds=null!==(y=k.totalRounds)&&void 0!==y?y:0,T}function ot(e){var t=function(e){var t=tt[e];return t||console.error(new Error('Tile name "'.concat(e,'" not found'))),t}(e);H(t),function(e){if(e){var t=s.state.gameData.deckTileIds;t.includes(e)||t.push(e)}}(null===t||void 0===t?void 0:t.id)}function lt(){var e=st({});s.state.gameData=e,s.state.gameData.tilesToPick=[],ot("Coal"),ot("Pickaxe"),ot("Rock"),function(){var e=s.state.gameData,t=e.deckTileIds,a=e.ownedTiles;e.deckTiles=t.map((function(e){return I(a,e)||g(et)}))}(),U(),ee()}function dt(){var e,t=localStorage["".concat(P)];if(null===(e=t=t?JSON.parse(t):{})||void 0===e?void 0:e.gameState){var a=st(t.gameState);ut(a.ownedTiles),ut(a.deckTiles),ut(a.gameTiles),ut(a.tilesToPick),s.state.gameData=t.gameState}}function ut(e){var t,a=Object(N.a)(e);try{var n=function(){var e=t.value;e.config=it.find((function(t){return t.id===e.config.id}))||et};for(a.s();!(t=a.n()).done;)n()}catch(i){a.e(i)}finally{a.f()}}function jt(e){var t=e.tile,a=e.showValue,n=e.fade,i=e.onClick,r=["tile"];return t.data.highlight&&r.push("highlight"),n&&r.push("fade"),Object(m.jsxs)("div",{className:r.join(" "),onClick:function(){s.state.selectedTile=t,s.update(),i&&i(t)},children:[!!t.config.topStat&&a&&Object(m.jsx)("div",{className:"top-stat",children:t.config.topStat(t)}),!!t.data.spinValue&&a&&Object(m.jsx)("div",{className:"value",children:t.data.spinValue}),Object(m.jsx)(t.config.icon,{})]})}function bt(e){var t=e.boardTiles,a=e.gameTiles,n=e.width,i=e.height,r={fontSize:"1.5em",gridTemplateColumns:"repeat(".concat(n,", 5em)"),gridTemplateRows:"repeat(".concat(i,", 5em)")};if(0===t.length){var c=g(et);return Object(m.jsx)("div",{className:"board",style:r,children:" ".repeat(n*i).split("").map((function(e,t){return Object(m.jsx)(jt,{tile:c},t)}))})}return Object(m.jsx)("div",{className:"board",style:r,children:t.map((function(e,t){var n=a[e];return Object(m.jsx)(jt,{tile:n,showValue:!0,onClick:function(){}},n.id)}))})}function ft(e){var t=e.tiles,a=e.onClickTile,n=e.fade;return Object(m.jsx)("div",{className:"inventory",children:t.map((function(e){return Object(m.jsx)(jt,{tile:e,onClick:a,fade:n&&n(e)},e.id)}))})}function ht(e,t){var a=s.state.gameData,n=0,i=0;"width"===e?(n=a.gridWidth,i=a.gridWidthMax):"height"===e&&(n=a.gridHeight,i=a.gridHeightMax);var r=n+t;r>=3&&r<=i&&("width"===e?a.gridWidth=r:"height"===e&&(a.gridHeight=r),s.update())}nt.forEach((function(e){rt.set(e.id,e),ct.push(g(e))}));var gt=[{id:"bbe17879-f3ee-47fc-9e76-2fa8cc0ebc0d",name:"Board Max Width",description:function(){return Object(m.jsxs)(m.Fragment,{children:["The width of the board. Smaller boards hold fewer tiles, but the tiles will be adjacent more often. Bigger boards hold more tiles, but the tiles will be adjacent less often.",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"shrink-buttons",children:[Object(m.jsx)("button",{onClick:function(){return ht("width",-1)},children:"-"}),Object(m.jsx)("span",{className:"stepper-value",children:s.state.gameData.gridWidth}),Object(m.jsx)("button",{onClick:function(){return ht("width",1)},children:"+"})]})]})},value:function(){return s.state.gameData.gridWidthMax},cost:function(){var e=s.state.gameData;return Math.pow(10,e.gridWidthMax)},buy:function(){var e=s.state.gameData;e.gridWidthMax+=1,e.gridWidth=e.gridWidthMax,G(),s.update()},isComplete:function(){return!1}},{id:"1e0ab330-8ec9-4e41-933d-75251ffa5ee5",name:"Board Max Height",description:function(){return Object(m.jsxs)(m.Fragment,{children:["The height of the board. Smaller boards hold fewer tiles, but the tiles will be adjacent more often. Bigger boards hold more tiles, but the tiles will be adjacent less often.",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"shrink-buttons",children:[Object(m.jsx)("button",{onClick:function(){return ht("height",-1)},children:"-"}),Object(m.jsx)("span",{className:"stepper-value",children:s.state.gameData.gridHeight}),Object(m.jsx)("button",{onClick:function(){return ht("height",1)},children:"+"})]})]})},value:function(){return s.state.gameData.gridHeightMax},cost:function(){var e=s.state.gameData;return Math.pow(10,e.gridHeightMax)},buy:function(){var e=s.state.gameData;e.gridHeightMax+=1,e.gridHeight=e.gridHeightMax,G(),s.update()},isComplete:function(){return!1}}];function mt(){var e=s.state.gameData;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("table",{className:"table upgrades",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Information"}),Object(m.jsx)("th",{children:"Value"}),Object(m.jsx)("th",{children:"Cost"}),Object(m.jsx)("th",{children:"Action"})]})}),Object(m.jsx)("tbody",{children:gt.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{className:"name",children:t.name}),Object(m.jsx)("div",{className:"description",children:Object(m.jsx)(t.description,{})})]}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{className:"cost",children:t.value()})}),Object(m.jsx)("td",{children:Object(m.jsxs)("div",{className:"cost",children:[t.cost(),Object(m.jsx)(O,{Icon:T})]})}),Object(m.jsx)("td",{children:e.savedCoins>t.cost()&&Object(m.jsx)("button",{onClick:function(){return function(e){var t=e.cost();e.buy(),s.state.gameData.savedCoins-=t,s.update()}(t)},children:"Buy"})})]},t.id)}))})]})})}function xt(){var e=s.state.gameData;e.currentTaxPeriod=0,e.currentTaxPeriodDay=0,e.roundEnded=!1,e.boardTiles=[],e.totalCoins=0,e.events=[],e.tilesToPick=[],e.modal="",e.counters.totalRounds++,U(),ee(),s.update()}function Ot(){var e=ae(),t=s.state.gameData;function a(e,t){return 100*Math.pow(e+1,2)*(t+1)}function n(){var e=Object.keys(j).map((function(){return[]})),a=Object.keys(j).map((function(){return[]})),n=Object.keys(j).map((function(){return 0}));return ct.forEach((function(i){a[i.config.rarity].push(i),i.config!==et&&(I(t.ownedTiles,i.config.id)?n[i.config.rarity]++:e[i.config.rarity].push(i))})),{availableTilesByRarity:e,allTilesByRarity:a,ownedRarityCounts:n}}var i=n(),r=i.availableTilesByRarity,c=i.allTilesByRarity,o=i.ownedRarityCounts;return Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center",height:"100%"},children:Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",background:"#333",boxShadow:"0em 0em 1em 0em #000",zIndex:1},children:[Object(m.jsx)("div",{style:{fontSize:"2em",padding:"0em 0.5em",display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(m.jsxs)("div",{children:[t.savedCoins,Object(m.jsx)(O,{Icon:T})," (+",t.lastTotalCoins,Object(m.jsx)(O,{Icon:T})," earned)"]})}),Object(m.jsx)("div",{className:"shrink-buttons",children:Object(m.jsx)("button",{onClick:xt,children:"Next round"})})]}),Object(m.jsx)("div",{className:"main-container",style:{width:"100%",flexGrow:1},children:Object(m.jsxs)("div",{style:{padding:"1em"},children:[Object(m.jsx)("h1",{children:"The Round Is Over"}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:"This is your chance to get a new tile. Getting a new tile will increase the cost of the next tile of the same rarity"}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"buy-new-card",children:Object.keys(j).map((function(e,i){var l=j[e],d=a(l,o[i]),u=r[i].length,b=["rarity"],f=!0;return(d>t.savedCoins||0===u)&&(b.push("disabled"),f=!1),Object(m.jsxs)("div",{className:b.join(" "),children:[Object(m.jsx)("div",{className:"name",children:e}),Object(m.jsx)("div",{className:"cost",children:d}),Object(m.jsxs)("div",{className:"remaining-tiles",children:[r[i].length," of ",c[i].length," tiles available"]}),f&&Object(m.jsx)("button",{onClick:function(){return function(e){var i=n(),r=i.availableTilesByRarity,c=i.ownedRarityCounts,o=r[e],l=V(0,o.length-1);t.savedCoins-=a(e,c[e]),H(o[l].config),s.update()}(i)},children:"Buy"})]},l)}))})]}),Object(m.jsx)("br",{}),Object(m.jsx)("h1",{children:"Take this time to reorganize your deck"}),Object(m.jsx)("div",{style:{maxWidth:"50em"},children:"Remove tiles by clicking on them in your deck, or add tiles by clicking on the ones in your inventory. You deck score must be less than one. This is to encourage a balance of tile rarities."}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Deck"}),Object(m.jsxs)("div",{style:{background:e>1?"red":"none"},children:["Score: ",e.toFixed(2)]}),Object(m.jsx)(ft,{tiles:t.deckTiles,onClickTile:function(e){var a=t.deckTiles.indexOf(e);a>=0&&t.deckTiles.splice(a,1)}})]})}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Owned Inventory"}),Object(m.jsx)(ft,{tiles:t.ownedTiles,fade:function(e){return!!t.deckTiles.find((function(t){return t.config.id===e.config.id}))},onClickTile:function(e){t.deckTiles.find((function(t){return t.config.id===e.config.id}))||t.deckTiles.push(e)}})]})}),t.superUser&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"All Tiles"}),Object(m.jsx)(ft,{tiles:ct,fade:function(e){return!!t.ownedTiles.find((function(t){return t.config.id===e.config.id}))},onClickTile:function(e){t.superUser&&(t.ownedTiles.find((function(t){return t.config.id===e.config.id}))||t.ownedTiles.push(g(e.config)))}})]})]}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{style:{maxWidth:"50em"},children:[Object(m.jsx)("h1",{children:"Upgrades"}),Object(m.jsx)(mt,{})]}),Object(m.jsx)("br",{}),Object(m.jsx)("h1",{children:"Board Next Round"}),Object(m.jsx)("div",{style:{fontSize:"0.25em",display:"flex",justifyContent:"center"},children:Object(m.jsx)(bt,{boardTiles:t.boardTiles,gameTiles:t.gameTiles,width:t.gridWidth,height:t.gridHeight})})]})})]})})}function pt(e){var t=e.events;return Object(m.jsx)("div",{className:"game-events",children:t.map((function(e){return Object(m.jsx)("div",{className:"event",children:Object(m.jsx)("div",{className:"message",children:e.message})},e.id)}))})}var vt=a(12);function yt(e){s.state.gameData.modal=e,s.update()}function Tt(){s.state.gameData.modal="",s.update()}function kt(e){var t=e.children,a=e.style;return console.log(t),Object(m.jsx)("div",{className:"modal",children:Object(m.jsx)("div",{className:"shade",children:Object(m.jsx)("div",{className:"container",style:a,children:t})})})}function Ct(e){var t=e.tile,a=e.onClick;if(!t)return null;var n=t.config;return Object(m.jsxs)("div",{className:"tile-details",onClick:a,children:[Object(m.jsx)("div",{className:"name",children:n.name}),Object(m.jsx)("div",{className:"rarity",children:b[n.rarity]}),Object(m.jsx)(t.config.icon,{}),Object(m.jsxs)("div",{className:"base-value",children:[n.baseValue,Object(m.jsx)(O,{Icon:T})]}),Object(m.jsx)("div",{className:"description",children:n.description&&n.description()})]})}function wt(){var e=s.state.gameData.tilesToPick;function t(e){e&&W(e),s.state.gameData.modal="",s.state.gameData.tilesToPick=[],_(),Tt()}return Object(m.jsxs)(kt,{children:[Object(m.jsx)("h1",{children:"Pick New Tile"}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"pick-a-tile",children:e.map((function(e){return Object(m.jsxs)("div",{className:"option",children:[Object(m.jsx)(Ct,{tile:e},e.id),Object(m.jsx)("button",{onClick:function(){t(e)},children:"Select"})]})}))}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:function(){return t()},children:"Skip"})]})}function Mt(){var e=s.state.gameData,t=ae();return Object(m.jsx)(kt,{style:{width:"50em"},children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Inventory"}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Game Tiles"}),Object(m.jsx)("br",{}),Object(m.jsx)(ft,{tiles:e.gameTiles})]}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Deck"}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{style:{background:t>1?"red":"none"},children:["Deck Score: ",t.toFixed(2)]}),Object(m.jsx)(ft,{tiles:e.deckTiles})]}),e.superUser&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"All Tiles"}),Object(m.jsx)(ft,{tiles:ct,onClickTile:function(t){e.ownedTiles.find((function(e){return e.config.id===t.config.id}))||e.ownedTiles.push(g(t.config))}})]}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:Tt,children:"Close"})]})})}function Dt(){s.state.gameData;return Object(m.jsxs)(kt,{children:[Object(m.jsx)("h1",{children:"How To Play"}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"What Is This?"}),Object(m.jsx)("br",{}),"This is a slot machine incremental game. Every spin will result in new tiles on the board. Depending on the tiles that appear, you will earn money or trigger other effects.",Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("h3",{children:"Game Play"}),Object(m.jsx)("br",{}),"You must pay taxes after a set number of days. The taxes due are subtracted from your total moneny at the end of the tax period. As you successfully pass tax periods, the periods become longer and the amount of taxes due becomes greater. If you do not have enough money to pay taxes, you will instead get to keep the final amount of money earned. Save up enough money and you can use it to purchase new tiles or upgrades."]}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:Tt,children:"Play!"})]})}function Nt(){return Object(m.jsxs)(kt,{children:[Object(m.jsx)("h1",{children:"Options"}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:function(){lt(),_(),s.update()},children:"Reset All Game Data"}),Object(m.jsx)("button",{onClick:function(){_()},children:"Save Game Data"}),Object(m.jsx)("button",{onClick:E,children:"End Round"}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:Tt,children:"Close"})]})}function At(){var e=s.state.gameData,t=R[e.currentTaxPeriod];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{fontSize:"3em"},children:[e.totalCoins,Object(m.jsx)("span",{className:"icon-em",children:Object(m.jsx)(T,{})})," ","/ ",t.taxAmount,Object(m.jsx)("span",{className:"icon-em",children:Object(m.jsx)(T,{})})," ","taxes due in ",t.totalDays-e.currentTaxPeriodDay," Days"]}),Object(m.jsxs)("div",{style:{float:"right"},children:["Tax Period: ",e.currentTaxPeriod]}),Object(m.jsxs)("div",{children:["Saved: ",e.savedCoins,Object(m.jsx)(O,{Icon:T})]})]})}function Vt(){switch(s.state.gameData.modal){case"Intro":return Object(m.jsx)(Dt,{});case"PickNewTile":return Object(m.jsx)(wt,{});case"Inventory":return Object(m.jsx)(Mt,{});case"Options":return Object(m.jsx)(Nt,{})}return null}function Pt(){var e=s.state.gameData;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Vt,{}),Object(m.jsxs)("div",{className:"version",children:["Version: ",vt.version]}),Object(m.jsx)("div",{className:"app",style:{display:"flex",justifyContent:"center",height:"100%"},children:Object(m.jsxs)("div",{className:"main-container",style:{padding:"1em"},children:[Object(m.jsx)(At,{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("br",{}),Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(bt,{boardTiles:e.boardTiles,gameTiles:e.gameTiles,width:e.gridWidth,height:e.gridHeight})}),Object(m.jsxs)("div",{style:{fontSize:"2em",textAlign:"center"},children:["Board value ",!!e.boardValue&&e.boardValue||0,Object(m.jsx)(O,{Icon:T})]}),!s.state.spinning&&Object(m.jsxs)("div",{style:{marginTop:"0.5em"},children:[Object(m.jsx)("button",{onClick:J,children:"Spin"}),Object(m.jsxs)("div",{style:{marginTop:"1em"},children:[Object(m.jsx)("button",{onClick:function(){return yt("Inventory")},children:"Inventory"}),Object(m.jsx)("button",{onClick:function(){return yt("Intro")},children:"How To Play"}),e.counters.totalRounds>0&&Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return yt("Options")},children:"Options"})})]})]}),Object(m.jsx)("br",{})]}),e.counters.totalRounds>0&&Object(m.jsx)(m.Fragment,{children:!!e.events.length&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Events"}),Object(m.jsx)(pt,{events:e.events}),Object(m.jsx)("br",{})]})})]})})]})}function _t(){return s.state.selectedTile?Object(m.jsxs)("div",{className:"selected-tile",children:[Object(m.jsx)(Ct,{tile:s.state.selectedTile}),Object(m.jsx)("button",{onClick:function(){s.state.selectedTile=void 0,s.update()},children:"Close"})]}):null}dt(),dt();var St=function(){var e=Object(n.useState)(0)[1];Object(n.useEffect)((function(){s._update=e}),[e]),s.state.gameData||lt();var t=null;return t=s.state.gameData.roundEnded?Object(m.jsx)(Ot,{}):Object(m.jsx)(Pt,{}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(_t,{}),t]})};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(St,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.677b19e7.chunk.js.map